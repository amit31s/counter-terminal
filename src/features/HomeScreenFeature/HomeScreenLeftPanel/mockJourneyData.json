{
   "engineVersion":"5.19.0",
   "nodes":[
      {
         "nodes":[
            {
               "nodes":[
                  {
                     "name":"acceptFromCustomer",
                     "type":"subJourney"
                  }
               ],
               "title":"Accept from Customer",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "name":"estimatedDeliveryDate",
                     "type":"subJourney"
                  }
               ],
               "title":"Get Estimated Delivery Date",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "type":"abort"
                  }
               ],
               "title":"Letter or parcel",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "name":"readabilityTest",
               "type":"subJourney"
            },
            {
               "nodes":[
                  {
                     "name":"dangerousGoodsSubJourney",
                     "type":"subJourney"
                  }
               ],
               "title":"Dangerous Goods",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "name":"collections",
                     "type":"subJourney"
                  }
               ],
               "title":"Collections",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "name":"ppiBagsJourney",
                     "type":"subJourney"
                  }
               ],
               "title":"PPI Bags",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            }
         ],
         "title":"Mails",
         "type":"choice",
         "visual":{
            "transition":true
         }
      },
      {
         "nodes":[
            {
               "params":[
                  
               ],
               "title":"Everyday Banking",
               "type":"info",
               "visual":{
                  "view":"list"
               }
            },
            {
               "nodes":[
                  {
                     "actions":[
                        {
                           "title":"No",
                           "value":"no",
                           "visual":{
                              "view":"secondary"
                           }
                        },
                        {
                           "title":"Yes",
                           "value":"yes",
                           "visual":{
                              "view":"primary"
                           }
                        }
                     ],
                     "description":"Remind the customer if they have the option to use a debit card instead, the deposit will reach their account quicker.\n\nTo continue with the manual cash deposit, please confirm that the customer is present and they have provided a personalised deposit slip.",
                     "nodes":[
                        {
                           "comparison":"eq",
                           "expected":"yes",
                           "given":"{{ outputData.actions.inputGroup }}",
                           "nodes":[
                              {
                                 "title":"Select Bank",
                                 "type":"info"
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"NatwestManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"NatWest",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"LloydsManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"Lloyds",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"HalifaxManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"Halifax",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"TSBManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"TSB",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"YorkshireManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"Yorkshire",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"BankOfScotlandManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"Bank of Scotland",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"ClydesdaleManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"Clydesdale",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"UlsterManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"Ulster Bank",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"BankOfIrelandManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"Bank of Ireland",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"FirstTrustAIBManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"First Trust/AIB (NI)",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              },
                              {
                                 "nodes":[
                                    {
                                       "name":"AlliedIrishBankManualCashDeposit",
                                       "type":"subJourney"
                                    }
                                 ],
                                 "title":"Allied Irish Bank (GB)",
                                 "type":"choice",
                                 "visual":{
                                    "transition":true
                                 }
                              }
                           ],
                           "type":"condition"
                        },
                        {
                           "comparison":"eq",
                           "expected":"no",
                           "given":"{{ outputData.actions.inputGroup }}",
                           "nodes":[
                              {
                                 "type":"abort"
                              }
                           ],
                           "type":"condition"
                        }
                     ],
                     "outputData":{
                        "actions.inputGroup":"{{ inputData.action }}"
                     },
                     "title":"Debit card reminder",
                     "type":"prompt",
                     "visual":{
                        "actionAlignment":"left",
                        "transition":false,
                        "view":"medium"
                     }
                  }
               ],
               "title":"Manual Cash Deposit",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "nodes":[
                        {
                           "name":"Danske_ChangeGiving",
                           "type":"subJourney"
                        }
                     ],
                     "title":"Danske",
                     "type":"choice",
                     "visual":{
                        "imageData":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAQwAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAAAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3BhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAwADEANv/bAEMAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/bAEMBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAEcAXgMBEQACEQEDEQH/xAAeAAEAAgICAwEAAAAAAAAAAAAABgcICQUKAQIEA//EADsQAAAGAgEBAwkGAwkAAAAAAAIDBAUGBwEIAAkREhMUGiE2UVhhl9cVFnV2tdEKFyMnOTp3eYGht8H/xAAcAQEAAgMBAQEAAAAAAAAAAAAAAwUCBAYHAQj/xABDEQACAgEDAgEHCQQGCwAAAAABAgMEBQAREgYTIRQVFyIxVdQHIzIzQXKUlbJRVGGBFjY3c7G0JCU0NUJDdXbB8PH/2gAMAwEAAhEDEQA/AOp/z9sa/C+nGmnGmnGmnGmnGmnGmnGmnGmnGmnGmnGmnGmtoGufSY2L2U18ZNnWCxdYqyqSRTV/r1mer3vNiqY5wlccBk5xa0gZEgCiUqMpwHq0xCdeaqPSJVSjycJSc0QeXyXV2NxmQfGS18nZtxwR2XSjRe2FikOyse23IDfYElQASBv4jXZ4nofKZjGRZaG3iqtSaWWGM3rhrMXhYo4AMTKfEHbZySPHYa+O/wDpJ7f0DUT5f5iKpbspCJqkyGaWjrdcUHuqMwlUrOKIIDLCos4jfWZN4p6cChzPZstCISlNhavT5UFYF9x/V2HyFyPHhrdK9MGaCrkqc9KScKNz2TKojc7AkIH5sASFO2osp0Tm8VUkyDLUvUYSomtY23FcihLEjeUIRIijYbuyBAXUctztrWXzp9cjpxppxppxprm4zH3CWSOPxZpwRl1kr21R9swpNyQmy4PK9O3IsKDsBHkkjKlSX4puADyWX3h90XZ2ZjllWGKWZ9+EUbyvsNzxjUu2w+07A7D7TqatA9qxBWj4iSxNFBHyOy85nWNORAJC8mG52Ow+w6uHaHW6yNQ75sTXK3QsILGrBwa2yThjDqN7YsKnePNEmSYb3QaRCJWX9mPaLxR5SE9xR4xWMCwXgYtPF5KtmKFbJU+55NaVni7qhJNkkeI8lDNseSN4bnw2P8NbmXxdnC5GzjLZiNiq6pIYWLxksiuOLMqEjZh7VHjvqg+WGq3TjTTjTTjTW+a4P8OjqR/qO2l/t/ZlYHo/99Pp9no5wVT+0fLf9t1f5/6VX8f5ez/069Jvf2Y4T/rt3+XjZ/8AunQeUuiiU9SCNuJ60yq3npdbTKrJazzDsxVSBtSxkliXvqYect+VzeU5vxDQrPBlYmSuL4UjGBOqccDdeCMR9NSjYWk6pxQrOAO6AzSGRUO3Pi3GMuB6rFU5bkLqL5Pmslup4o/Wrt0xk2mRz8wZFRRCZAzBAdyy8j7FLDcAk6t3RrXatmDp+wS9pvrp07WaX2rb85a4xfnUq2Jmkdhtlw2ICUMrnG6dp+BuTOpTKIlIUg0TzJ3FxwpULAOwTkapEaynINLPZG1J1BYoQZHqKSGrTgeXH9M4+GSatNMA6yXLk6uD3kPJIlXYLw2IIkDW3TmKoxdN18jaxWCWa1bnCZDqS/NHDZgiJUJTq10LKFO4Z3B5MrMeSmLhNNsdJtWorvz0biYdXFLp4PuQZQq+9oRRc0l871vmTq43UyxSWuFWvEsclcjLg0uZnISIpCUvJTlIkxIiABXmr162LEZvKy4DrIzWbpnwwvrQnvwQwZKFVovNEtpIVERmhkXly4kkk7njxVcM1g8RF1B0WtepRWDMNTOQhx088+NnLXlgdqrTHurFInIN4qR7Bsys7WNSTdpVfXVjsfpWv/Tm1didLOFz7TVCzWpB110N9/RxRVDNab8xy5DOne0npuwoPWwgoOI6mjiGPoCFpSNKj+y2/Dcq1bz5yh0lW6qj6jykt1amMuPUnWk1CVbclWN4WgSrG2wE+5kMrO2xJPJgwsKMOAyHV9zpN+msbDVE+Rqrchkui4orJM8cqs9h0EnJNyeG22ygcVA1h10xqk09eKG2cUy7GlEn3XjFsxqO1NF+oLZsmrKhzqhJTCxJ3iOBaZJFGiUz9W6FOJRzavdFKlnRIGpaUBElWKAO9z1PdzEd/FiLz1FhJacktuTp+tFav+WE/NRyc4pXjrhSmzKgWRmZTuQClF0njsLNjcq8yYefLpdSCnHn7c1OkKgUmR4pImjD2CQd15llRPV4gsWlO9dANVfg6fNqINStaqgdZjdyyOSm/dJryxaurlvrGmdsBjJGmKMnSiXLoPLoe1kG/apx7nguQrD30RJqktqCgYocHkHsr1HVbL5K4kNDuRY/N0PJMpTD15OcskojiWeGZyOACfNqI/Zy5SbeaxkNOx0lZjxGOpvLlYYZr+GvG5jLnbswGJEDSyyRzIm7O0mzSbt4tw9TYr1p9aag1ulG7O+8jq5h25szYO3WSk4UDAzXundJTW2pq6TqJZdTW2uKVxcLrlWQJDa2jT8hDB29vXNji9KnQ53QsD5z3ROTuZKLCYCOy+Iq46pJenJ2S7nA9uyRDSZlKrRi3PlMkbeUMysqBODSJc9cYqnjZc51BJWXMWshb8ihC8np4TjBDvPdCMGa7J4eTxSAV0DBpO7yVG1/9NPTuinDp4WXufNI1prMbkcNpyNeq+Bv7cr3UWuMOjjJXDNPX5wTJmSQRcucWLJDXwaRtYnV0wUkaWc53bcEYa3hK79B1Nmby9RVcJDLmYKa4o5GwcBTS3kppHsvXjUl45exXjCcmkVDu7BG35IUpel8Djx0xPnrMOHs25sj5FWGcutTx9eKNd3O6yJ3LEjb8Ec/QXcDbkTQ3VdpnUiJVBqnaNLO+mzJsNL1NoxrZasNIb7MuilUeWFwZ1NbzePt7nJpM+wYb0yKl6N4azFQWpQ5E4LQ+KcgVK1lh0ndy81zLVbq5mTHQipLjbWboeRXW7quLMEjLFEk4jdVKPtzCndvBgFq+sqWGhpYi3RGIhyNhrkeQrYS95dR4xMnYmVjK7QuysVZQvF25EEFPW0hc7fXn+nGmtr2vXVgltG6sxnUKU6k6c7K1NELGklqR8jY6u5nOnBumEmTmo1bimKbrEjzIQalQKVjeiUEM5awtGuVkGqTgnC5yWS6ShyGVkzEWXzOMty1o6khxtmKBWhiPIKSYHkILBWYFypZQQBtrtMZ1pYx2IgwsmHwuTqV5prEfnKtNYYSzOzM2y2I4wQGKqQgIXwJOva4Orvck7o6fa6UzQGpGmVW24UnRXAh1Mp06uZDarKmwbguNzSVO8mlLwsj4sHqCT0CA5uGqb1K1mVKDmRyc25apdH0q96vkbuQy+atU9zTbL3PKY6rn/mwxLHEgkGwIZuWzBXAEiqw+X+tr1qhPjaWOxGErWxxuDE1DXktRjxEUsjySv29y26qV3VihPAsDGql6mz5Dtaa61PubVrWTaqpqZf5xJKbBdLHYqWU1ytsN0OfpW3tMjrexYMesYHZ+UKHdY2uJChQoUmlgMccpkDWQgludLxz5OzlqWVymJt3Y4IrvkMlftWVrKEhZ47FecLIkYCB1IAG/q7s/KOl1fPXxdbEXcTicxUpSTSUhkYp3esZtyyo0FiHdORJKsCSNlDKAu36W11VLitm49KLkNqKgoAq0NHESqVgdcReYMFeDZ4NOG2bxmPyBnXTt4dDWxAa0oWUYmh7aXBW2FmHK1xzuec5jU+lKdOnm6YuZCwM93jdsWZYZLIeeBoJZI3WBEDMHZxzjZVYgBQgC6xvdX3Lt/CXvIcfV8wmLyKtVjmjrlYbAsRpIpmZioYBTwZCw3JJYltVxVHUNtyoOoK49RuPRGuHC4HK0rhtg6HPKCTHVqB+ulrm7VI28pvRShDKMNDaRPHQxkLHKhrSTkqDK9avABSBTs2+nadzp5em5JrK01q06gmRohZ7dJ4HjYs0TRc2MChz2uJBbiqnYiCn1TdpdSS9TR16rXJZ7U7QOsvkwa2siOAFlWXiokJTeUncDcnx1Iteuo9LqRpKztbJhr9rtsZRdq2wTdj3Bboj88Gcy2KS1JWTD3FZNX1hQSQtXea0KRJ4Clc4gKLKOwnyThe5BWRZHpqC9eq5KLIZLHXqlM0Y56Mtcc65Zn4Sx2K1iNtnYtuqoTuN/orx+47qmzQx9nFSY/GZGjauLdevfhsOqzABSyNWs1ZN+IAXk7BDs3E+IPrfnUnsu7Ifr7VMfp6haDo/WqeLbMrunKVjMtbIsrnLk5p3NwkkvdZjN5nMJC6KRFHpMnikSQIEi9aAJfijIOIUOmatKbI2pLmQv3cnXFWzcvTQvMK6oUWOJYYIIUUAg/VEllB9m4OV7qy5cjxMCUcbQqYe0LtenQgmirvZ7iSM8ndnnmIYoBt3t9mbdieJW1UvWS2YDs1s5sO7wynJXGtxGFPHNhNZpWwSt711nraghzZDWg1TFlEzxKELyyJWspwaJCgmJD2iWKnBOWv+ylpzdnVPRmM814zHJNcilw7tJjsnFJFHka7vM0z8ZRD2mSQuVeNoSjKFJHNQ+tlet8oMrk8m0FKWLMIEyOLmjkkxtlVjEac4mlMgaMgPG6yh1JK8ijOrU/r31EJVRNY2Xr680HQF8az2VZqa3f5D3ayTl/jkDnqJEaypJFXcoj88jM9YncEZyljKle4SZ6OXNCEoCvxT1bse47mQ6chv2a2QW/kKGTrVTT8voyQRSzwMeZjsRSV5YHTu8pQqRR8XY8SAEC6uO6pnx9S3jjjcZexlq2t1cfkIp569aYHiWrsliKZSYvmwXlf2KzBjyD8Lttv3M9q65pelU1M0Rr7SVBKZmurmsqLjElaWwh0nq5M4SN3f3uay+bSV8clSpOI0JhjqmTBMVrDRpTDTSxk54jp+HE2bt03b+Qu5AQLZs35YncpXUrEiJDDBGiqDt9AnYAb+B3hzXUc+ZrUKRoY7HU8cZ2r18dDJFGHsMGlZjNNPId+K+HPjuCQBuAMDOX+ud13Dmr+ETtB0a21zDu9AiQuKBGvCSKkZCMRQVictRgvI8WMHA8gwZ3ciwEOBZx24xjGeeON8r1VWZTg7G6kj/bo/sO37tr25fkZmZVbz/EOQB283v9o3/e9ff5oJaXvxQD5HyL6j8+emCp7jsfjo/h9ffQxP7/i/Ln+L080EtL34oB8j5F9R/b+/w49MFT3HY/HR/D6ehif3/F+XP8Xp5oJaXvxQD5HyL6j+39/hx6YKnuOx+Oj+H09DE/v+L8uf4vTzQS0vfigHyPkX1H9v7/Dj0wVPcdj8dH8Pp6GJ/f8AF+XP8Xp5oJaXvxQD5HyL6j8emCp7jsfjo/h9PQxP7/i/Ln+L1580EtL34oB8j5F7f8x/Z/z6Pjx6YKnuOx+Oj+H09DE/v+L8uf4vXjzQS0vfigHyPkX1H49MFT3HY/HR/D6ehif3/F+XP8Xp5oJaXvxQD5HyL6j8emCp7jsfjo/h9PQxP7/i/Ln+L080EtL34oB8j5F9R/b+/wAOPTBU9x2Px0fw+noYn9/xflz/ABenmglpe/FAPkfIvqP7f3+HHpgqe47H46P4fT0MT+/4vy5/i9RWYfwl1mxFsIcjd1oItCevLQ4KLpWQEiDkxOpPwZkQrEMxnGMJshyHsxntHjPb6M4zJH8rlWRiowk4IG/jej/aB9lb+OsH+RqdAD5/iO52/wB3uPsJ/ez+zXekiPqpGPy8y/pqbnhUn1kn32/Ude8x/Vx/cX9I1IeYaz1i/uftTDtJdZbT2in8eksriFUII+4PMfh4WsUkcSpFMI9DUoGwL04NTZkZC6RpVSjypenD5IQoyXkZ3hlDtMLips3k6mLgkjhlts6pJNy7amOKSYluCs3isZA2U+JGqnOZaLBYq3lZopJ4qaxs8URUSOJJ44AFLkKNmlDHcjwB28dta63TrFTuOwhRaEk6VnUbbq1bo798neXI6/q54TN8OLb8PCqS+SIbRyoObUjR33RQfnwSSEJZilScQQWYYDo4+j6s04qxdV9OtZeTsxwtLbj5TcuCx8nrABmfZQPEliAoYkA83J1jfhhNqfpDPx1VTuyTr5HN24ePNpe3FYZyqpux8AAB4ke3W1PX69q52cpWtb+qR1Peq5taKt8tiy5YkG3uAUS7AwHt7q3mCGNA8NC8lW0PCHJhuEbohVpwnHBKwaPlMhQs4y7Zx9tAlmpK0Mqg8l5L7GRh9JHUh0bYckYHYb7a67H362UpVshTfuVrcSywuRxJU7ghl/4WVgVYeOzKRudtXDzT1uacaaxv282YienOt1r7MzphkUnidRsCWQPbDEwtopE5JVb21MYCWoLwvbG3J4VDsScLCtemL8Es3sHkfcAKyw+MlzOSqYyCSOKW3I0aSS8u2pWN5N34KzbbIR4KTuRqrzWViwmLuZWaKSaKnGsjxRFRI4eVIgFLkKCC4J3PsB+3VzwaVo55CYfOG5MpRt8zi0flaFIt8LyxKjkTSkd0qZX4BhpHlJBCwBR/gmmleKEfhmDB2CzpTxNBNNAxBaGWSJiu/EtG5QkbgHYkbjcA7e0a34JRPDDMoKrNFHKAfaBIgcA/xAOx/jqU8i1Lpxpqoro9VkH4+l/TnXmzV+sb7h/UuoZ/oD7w/wADqeRH1UjH5eZf01NyGT6yT77fqOs4/q4/uL+kakPMNZ606df7+6E3N/LVYf8AetXc7HoD+t+F/vbP+Rtf+NcZ8oX9Ts3/AHVX/P1dY0vesPWan2oJkZYN+tZkcdlmv6ZpRsSfWU+JvmYu9QAlKOP4sM6US4MfcTmRSY2ZlxETXqW5SP7VSJCjyixl2MWU6MgyyyydP5IvFfLl2ygmQSJOSJDW7MHdUOA3ZaZVYeozEE76ljGdZTYiSKHPYsd2iEVfNMkD8GiAZBY8qsdtmj3Qy+Tuyk8lVW2ZcVE+yleA6EugjTQ7ttBrSbb9wQLW6vYLrq9sEkvWwp012BP2SWQZrtJ4eaxbIwjtOTxl5kq6wUImobYa4pmkqLqG1WtaOW/myx/TvPvkExmSWnUsZKzPkUeKhXgkrQPDO9VI7bSmrHKkYrnkHCFjMHAfVG+RjHQWATGtk8abdypjYYcdxtXppI7EwsV47DT1BEbbwSnyoE8Cw3geMsoVK97Ma2dTPp4wAUZ3+ouuNiHbYKK2JBNvNzoztdErTRxKqRSNqVRtoaLEsI+GvURejUTksdDxs41g1zcmbRGpi3tKcuJjMl0z1DYEnT96zj0x0tefEYaXEy1WmtiJxI7164nSWPkoUc+PElwCVIlp+ccZ1J0/Bv1HXr5F8hDYizOWrZKGwsNJpohGkU0zRSROvIuQpblsWbw2v2oqJet4Oo91aK+tvZ7cqMV7Qdn64pqygVObOWZVcTYQz6o3Rc+iKaY25lAADCyOpFaNClGlailityWmoFCxXlQDRuX0wfTnSVipi8LLYyFTIm1Pdxla1LJ2LaLH68i777SEMx3chVXkFHEz0aEmd6j6vr2srmoIKF/HGtDSyU9aJBLWZpF4DkoVu2BxUKo5MwAkKuuK8lsi05f0MOsTWlpWdOLfFq5tvfuslfTuzXw2U2G51lXFh0uui5MzlaoopdJntKdJHQBjuuxk/KXKVCSElGhSJibSGtUh666Os1KsFPzpiKGTs16qCKutqzWurKYIR6sUbCJCEXw5cmO7Ek1lue3J0B1dXt2prpxuWu42vPYbnYatVyFRYRPKfrpBu28hCkggcRxBOTnStuaw9vtpn0Wy1lWDQs41Dq2t4rR/T5bJfI4kzOVdOkBi/ZtHZSllXNTJsPmYmK0pccQlFvMLrlGqaVB6NSueo+9K6zqmnWw+Jj82Vq2Qgy9qzLe6heCKaRLKTy/6rrK4d8d2QCXY9uaywcKQI5FWx6WuWMzmpvOtm1j7OHq1Y6HTqzywwtWaCE+dJ2iKJkTKx9VWMkcAZCy+vGT2W+eZ69Q0401UV0eqyD8fS/pzrzZq/WN9w/qXUM/0B94f4HU8iPqpGPy8y/pqbkMn1kn32/UdZx/Vx/cX9I1IeYaz1Qe0GttZbe0RYGudyJnlZWtmJGZFKE0edzWJ4NIYpKyyxBhE7ElHGIxBd2FvEaIBQsmpwmkZ7MG5FjfxeSs4i/XyNMoLNVnaIyJ3EBeN4m5ISOXqu23j7dj9mtDJ42pl6NjHXkaSpZCLMiSNEzCOVJlAdCHX1413KkHbcbjfWtw/oV6ir2j7tPdtbwSGImIy2tZDnrca4lUXcWUBQUwmNa0lu5BI2kxIHCQaMkRAQpv6RQisYDkPSDrnLK/djpYKKYEss0eGprKjnx7iuUJD7+PI7+Pt31Qy9FYeaE15Jsy8LKFMT5zKPGUG3qGN7LIVIABBUjb+WssbL6bGn9na1VjqcurRTEagpB6j0ppdNXUslMKllVzGLZcxss0iE2aHUElJlhKh6eFy57dXB1VPTo6LnZ7y4uZ4leKqr1LmKuTtZdLQluXkkiutYhinitQy8e5DNA6GIxEIihEVAiKEj4oOOt+101hrWNq4l6napUXjlppWllryVZYuXCWKaN1kEg5uS7MzMzF2JfZhW9edKHXKCXPUGwrzYO0lx3HRjtJHKuJpfOyFjWyoY08qji6MPDInaJO4Hx5I0KULgcoNC2NDe4K15SI9xcVpbeiJI2LHVeRnpXMdHWxVKleSJbMFDG16gcwyrKjl41EpcMoA5OyheQVVLEmKDpfGw3qmSklyNy9S7nk097I2rJiEsbRSKsbydrZkZgfm9ydmJ3CkZS1JqnUlJ3RsjfcGSPxFg7VvcBkFtqHJ7OcWpW5VtH3CMxkbC2GFALZCi2tzVBWlEmGhVn5LOFkGQdmau5lrd6ljaE5jNfEx2I6gVArhbMiyy9xt/XJdRxJA2HhqyqYqlRt5C9WjZLOUkiluuZJHEjwIY4iqMxSMKrEbRhQ2+7bkDakzemprCdQ21OuA2yafy03IuOdXrdSbEuVYeV0+sRyirrJD467eTZMYGs1VDWTyNtIKOLSFFqABMFlQIWN4dTZQX8Vkg0HlOGpwUKR7I4LXrpKkYkTf5x9pn5MTuSR4eG2tN+nMVJj8jjGhk8kytuW7dQTyhpbE80c8rK/ItGryRr6sZVVG4QLv4SCzen1rpZ811vtFY2y2IW3qklamioLYr6UqorPkUWa28DZ9yZS7JyD001hLimAPDnGJOgcmtSFc8pwEkopDIErpHW6hyVWDJVFaGanlS726liJZoDKzFu/CpIME6k7rLEysCqEktHGUzsdP4yzZx114XS5i0EdS1DLJDOsQUL2ZXjK9+Lbf5qYOnrPsoEjhs3eUerrTjTVRXR6rIPx9L+nOvNmr9Y33D+pdQz/QH3h/gdWJHUihBH2JCrL8JUjZmtIpK74DPDUJ0RBJxffLEMsfcMAIPfLGMAuztAIQc4zmByC7keILMQf4EkjUiAhEB8CFUEfxAAOuZ5jrLTjTTjTTjTTjTTjTTjTTjTTjTTjTVc2cwu0hYUiJnSeWKSndOqMK8dMn7pAETgUIzvqjiC89hh5Qe7geR573bgOQhFnE9d1RyWOwKkb7E+O6n7Af2HUUqllAUbnkD7QPDY/t1//Z",
                        "transition":true
                     }
                  },
                  {
                     "nodes":[
                        {
                           "name":"HSBC_ChangeGiving",
                           "type":"subJourney"
                        }
                     ],
                     "title":"HSBC",
                     "type":"choice",
                     "visual":{
                        "imageData":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAQwAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAAAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3BhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAwADEANv/bAEMAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/bAEMBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAEcAXgMBEQACEQEDEQH/xAAcAAEAAgMAAwAAAAAAAAAAAAAACAoGBwkBBAv/xAAvEAABBAIDAAEDAQYHAAAAAAAFAwQGBwIIAAEJExIUFQoRFhhYmNYXODl4h7e4/8QAGwEBAAIDAQEAAAAAAAAAAAAAAAcIBQYJCgT/xAA/EQABBAIBBAACAgwPAQAAAAADAQIEBQAGBwgREhMJFBYhFRcYJTE4VliVl7XUJCYoMjM1NjdRdneFh7bWt//aAAwDAQACEQMRAD8Av8cYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYzVdoXrSNINxTy6LjquoWh7N6mDdWhYURgDczmN7ZdEcBS8rLiUiObDsiP6e4s8lu2vb9l0v0n90h8mNsbmop2Dfb2tbVsMrkC+xnRYLCqzx80G6SUSPVnmzyRqqrfNvft5J33XTONuReRzzYvHmg7rvkqtYEljG0zVb3aDwByfckck0NHAnEiskLHkel52jaX0G9au9T/HTf8f8Aof8Azsaj/wBSNN/3nzE/TjS/yv1f9P1P73khfctdTn5ufO/6oeQP/PY/j/0P/nY1H/qRpv8AvPj6caX+V+r/AKfqf3vH3LXU5+bnzv8Aqh5A/wDPZl0J2/1Lss6hF642i11sCTOfg+2jsJuytJWdcfdP2Qpt8AgFJn5BX7goSHDUPjb5fM/fsmaf1OHSCan1wdo1qzOkWt2KisJKtVyR4NtAlnVqK1quQIJBCK1HOa1VRvbu5qfhVO+u7RwTzfo9U+93ThvlXUKMZGhJc7Rx5t2v1QzOGUzRPsbaoiRGEcIBitG4yOUYSvRPEb1SRXM7kVY4xjjGOMY4xjjGOMZB3fffimPP2mXFnWe5/Nyo30QF1RU4t+g0ldoSpmgiooxY5qIu/wAJFQn3jF1N5w7YuxsVHPGaSTM3KTcTick0/dd1qNHqXWNk72yC+Y62tG9rZNjJa1FVg+6O9UcXkx0uW5jhxhuaiNLILGjHsf0xdMPIfVLyEHS9KB8hT1/y03dt2mximo9MpDlIxsqWjHh+fuLD0SQa7roJAZl1LAdzjQKevurqprceR9tyT073s3AM7ktRFqA7T1OOxUlX71u6RgsYgyVvVm9BQmCivvVXkVERZ4p0Wj5IeS6lTaVY5zxzInc9dvpO6gHjC1kcjbltRdraKyj2OsmjPgPa5IUaGlpXvDEhj81fHZHf2KErCJKbJT5xTumK469eOurQKfow6ZuBYPT/ACJ+l2+m851d3H22OUD9mu9kdoW5x7HYNjm/Ltj3Eq4jo6BY18qI6jLSP+jY6sWuDFVM5seqPlXYfnvYH7wx/svO9Y5uXWQrqyF0MFiEcfrYrO065snJkggzYS5k1SXzEGEm7MPOxLRcwHbjyTKSRmNR7yTxrP0ad7we2brswqtgWCoikA9UV6QLBWNRjJTGo5RFRrBTRMcYTRkZIjx7h9EvW5qnVXq32KtUgazzLrcAZNt1AZXDi20YajA7bdQbIKSRKoZJyDbPr3lkWGsTjjr7AsqJIqLm4gBrnrnbm1dtxelKTirmVTeUOO/oTx+tASBEIZpdFJRKCvxqIBIyFSVwXJlHGOXWPeaDJmi8KPWDB1o9DQ2my2kaop4zpMyS76k+togCaqeyTJJ2VAxwoqOIR3+LWMR5HsY60vLXLeh8IaJdci8jXYaTW6USeT18SzrOeVr/AJKlpYXmwllcWJGOHDhCVO6NLIkEjwo8qUC2nth54Vh5xeMGzAuCuezd1Gv4fCtk3TgjmOkRs+O2Qp54zYxpZNTt7GojHX3XakcFNXOLjpxh0ZJuHRhbNxhaDZNHgcfcT37a8jn3T3UJ5t0zuGUSSLYKkgkivavsix4xER0YbHo5r09z3OMquzhPwp1U7b1hfEG4iJt0MMXjKMLlmq1fjOT6rGji0thw/wAgRJpL6MYbod7c3cJ6hupUqO+O+OR1bFCKuYgX5r42ezbLYxrHdW9p5C1HX+zboCa4sgosi0Y3W2bp9JtgZpfP40GlpopYdYI5994ITzHH62/WEo+tsbynFXK4tnGGg2Aow7EJnjGku8Riuhsb3VzUTswdi1qK4wGo1h0RTx2onsCHQOv74fc/guZY8t8Q18uz4bnylPc0ovdMsOMpcoqI0JnuUkiZpxzEaKstTOJIqSPHVXJSOWFZWVgm1rQglIVfY9z2iewitZ1JBJdZlhydRgVKpxyDwQAQlErOqCwTEobI4CQQt+/zYhxpAo7xb9oMGTp0okgpOmcp8j9Zu+updOaiA98bIt1rGtTpJC6usMLbakQsAm1ew66FIylWZnqIhYmSn6GEoUmMbxTZOYoiRF/k8ezbMb02edtmM0Dth7N+ZWkFpL0nsxtdFIJaw4UNNyKDg4daVqG4QMMpinAdzY6dQwWeIVp+XYnQZUUhP1424IhTYc2zRWEFGL1djPT2V9q/LzUMzWwO/tuIbEndxVPGb0q56BiVoWbHp3UUzemR8Un0bldVQWbRciAkDgAVyFLpGPldtG6ZBJHtg8ZOXLGb3hnoxotYOrki3ViO1FNFdWYfionMbmyl7IbF4aVwyCpYRaYIlvsTUWnTpxJouyHV+fFDpsTISmLjhwB0+kgRu/YzUGoPsZ5ob4SCWxPVzbGET6VQcO1kUhjMhAWDUUhwjzt2iP6kAcLc8Pr0lJwTR+7HMipiMNTA0K7Lg2xdyxWOh8HzGU4/aWrtzoLuXKpNt+c7nWE57erUlY0cGPhFVF6sEPs8xURrsA6fl/3Gyg/5dJvLq9fGC8jEyIutKzsgnHU3H2VN6I8u1u2w9skyNpN862Z5rTzwDeKsJWieqjiwQOeX5JYftRsuC8pZAzlWUY8xJg7CZ6xPh17r09bL0+UtNwLWJrJtaSMzknUraZGn7tC3WdGa2bf7VaBiwPpKPZFgkLQbTGgQKmZVQWUddVa27XZeo67NP9Md/nJvH/bKZ/7Tq7m29O/9q7n/AC8X9pV2V7+Mp+L5xt/rJX/9J3XLY28di6wVnrDaRrcLACRokmDWj8lihpvgQeTl6/wzXDxGJCsXLN8Qmz96yweRlQS8HkQJAdjK8C4BuAcnxdmtyn65Xa7ZG2pAEpSBUEiMZqPfNe9FcKLFEjmPJMe9iPjqJ7CAeP5pCgaBxx8NOmzUuZ9x5n0qu4BdZxOTIdkO1p7yuK6LH1qPFc0VhfXs1QyI0XXI0aQ6PcsnR5US0iy1o3QLQtoGrm8df0/lr6EkoLZdea/xEvWl/rySQSGahbPkgiXWVMq4TPvcoM9AzEeCi7M9FomEejRBoGGAB8o/Jc3hQsPd9SAfIzcVcH2ekkhWEGjilr7tZBzzA2MgUqwlwEO/5J4ZQwxmHjRgvGIwQgF8vIVxCsf7xyD3/wDim6P1Pw9m0/a+U72BuHFgqiqqtdsdMqJ9Dp+v7c+rjpsse01+VZ3Uisu7yyjzJ1dZWFrPS0p2x4UGWBauVUV0zvdj/Sr2m/4Q/wDRtQ82zmf+7XZP9n/b9VlefhnfjucKf8kf/JN9z57UEjU0mU0isVrkOfPz0+fFi4cGirZ47khGRuniSYhsEQH9dvcyWT3tHtpk2/Yqmr1irjlh9H140drYthNsIcWqFINZGkCbCHE8kkrJRyOE4LmKjmPY5Ef7Uc1BI1SK5rWq5PVDu97qGs6hsl7v86mrtKrqecbZ5eweh1K2meBwZobEMlhAyo8oRFiLBcIzp7jthjAcp2Bffm2Qi+y0M8Et043t1MAk4vkZ5ybdozA0GS+RZHDugLEyECJGcTduGculwcX21HyaWjW7FgbLIuF0fzGeKsnO9FNYBeRqGsBskoEy6HGa2dIjs8WOJ3Xxa53fxKZg/BhzsaMZiteRg2tcnfxk86WvFd3yzu9pwpQ2ut8ZTLo5dWqLiQh5QIitYhiAGrELArpMtDyaurknmy62vLHhyZhzCcra1HoPVW/wn9L7UM2sLb+kJlq641N86n4ihQWpb+IWONiRd/r71XMddXmpfkhakSkKUdx7M/IOqwZ4TLEM+wTEx38vjkPz2RNkldxp3V9E7z+u9y6ieieuFDW2Ri1Yt9+fN/1HpeKL0TtylFqmmgSOsKvmsiPirYlkCmlXHnTtnX1Xg5HhKDtlAh52QtITPoJFQTGQ7qbbZaxfRXyn2gDSrT/xr7mvjPLsR7K5KyBoazQ1q22v2RizdpXtfGbZ1gFhI/dLUZjbFVt+ps7+yismZfHnP088pK/YyOzic18a0fmTuzQxy+NbqD/VFwS5PRfbiMgmk61m2sryaPpmEsW4YXFawjCcah9SFQTeDsyVTCXE7juL+2qkWis0kCljRwEHYy1PtVuF4C7KXnForaMOov0TvEPUeUhFPte9cim/JyG1G3lijPBqYl1CQq1WkXDNpUe+6xjhQu1WGuJQPLLDWaMuFOy7Gdj9ptWaZ3HpqSUbeca6PxE91g9HEWeaDOUwmUs0HKIWcwY2s2edgZaC+8c4s3nbZ2PIj3hOOSMYcihw8BKYLY9cqdrqZFNcx0PFP2ex7Va2REkta5AzIZla70Sg+bvB/i5j2OIA4zRjGCSVuFuaeQeAOQafknjW5Wqv6tXR5MY7SHpthppBAksdb2SuYYCWdFZoAKyI3uBJiygQ7aqmV13W1lnDq9aU03n4e7mbOyjbmQpp01jrHJndOWmEG5Yo3yljalYdjIpBQK73PPq2eu8kGkorlwUUWiCueckIm1qyUG2GSrpqNQvDu17FK2g6fYj6PSHVNkEf1XX3yr1HEhgV6/fT8DZEBxFWN9ch5lr/ABnP7P8AURyInxJOnzhqh4KqnLyN9uSmFyBpVjLRXcaL9CdzSbsGxWY46IuifzzVG1ihNS6Twpotc3cPfq4OJXoV6GXF6EW+rOZ2spGq7jar5jU1SD36rqPwIC5Uw+tddXtNtgemZtNBstK5a4aIOCbhFBiwaiY6MCgxkPb1vVtvNqsyaqx4EdXsrKsb1cCCByp3VV7NQ8syNasmU5rXEcjWMaKOMIR9H+lPpS4/6VNCZrWsDZcbXbsjSd53uXFYG12izCx3iMbPMzqzXq5xTDo6IRyihCIWTKNOtpljZTIcVvZM7p+dxazqxlReEz6FF25yLygE57akhJJt9WPSieXeOaLhs4QUWZkB7xJwOKDnLsaSaux7ty2V1SvsJtVNjWNdJLDnQytNGkhd4kERvdO6fhRzXNVWEG9HDKNzxka8b3NWwO36hrG/azd6budJA2PV9igFrbqlsw+6HOiG7KrHoitIIwiNHIiS45BS4UsIJkM4JQAmZa2sX0qZeo3lHf1FNo99vuvh/gCHd1JG2yq+dqqqbIU4zwmNXD+81XLtk5WzwUkUd+Rd7D11M1HKzgBmzMLWal779szja6ogxv44r9hBOqwJ/WPa+qkdNr0c7+hREUksb3fwFEc8r/lkadeGuv8ASUnQ71scZcr2Fz/JtZ9s+cHfLZ/d2l+XE2/OFrO3ECPu6xe9zYmvTI4FXaSOBDgxku3vrE6PeSXkbENE4q0te1mwiYbWSoR2mUMJ/CRC1EIJIdYu4VBnPfWSS5hwipk0l8zb/sUJ9drAgaiUd+9cSKRONOMoWkQ0mTEFM2OUJElzETyHCG9EV0GArkRWjReyHkdmklOTuqMEjBNpp1wdcuz9Umxv1zXXT9b4WoJ7ia/rhH+mdsssCvGLaNsYF7hkmParnVdQhDQ6MBFax0iwJKnG7MSmLRicxmRQqaxwDMIbLwZaMSyJSkQPkEZlEaPMFxZyPSICWbuxRoGZGOnQ4sJJNHLAiwcrs3jdZusonlK2c/8AMCklA0TM6mZUJMKVqSV0WNDRmOjqXklcQ47Uw+PwrIbnDQTKuSgZ1D2oaJZhhGUZGIBk2QHIUNyFINO2LXtJjMJuLTfUPYeUgpxsBqrrfec1i7BAVGZhcVHVjZspjots/cFGw0FIJrFzZYQwbk3ToigzHu27dJ+5cPE08XCyimTGebe051E2CPC5Vfeq+uF3SgIDbxgLJLeo+srKPCI21eviTWPCzEzjBogwBtiJMk/biWjhJgi9IPnSbfFd24UUYzaQmqqvAV1jT4Kt4CFqTGPP4jjVomHx4dXWMTKN3LUnGMYQzHIxnqPEWr142fhehnQ143duUXDZRNdXHNjMAo/VPV3WTCRJ62620Hr2nL8x6ssTo+nq8qfCUKCenfQpSRYwKOgMTeYzp+/6H5kunOTLp676bdpdOVvrYzfnGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjHGMcYxxjP/9k=",
                        "transition":true
                     }
                  },
                  {
                     "nodes":[
                        {
                           "name":"Lloyds_ChangeGiving",
                           "type":"subJourney"
                        }
                     ],
                     "title":"Lloyds",
                     "type":"choice",
                     "visual":{
                        "imageData":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAABHCAYAAACOC/A9AAAAAXNSR0IArs4c6QAACg1JREFUeNrtmndQFUkex3X3dK/ubquuLtTV1d39ccGAIMpKMICiBEGSiBJNZ0B5jweCoCiKrsASVtwlGEqRULuIAicFomsCDLiigui6qICrJ8iKgBhIj/i7/vV7M/UioAcKvv5SXUx3z/TM+/Svf/3rnhk1iomJiYmJiYmJiYmJiYmJiYlp2Ag+APX09Iy4Zx7x4O/duwcxMXvgZmkpA/8u1dnZCUKhCAynGYDlPDPYsjmIgX8XOnXyFFy9WgwT/zWOJq1x42HlylXD3v2MaPC9vb3w44/lcDgxmYd+6OAhMNI3gJjde2BvQgIDPxTKysiE4uLrFDhn8Zjy8wtBX+8ziAgPZ+CHwtozMrJgis5kOeiYFjkshKjIKHBzcaPnMfCDqPDQcEhN/UYJOqZpU6ZCTk4ePY6KjB6W/n7Ego+L3wfTDY1g2lQ9aG1theSkJB684Wf6kJws6RTzufOYxQ+mzp/PBwd7B6h7+pTm7W3tePDOTs4QERFNff+ZM2cY+KFSc3MzGJBIhgMfFhYJXl5Cemw8Y+aw9PPvDbxYLIZbZWXQ0tLyf7dlZjoX9IhfR9AzjWZAcHAIKZsHJjNnsahGVqGf74LLRd9DfX0D3LhxE8JCw966reVLl4GZmQWFrjNRC7aH7AShtw9MGj8BtEm+IL+AgUehlRcX34C9+w6Ar68frF27HqK/jIGUpOQ3aqepqQnmEUt3WuwMOlqTeLci8tkAHh7LaF5vsi6NaDo6OugEXFNTM2zczjsHH7AxAHbuDKUTH1ol55cnjZ8Iad9+S8+pqKgARxKLL3J0AqdFi8GOTJzeAgHExcZC5BdfgKW5Bbi5eYDnOi9Y9e/VSuHkHJM5YGW1gB6bks7BLQSBwBuCgoIhMDAInj9/rnngVyxfASazTHhIjvb2dHOLy6P1+vkHkHAwFe7evU9TYeElSEn5BiIiv4TgbSGwZcs2CNoSDJ6e61XG8ZgMpunDpAkT+byeri5sDgikHW5iMhu6u7s1z+J1tXUojKJLl+nQT01Oga6uLhB6eYEXscyystvE95fCibzvYB1xRdMNjGCqji51JevXC2D1Gk9wJRavpztFLXhJGg9TyL1O5Z2UewZb6wUwl4wEjQJfV1cH2lJLnC0TdWCUY21tA0lJqXAkPRMWExejCqaNrT1YWMyHWeTavqFLRxRxV/5kBMXF7wVf4v/5SIiMMlwHaFRU8/WePTwYF2dXavWFBQXg4OAIUdExdHdxIFDfJOF8gm7mSlERfQaccE1nm4I56QCNiuNP5OTyUHx9fOHY0aPELxuA9XzrQQVut2ABiNvF9J4ibxGJ86fLLby0J2iBH7m/Rq1c/Tb4UTjo868VFw8qcH2yh1NJoiPFHc1pZLsYgaNwgp1hOB327ztIXZ1GgM/MzKSv7BDSRtIBjY2NYNiHi8FJUjb8VEzmc+dCVVUVjdc5sOom9+UeS+XKusnErhEWX/34MXi4LwULsnNYWlIi2W0kMXpf4NEnc8JFEcJtIanrDaE9ePAAppKFVWNDg+ZtGSDEySReb5D+eLTUHWRRpQ66r0g0qPe3sbKG6aSTNXp38kRuLmRn55CvBPR50PY2tnK+ejCFfh5DTDsbO80Gv9E/kL7MsDQzh7vl5RTMHBLmIfR1a9YOyd6KteV82BQYpNngBQIhXVBxyiVhJq5IPVzdhvS+DZro42Xltd4LrC0s+XxbWxvdZzE1NoEPWe8dvLubO4iI1cvq4cOH1NVUVVYy8EMlXLInxMUrlR8+lAhaJG4fiR+kjgjwRuRLgfS0NJV19ra2SosdBn6QZDbPHHZs266yDj9Ixdd35STaYeAHWd5k4wp3Ddvb21XWr1i+8oP098Pi8w7jWcZ0QVNbW6uy3mq+FSxxWkJfmDDwg6j4+ARwd3GFpMRElfWZmVngTuJ6kVDIwDMx8Aw8EwM/ssCnXTsPObeKVJ54rKQQjpD6vnS/rhp25qXCjhMpcPfpY768sfklbbvwfpnSNRcqbtG6+tcvoOS/9+kxpoySC7Q9dSqsKIMQcp/DV05BU+trtedlll7g28RUQJ6hR82O58k7xXD0hvInfy9bm+m16dfz5crbOztoeU1TPc2fLb9B87Lq6Ork760W/CiBGfwzRPVK8VN/W/hYaKGyrq1TDL/eYEOvl02/2rAA2jrE0Ctt+2Nv5et/4W1J63rJn09GglIbmPZdzOHPR8ijheZK53Sr2Vr4faCjyjYfNvwsdx5uP3N1ih35w5Of+LoCGeP5+eVzWpZddlkSFsf40jwn7OBPfKxpWcWzmsEH/4mPFQ+op7eHQog8fYSW/ZLcGCVIj6X50+XX+evO3S2hZZ5pe2ieA4/W/4JYWfatyzBGNJ+WpV2XWIxu2Fqav1P7ULK67e6Cogd31Fo8gsfO5fSMtI3X60d6yYe0hdk8XJu9W9WCl22rP/C/C1hI82XVVX27mrcBj0MTr0sgD66onXkp/IP1SC1qLAGp2GHYWbLg27tk3q+SutEyo+UvW5zpOS3i9gH5UkXw3O+0iAuUK8Pn+tPmxWC7b6v0mXqVwEefPUr/b8tN6hf837d70OPLVT/07+PfBrxhlFDtUEdrxDrTr/zlrMo/az9sOn6QHn+Vn8Wfrwo8yjw2QFJOfOr5e6W89f05aAlk3bzYL/jRAnOwig8Cy7hNtLN/42cDYuJ7Od2srqTt5d6+Ak+lMHefy1AC//h5Hfx2owM97iC/TR14IymTPDJnDGhyfRvweL7s8JLzmyCxct3wtXzZH2R8Lg5FWakDvyw5gpa/bm+l+ScvGkB71yq+nTEiSzLPdPTp48eKrKhV07mG/I6Llbf5czjr5ITz1RiZkSkLvqr+CT023u2rFvynfrb0/6PGp0MH3iUxlF7XQCIXRdUSQFjnlf41X/aKwOOAvWxrHhD4P25aJJmAVUQjaJlYZxApGLCrmSTtNNRr6fOgJe8+dwxiC/4D2qGS+muP7imBRxlECWj++5/KVYLv6unmg4a6V01DA7666Rm97h8qrvvrVhda19jySq4crUkRhjrwh698Jxm+0d40/6hB2YqwHv3zQMHb79/Gzy1LDn1Oj7n5hptA8f/fgl1VgkeXx400dT6+WdxG56bRKgxMJXi8KULkEuefETwHmEvjdiyndW5JYfy1Lom76I/ByRDLvI8pv13qD7xu2BrQCV3NwxhL/uMc0k0siXNReC7OE5zPlQ05FcF/RAzmYNFJkvJg4YEQej6WcyEkhr2KmhruKR2VLUrgUb4Ze/mOUhfV1Lyop/mPSPjb2iHuG7xiyrp5SQreTqkOgXNKuXqatwDOgo5LH+hNwXMJO48LNTlFkDCV89Xcj4o+e6zPyVW2TVwDYESDUcv+S7m0LLbguNJ1HGyHA9tVgkdhh/YFHlXyuII3yg6Zr97YlsH72jJgYmJiYmJiYmJiYmJiGpj+Bx8ec/BP0+EgAAAAAElFTkSuQmCC",
                        "transition":true
                     }
                  }
               ],
               "title":"Change Giving Lite",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "name":"Item31351",
                     "type":"subJourney"
                  }
               ],
               "title":"Cheque Envelope Deposit",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "name":"Item35383",
                     "type":"subJourney"
                  }
               ],
               "title":"Danske Cheque Deposit",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "params":[
                        
                     ],
                     "title":"Chip \u0026 PIN",
                     "type":"info",
                     "visual":{
                        "view":"list"
                     }
                  },
                  {
                     "nodes":[
                        {
                           "name":"OnlineCashWithdrawal",
                           "type":"subJourney"
                        }
                     ],
                     "title":"Cash Withdrawal",
                     "type":"choice",
                     "visual":{
                        "transition":true
                     }
                  },
                  {
                     "nodes":[
                        {
                           "name":"OnlineBalanceEnquiry",
                           "type":"subJourney"
                        }
                     ],
                     "title":"Balance Enquiry",
                     "type":"choice",
                     "visual":{
                        "transition":true
                     }
                  },
                  {
                     "nodes":[
                        {
                           "name":"OnlineChangePin",
                           "type":"subJourney"
                        }
                     ],
                     "title":"Change PIN",
                     "type":"choice",
                     "visual":{
                        "transition":true
                     }
                  },
                  {
                     "nodes":[
                        {
                           "name":"OnlineCashDeposit",
                           "type":"subJourney"
                        }
                     ],
                     "title":"Cash Deposit",
                     "type":"choice",
                     "visual":{
                        "transition":true
                     }
                  },
                  {
                     "nodes":[
                        {
                           "type":"abort"
                        }
                     ],
                     "title":"POca Withdrawal Correction",
                     "type":"choice",
                     "visual":{
                        "transition":true
                     }
                  }
               ],
               "title":"Chip \u0026 PIN",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "type":"abort"
                  }
               ],
               "title":"Manual Entry",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "type":"abort"
                  }
               ],
               "title":"Indemnity Check",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "params":[
                  
               ],
               "title":"\nTimeSaver",
               "type":"info",
               "visual":{
                  "view":"list"
               }
            },
            {
               "nodes":[
                  {
                     "type":"abort"
                  }
               ],
               "title":"TimeSaver Pouch Discrepancy",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            }
         ],
         "title":"Banking",
         "type":"choice",
         "visual":{
            "transition":true
         }
      },
      {
         "nodes":[
            {
               "type":"abort"
            }
         ],
         "title":"Stamps",
         "type":"choice",
         "visual":{
            "transition":true
         }
      },
      {
         "nodes":[
            {
               "type":"abort"
            }
         ],
         "title":"Travel",
         "type":"choice",
         "visual":{
            "transition":true
         }
      },
      {
         "nodes":[
            {
               "type":"abort"
            }
         ],
         "title":"Licenses",
         "type":"choice",
         "visual":{
            "transition":true
         }
      },
      {
         "nodes":[
            {
               "type":"abort"
            }
         ],
         "title":"Services",
         "type":"choice",
         "visual":{
            "transition":true
         }
      },
      {
         "nodes":[
            {
               "description":"Enter barcode value",
               "enablers":[
                  {
                     "action":"tokenise",
                     "id":"tokeniser",
                     "loadingMessage":"Please wait...",
                     "name":"tokeniser",
                     "params":{
                        "barcode":"{{ inputData.barcode }}",
                        "shouldGetItems":1
                     },
                     "stepEvent":"onChange"
                  }
               ],
               "inputValidation":[
                  {
                     "field":"enablers.tokeniser.Rref",
                     "uniqueness":{
                        "message":"This item is already in the basket",
                        "selector":"{{ basketData[*].id }}"
                     }
                  }
               ],
               "nodes":[
                  {
                     "comparison":"in",
                     "expected":"{{ appData.basket.items[*].basket.id }}",
                     "given":"{{ outputData.barcodeInfo.Rref }}",
                     "nodes":[
                        {
                           "title":"This barcode has already been added to the basket, Please check and try again",
                           "type":"info"
                        },
                        {
                           "nodes":[
                              {
                                 "returnTo":"inputBarcode",
                                 "type":"abort"
                              }
                           ],
                           "title":"Scan another item",
                           "type":"choice",
                           "visual":{
                              "transition":true
                           }
                        }
                     ],
                     "type":"condition"
                  },
                  {
                     "comparison":"eq",
                     "expected":"1",
                     "given":"1",
                     "nodes":[
                        {
                           "name":"BillPay",
                           "type":"subJourney"
                        }
                     ],
                     "outputData":{
                        "basketID":"{{ outputData.barcodeInfo.UPUTrackingNumber }}"
                     },
                     "type":"condition"
                  }
               ],
               "outputData":{
                  "ClientAccName":"{{inputData.enablers.tokeniser.ClientAccName}}",
                  "CuR":"{{inputData.enablers.tokeniser.CuR}}",
                  "Rref":"{{inputData.enablers.tokeniser.Rref}}",
                  "TokenName":"{{inputData.enablers.tokeniser.TokenName}}",
                  "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
                  "issuerSchemeId":"{{inputData.enablers.tokeniser.issuerSchemeId}}",
                  "maximumValue":"{{inputData.enablers.tokeniser.maximumValue}}",
                  "minimumValue":"{{inputData.enablers.tokeniser.minimumValue}}"
               },
               "title":"Input barcode",
               "type":"barcode",
               "visual":{
                  "transition":true
               }
            }
         ],
         "title":"Bill Payment",
         "type":"choice",
         "visual":{
            "transition":true
         }
      },
      {
         "nodes":[
            {
               "type":"abort"
            }
         ],
         "title":"Others",
         "type":"choice",
         "visual":{
            "transition":true
         }
      },
      {
         "nodes":[
            {
               "params":[
                  
               ],
               "title":"Chip \u0026 PIN",
               "type":"info",
               "visual":{
                  "view":"list"
               }
            },
            {
               "nodes":[
                  {
                     "name":"OnlineCashWithdrawal",
                     "type":"subJourney"
                  }
               ],
               "title":"Cash Withdrawal",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "name":"OnlineBalanceEnquiry",
                     "type":"subJourney"
                  }
               ],
               "title":"Balance Enquiry",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "name":"OnlineChangePin",
                     "type":"subJourney"
                  }
               ],
               "title":"Change PIN",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "name":"OnlineCashDeposit",
                     "type":"subJourney"
                  }
               ],
               "title":"Cash Deposit",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            },
            {
               "nodes":[
                  {
                     "type":"abort"
                  }
               ],
               "title":"POca Withdrawal Correction",
               "type":"choice",
               "visual":{
                  "transition":true
               }
            }
         ],
         "title":"Chip \u0026 PIN",
         "type":"choice",
         "visual":{
            "transition":true
         }
      }
   ],
   "subJourneys":{
      "AlliedIrishBankManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"9826935101491",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               },
               {
                  "action":"getProduct",
                  "id":"product",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "ProdNo":"42836"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.longName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"{{ outputData.permittedTranCodes }}",
                                                               "message":"Tran code must be one of the following: 77, 74, 78, 84, 85, 86 or 98."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "description":"Enter",
                                                            "inputMask":"alphanumeric",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "required":{
                                                                     "message":"Serial number is required."
                                                                  }
                                                               },
                                                               {
                                                                  "field":"inputValue",
                                                                  "format":{
                                                                     "match":"^[0-9]{6,6}$",
                                                                     "message":"Serial Number must be 6 digits in length."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "description":"0.00",
                                                                  "inputMask":"currency",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "numericality":{
                                                                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"0.00",
                                                                        "inputMask":"currency",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"Amount is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"The amounts entered mismatch. Please re-key.",
                                                                                 "value":"{{ outputData.inputAmount }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "actions":[
                                                                                 {
                                                                                    "title":"Re-enter",
                                                                                    "value":"reenter",
                                                                                    "visual":{
                                                                                       "view":"secondary"
                                                                                    }
                                                                                 },
                                                                                 {
                                                                                    "title":"Confirm",
                                                                                    "value":"confirm",
                                                                                    "visual":{
                                                                                       "view":"primary"
                                                                                    }
                                                                                 }
                                                                              ],
                                                                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                                              "nodes":[
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"reenter",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "numberOfSteps":4,
                                                                                          "type":"undo"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 },
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"confirm",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                                                          "type":"subJourney"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 }
                                                                              ],
                                                                              "outputData":{
                                                                                 "actions.inputGroup":"{{ inputData.action }}"
                                                                              },
                                                                              "title":"Confirm Deposit amount",
                                                                              "type":"prompt",
                                                                              "visual":{
                                                                                 "actionAlignment":"left",
                                                                                 "transition":false
                                                                              }
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter Amount",
                                                                        "type":"input",
                                                                        "unit":{
                                                                           "position":"left",
                                                                           "type":"text",
                                                                           "value":"£"
                                                                        }
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "inputAmount":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"Amount",
                                                                  "type":"input",
                                                                  "unit":{
                                                                     "position":"left",
                                                                     "type":"text",
                                                                     "value":"£"
                                                                  }
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "serialNo":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Serial Number",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "barcodeInfo.ProdNo":"{{ inputData.enablers.product.itemID }}",
               "barcodeInfo.itemID":"{{ inputData.enablers.product.itemID }}",
               "barcodeInfo.itemName":"{{ inputData.enablers.product.itemName }}",
               "barcodeInfo.longName":"{{ inputData.enablers.product.longName }}",
               "barcodeInfo.maximumValue":"{{ inputData.enablers.product.maximumValue }}",
               "barcodeInfo.mediumName":"{{ inputData.enablers.product.mediumName }}",
               "barcodeInfo.minimumValue":"{{ inputData.enablers.product.minimumValue }}",
               "barcodeInfo.shortName":"{{ inputData.enablers.product.shortName }}",
               "expectedBankNames":"ALLIED IRISH BANK|Allied Irish Bank|allied irish bank",
               "permittedTranCodes":"74|77|78|84|85|86|98"
            },
            "type":"condition"
         }
      ],
      "BankOfIrelandManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149011",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "description":"Enter",
                                                            "inputMask":"alphanumeric",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "required":{
                                                                     "message":"Serial number is required."
                                                                  }
                                                               },
                                                               {
                                                                  "field":"inputValue",
                                                                  "format":{
                                                                     "match":"^[0-9]{6,6}$",
                                                                     "message":"Serial Number must be 6 digits in length."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "description":"0.00",
                                                                  "inputMask":"currency",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "numericality":{
                                                                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"0.00",
                                                                        "inputMask":"currency",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"Amount is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"The amounts entered mismatch. Please re-key.",
                                                                                 "value":"{{ outputData.inputAmount }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "actions":[
                                                                                 {
                                                                                    "title":"Re-enter",
                                                                                    "value":"reenter",
                                                                                    "visual":{
                                                                                       "view":"secondary"
                                                                                    }
                                                                                 },
                                                                                 {
                                                                                    "title":"Confirm",
                                                                                    "value":"confirm",
                                                                                    "visual":{
                                                                                       "view":"primary"
                                                                                    }
                                                                                 }
                                                                              ],
                                                                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                                              "nodes":[
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"reenter",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "numberOfSteps":4,
                                                                                          "type":"undo"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 },
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"confirm",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                                                          "type":"subJourney"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 }
                                                                              ],
                                                                              "outputData":{
                                                                                 "actions.inputGroup":"{{ inputData.action }}"
                                                                              },
                                                                              "title":"Confirm Deposit amount",
                                                                              "type":"prompt",
                                                                              "visual":{
                                                                                 "actionAlignment":"left",
                                                                                 "transition":false
                                                                              }
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter Amount",
                                                                        "type":"input",
                                                                        "unit":{
                                                                           "position":"left",
                                                                           "type":"text",
                                                                           "value":"£"
                                                                        }
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "inputAmount":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"Amount",
                                                                  "type":"input",
                                                                  "unit":{
                                                                     "position":"left",
                                                                     "type":"text",
                                                                     "value":"£"
                                                                  }
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "serialNo":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Serial Number",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "expectedBankNames":"Bank of Ireland|BANK OF IRELAND"
            },
            "type":"condition"
         }
      ],
      "BankOfScotlandManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149007",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^(120103|120104|120132|120133|120154|120157|120158|120159|120565|120577|120594|120881|120883|120895|120919|120925|120926|120949|120961|120969|121101|121103|121257|121268|121282|121283|121285|121286|121287|121311|121355|121630|121639|121735|121740|121750|121805|121868|121946|122012|122014|122023|122024|122026|122029|122137|122139|122153|122154|122181|122182|122183|122184|122186|122187|122189|122191|122192|122194|122207|122208|122210|122227|122230|122231|122233|122236|122237|122238|122241|122242|122245|122246|122248|122250|122253|122254|122255|122256|122261|122262|122264|122265|122267|122269|122276|122283|122284|122291|122311|122399|122441|122443|122444|122445|122446|122450|122453|122454|122455|122456|122457|122458|122459|122471|122472|122481|122482|122491|122492|122493|122494|122496|122497|122606|122608|122609|122610|122611|122711|122712|122713|122714|122715|122717|122718|122720|122721|122723|122724|122725|122726|122727|122728|122729|122730|122731|122732|122733|122734|122735|122736|122737|122738|122739|122740|122741|122742|122743|122745|122746|122747|122748|122749|122750|122751|122752|122753|122754|122755|122756|122757|122758|122759|122760|122761|122762|122763|122764|122765|122766|122767|122768|122771|122772|122773|122774|122775|122776|122777|122778|122779|122780|122782|122783|122784|122785|122786|122787|122788|122789|122790|123492|123493|123494|123495|123496|123497|123498|123499|123500|123509|123510|123529|123547|123549|123555|123614|123615|123616|124057|124058|124059|124061|124062|124063|124097|124098|124099|124101|124102|124103|124104|124105|124106|124107|124108|124109|124111|124112|124113|124114|124115|124116|124117|124118|124542|124797|124814|124914|124915|124926|124931|124932|124933|124934|124935|124936|124937|124938|124939|124945|124951|124956|124961|124965|124968|124969|124970|124974|125001|125002|125003|125004|125005|125006|125007|125008|125009|125010|125011|125012|125013|125014|125015|125016|125017|125018|125019|125020|125021|125022|125023|125024|125025|125026|125027|125028|125029|125030|125031|125032|125033|125034|125035|125036|125037|125038|125039|125040|125041|125042|125043|125044|125045|125046|125047|125048|125049|125050|125051|125052|125053|125054|125055|125056|125057|125058|125059|125060|125549|125550|125660|125661|800214|800219|800222|800224|800227|800228|800229|800232|800233|800234|800238|800254|800255|800260|800271|800273|800277|800278|800283|800285|800287|800288|800510|800511|800514|800516|800517|800519|800521|800522|800525|800526|800527|800528|800530|800532|800537|800540|800551|800552|800554|800556|800557|800560|800561|800562|800563|800564|800568|800580|800581|800582|800583|800584|800587|800591|800593|800611|800614|800618|800619|800620|800621|800624|800626|800629|800633|800635|800636|800641|800647|800655|800657|800660|800664|800666|800671|800674|800676|800677|800681|800683|800684|800686|800687|800688|800691|800695|800696|800712|800714|800715|800717|800724|800734|800736|800743|800746|800748|800752|800753|800755|800760|800761|800765|800767|800773|800774|800775|800776|800778|800785|800809|800816|800821|800822|800823|800824|800825|800831|800833|800841|800842|800845|800853|800863|800864|800866|800871|800877|800880|800882|800884|800885|800886|800888|800891|800892|800894|800898|800911|800915|800917|800922|800929|800932|800933|800938|800939|800941|800943|800947|800948|800951|800955|800958|800968|800972|800973|800975|800982|800983|800986|800988|800992|800993|800996|801100|801105|801110|801114|801120|801130|801135|801145|801155|801158|801160|801163|801168|801171|801174|801177|801178|801180|801193|801194|801206|801208|801215|801235|801239|801248|801262|801266|801271|801275|801279|801280|801288|801297|801302|801313|801315|801328|801346|801351|801353|801357|801370|801371|801395|801426|801439|801462|801497|801506|801515|801528|801551|801559|801582|801586|801595|801622|801648|801653|801657|801679|801684|801702|801706|801711|801728|801733|801737|801742|801759|801768|801786|801791|801795|801799|801826|801831|801844|801853|801862|801866|801871|801893|801902|801933|801942|801990|801992|801993|802000|802001|802003|802004|802007|802008|802009|802011|802013|802015|802016|802017|802019|802021|802032|802036|802037|802041|802060|802066|802067|802068|802069|802070|802071|802072|802073|802074|802075|802089|802178|802179|802202|802204|802260|802278|802282|802290|802442|802461|802462|802463|802465|802468|802476|802477|802479|802488|802602|802603|802620|802621|802622|802623|802624|802625|802626|802627|802628|802629|802630|802631|802633|802634|802636|802638|802640|802641|802642|802643|802644|802645|802646|802647|802648|802649|802650|802651|802652|802653|802654|802655|802656|802657|802658|802659|802660|802661|802662|802663|802664|802665|802666|802670|802671|802680|802681|802682|802683|802684|802685|802686|802687|802688|802689|802690|802691|802692|802693|802694|802695|802696|802697|802698|802699|802702|802706|802921|802922|802923|802924|802925|802926|802927|802928|802929|802930|802931|803120|803150|803556|803557|803558|803559|803563|803564|803566|803567|803568|803569|803570|803571|803572|803573|803574|803575|803577|803578|803579|803581|803582|803583|803584|803585|803617|803618|803619|803633|803637|803638|803639|803646|803647|803648|803653|803654|803656|803657|803658|803659|803660|803661|803662|803663|803664|803665|803666|803667|803668|803669|803670|803671|803672|803673|803674|803675|803676|803677|803678|803679|803680|803681|803682|803683|803684|803685|803686|803687|803694|803695|803696|803697|803698|803699|803701|803702|803703|803720|803731|803734|803735|803736|803737|803738|803739|803740|803741|803742|803743|803744|803745|803746|803747|803748|803749|803750|804121|804255|804256|804257|804258|804259|804261|804262|804263|804264|804265|804266|804267|804268|804269|804271|804272|804273|804274|804275|804276|804277|804278|804288|804355|804502|804504|804505|804506|804507|804508|804509|804511|804512|804513|804514|804515|804516|804517|804518|804519|804521|804522|804523|804524|804525|804526|804527|804528|804529|804531|804532|804533|804534|804535|804536|804537|804538|804539|804540|804541|804544|804545|804547|804548|804549|804551|804552|804553|804554|804555|804556|804557|804560|804561|804562|804563|804564|804565|804566|804567|804568|804571|804572|804573|804576|804577|804578|804579|804581|804583|804584|804585|804586|804587|804588|804589|804591|804592|804594|804595|804596|804597|804598|804599|804601|804602|804603|804604|804605|804606|804607|804608|804609|804611|804613|804614|804615|804616|804617|804618|804619|804622|804623|804624|804625|804626|804627|804628|804629|804631|804632|804633|804634|804635|804636|804637|804638|804642|804643|804644|804645|804646|804647|804648|804649|804651|804652|804653|804655|804656|804657|804658|804659|804661|804662|804663|804664|804665|804666|804667|804669|804671|804672|804673|804674|804676|804677|804678|804679|804681|804682|804683|804684|804686|804687|804688|804689|804690|804691|804692|804694|804695|804696|804697|804699|804700|804701|804703|804704|804705|804706|804708|804709|804711|804712|804713|804714|804715|804716|804717|804718|804719|804721|804722|804723|804724|804725|804726|804727|804728|804732|804733|804734|804735|804736|804737|804738|804741|804742|804743|804745|804746|804747|804748|804750|804752|804755|804756|804757|804758|804759|804760|804761|804764|804765|804766|804767|804768|804770|804771|804772|804773|804774|804775|804776|804777|804778|804779|804780|804782|804783|804784|804785|804787|804789|804790|804791|804792|804793|804794|804795|804796|804797|804799|804801|804802|804804|804805|804806|804807|804808|804809|804810|804811|804812|804813|804815|804816|804817|804818|804819|804822|804824|804826|804827|804828|804829|804831|804832|804833|804834|804835|804836|804837|804838|804839|804840|804842|804843|804844|804845|804847|804848|804849|804851|804853|804855|804856|804858|804859|804860|804861|804862|804863|804864|804865|804866|804867|804868|804870|804871|804872|804873|804874|804875|804877|804879|804880|804881|804882|804884|804885|804886|804887|804888|804889|804891|804892|804897|804920|804927|804928|804929|804930|804941|804943|804944|804955|804957|804960|804962|804963|804964|804966|804967|804971|804972|804973|804975|804976|804977|804978|804979|804988|805001|805002|805003|805004|805005|805006|805007|805008|805009|805010|805011|805012|805013|805014|805015|805016|805017|805018|805019|805020|805021|805022|805023|805024|805025|805026|805027|805028|805029|805030|805031|805032|805033|805034|805035|805036|805037|805038|805039|805040|805041|805042|805043|805044|805045|805046|805047|805048|805049|805050|805051|805052|805053|805054|805055|805056|805057|805058|805059|805060|805061|805062|805063|805064|805065|805066|805067|805068|805069|805070|805071|805072|805073|805074|805075|805076|805077|805078|805079|805080|805081|805082|805083|805084|805085|805086|805087|805088|805089|805090|805091|805092|805093|805094|805095|805096|805097|805098|805099|805101|805102|805103|805104|805105|805106|805107|805108|805109|805110|805111|805112|805113|805114|805115|805116|805117|805118|805119|805120|805121|805122|805123|805124|805125|805126|805127|805128|805129|805130|805131|805132|805133|805134|805135|805136|805137|805138|805139|805140|805141|805142|805143|805144|805145|805146|805147|805148|805149|805150|805151|805152|805153|805154|805155|805156|805157|805158|805159|805160|805161|805162|805163|805164|805165|805166|805167|805168|805169|805171|805172|805173|805174|805175|805176|805177|805178|805179|805180|805181|805182|805183|805184|805185|805186|805187|805188|805189|805190|805191|805192|805193|805194|805195|805196|805197|805198|805199|805201|805202|805203|805204|805205|805206|805207|805208|805209|805210|805211|805212|805213|805214|805215|805216|805217|805218|805219|805220|805221|805222|805223|805224|805225|805226|805227|805228|805229|805230|805231|805232|805233|805234|805235|805236|805237|805238|805239|805240|805241|805242|805243|805244|805245|805246|805247|805248|805249|805250|805251|805252|805253|805254|805255|805256|805257|805258|805259|805260|805301|805302|805303|805304|805305|805306|805307|805308|805309|805310|805311|805312|805313|805314|805315|805316|805317|805318|805319|805320|805321|805322|805323|805324|805325|805326|805327|805328|805329|805330|805331|805332|805333|805334|805335|805336|805337|805338|805339|805341|805342|805343|805344|805345|805346|805348|805349|805350|805354|805355|805356|805357|805358|805359|805360|805361|805362|805363|805364|805365|805366|805367|805368|805369|805370|805371|805372|805373|805374|805375|805376|805377|805378|805390|805391|805392|805393|805394|805401|805403|805404|805405|805406|805407|805408|805409|805411|805412|805413|805415|805416|805417|805418|805419|805420|805421|805422|805423|805424|805425|805426|805428|805429|805430|805431|805432|805433|805434|805435|805436|805437|805438|805439|805440|805441|805442|805443|805444|805445|805446|805447|805448|805449|805450|805451|805452|805453|805454|805465|805466|805467|805468|805469|805470|805471|805472|805473|805474|805475|805476|805477|805478|805479|805480|805481|805482|805483|805484|805485|805486|805487|805488|805489|805490|805491|805492|805493|805494|805495|805496|805497|805498|805552|805553|805554|805557|805558|805559|805560|805561|805562|805563|805564|805566|805567|805568|805569|805570|805571|805572|805573|805574|805576|805578|805579|805580|805581|805582|805583|805584|805585|805587|805588|805590|805591|805592|805593|805594|805595|805596|805597|805598|805599|805600|805601|805603|805604|805605|805606|805607|805608|805609|805610|805611|805612|805613|805614|805615|805616|805617|805618|805619|805620|805621|805622|805623|805624|805625|805627|805628|805629|805630|805632|805633|805635|805636|805637|805638|805640|805641|805643|805644|805645|805646|805647|805648|805650|805651|805652|805653|805656|805657|805659|805670|805709|805710|805711|805716|805739|805745|805762|805763|805764|805767|805768|805773|805774|805776|805788|805794|805795|805797|805798|805799|805810|805811|805812|805813|805814|805815|805816|805817|805818|805819|805820|805821|805822|805823|805824|805825|805826|805827|805828|805829|805830|805841|805842|805843|805844|805845|805846|805847|805848|805849|805850|805851|805852|805853|805854|805855|805856|805857|805858|805859|805860|805861|805862|805863|805864|805865|805900|805976|805977|807330|807331|807440|807441|807442|807443|807444|807445|807446|807447|807448|807449|807450|807451|807452|807453|807454|807455|807456|807457|807471|807472|807600|807700|807800|807900|808333|808344|808388|809125|809126|809127|809128|809129|809970|809971|809972|809973|809974|809975|809976|809977|809978|809979)$",
                           "message":"This transaction is not supported at the Post Office. Please refer customer to their bank."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "comparison":"matchregexp",
                                                            "expected":"(^{{ outputData.customDepositLimitTranCodes }})$",
                                                            "given":"{{ outputData.tranCode }}",
                                                            "nodes":[
                                                               {
                                                                  "name":"BankOfScotlandManualCashDeposit-Stage-2",
                                                                  "type":"subJourney"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "barcodeInfo.maximumValue":"1000.00"
                                                            },
                                                            "type":"condition"
                                                         },
                                                         {
                                                            "comparison":"eq",
                                                            "expected":"1",
                                                            "given":"1",
                                                            "nodes":[
                                                               {
                                                                  "name":"BankOfScotlandManualCashDeposit-Stage-2",
                                                                  "type":"subJourney"
                                                               }
                                                            ],
                                                            "type":"condition"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "customDepositLimitTranCodes":"84",
               "expectedBankNames":"BANK OF SCOTLAND|Bank of Scotland|bank of scotland"
            },
            "type":"condition"
         }
      ],
      "BankOfScotlandManualCashDeposit-Stage-2":[
         {
            "description":"Enter",
            "inputMask":"alphanumeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Serial number is required."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^[0-9]{6,6}$",
                     "message":"Serial Number must be 6 digits in length."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "numericality":{
                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"0.00",
                        "inputMask":"currency",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Amount is required."
                              }
                           },
                           {
                              "confirmation":{
                                 "message":"The amounts entered mismatch. Please re-key.",
                                 "value":"{{ outputData.inputAmount }}"
                              },
                              "field":"inputValue"
                           }
                        ],
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Re-enter",
                                    "value":"reenter",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Confirm",
                                    "value":"confirm",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"reenter",
                                    "given":"{{ outputData.actions.inputGroup }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":4,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"confirm",
                                    "given":"{{ outputData.actions.inputGroup }}",
                                    "nodes":[
                                       {
                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.inputGroup":"{{ inputData.action }}"
                              },
                              "title":"Confirm Deposit amount",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left",
                                 "transition":false
                              }
                           }
                        ],
                        "title":"Re-Enter Amount",
                        "type":"input",
                        "unit":{
                           "position":"left",
                           "type":"text",
                           "value":"£"
                        }
                     }
                  ],
                  "outputData":{
                     "inputAmount":"{{ inputData.inputValue }}"
                  },
                  "title":"Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "serialNo":"{{ inputData.inputValue }}"
            },
            "title":"Serial Number",
            "type":"input"
         }
      ],
      "BillPay":[
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{  outputData.ClientAccName }}",
            "title":"Client Name",
            "type":"info"
         },
         {
            "description":"{{  outputData.TokenName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"Min. payable amount £ {{  outputData.minimumValue }}",
            "title":"",
            "type":"info"
         },
         {
            "description":"Max. payable amount £ {{  outputData.maximumValue }}",
            "title":"",
            "type":"info"
         },
         {
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue}}",
                     "lte":"{{ outputData.maximumValue}}",
                     "message":"Amount should be less than {{ outputData.maximumValue }} and greater than {{ outputData.minimumValue }}"
                  },
                  "required":{
                     "message":"Amount is required."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "message":"Amount is required.",
                     "notMatch":"^0.00$"
                  }
               }
            ],
            "nodes":[
               {
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "title":"Cancel",
                  "type":"choice"
               },
               {
                  "nodes":[
                     {
                        "basket":{
                           "id":"{{ outputData.Rref }}",
                           "title":"{{ outputData.ClientAccName }}"
                        },
                        "transaction":{
                           "entryType":"Bill Payment",
                           "itemID":"{{ outputData.CuR }}",
                           "merchantNumber ":"85312345678917",
                           "quantity":"1",
                           "quantityFixed":"true",
                           "receiptLine":"1",
                           "tokens.agentSlaInfo":"000064",
                           "tokens.amountRequested":"{{ outputData.amount }}",
                           "tokens.authorisation_code":"85312345678917",
                           "tokens.bankResponse":"",
                           "tokens.bankTransactionID":"{{ outputData.Rref }}",
                           "tokens.bankValueFlag":"N",
                           "tokens.cardImpounded":"0",
                           "tokens.clientID":"{{ outputData.CuR }}",
                           "tokens.counterSlaInfo":"000916",
                           "tokens.currency":"GBP",
                           "tokens.fee":"0",
                           "tokens.financialTransaction":"0",
                           "tokens.horizonTransactionID":"TBC",
                           "tokens.issuerSchemeID":"{{ outputData.issuerSchemeId }}",
                           "tokens.pan":"token.pan",
                           "tokens.receiptDate":"20211223",
                           "tokens.recoveryFlag":"N",
                           "tokens.responseCode":"201",
                           "tokens.settlementDate":"20211223",
                           "tokens.transactionResultCode":"1",
                           "tokens.transactionType":"61",
                           "value":"{{outputData.amount}}",
                           "voidable":"true"
                        },
                        "type":"complete"
                     }
                  ],
                  "title":"Add to basket",
                  "type":"choice"
               }
            ],
            "outputData":{
               "ClientAccName":"{{ outputData.ClientAccName }}",
               "Rref":"{{ outputData.Rref }}",
               "TokenName":"{{ outputData.TokenName }}",
               "amount":"{{ inputData.inputValue }}"
            },
            "title":"Amount",
            "type":"input",
            "visual":{
               "transition":false
            }
         }
      ],
      "ChequeEnvelopeDeposits":[
         {
            "description":"9826935100676",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"Offline Banking",
            "title":"Client name",
            "type":"info"
         },
         {
            "description":"Banking - Cheque Deposit",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"Enter",
            "inputMask":"alphanumeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Sort code is required."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^[0-9]{6}$",
                     "message":"Branch sort code must be 6 digits in length."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^(?!(401255)$)",
                     "message":"This transaction is not supported at the Post Office. Please refer customer to their bank."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Account number is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{8}$",
                           "message":"Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Cancel",
                              "value":"cancel",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Continue",
                              "value":"continue",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"Confirm that you have a {{ outputData.product.longName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"{{ outputData.action }}",
                              "given":"continue",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"print",
                                          "id":"printCustomerReceipt",
                                          "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                          "name":"printer",
                                          "params":{
                                             "value":"\u003chtml\u003e \u003chead\u003e \u003cstyle\u003e * { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv class=\"text-center no-padding\"\u003e \u003ch1\u003ePost Office Ltd.\u003c/h1\u003e \u003ch3\u003ewww.postoffice.co.uk\u003c/h3\u003e \u003c/div\u003e \u003chr /\u003e \u003cdiv class=no-padding\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e{{ appData.device.branchName }}\u003cbr\u003e{{ appData.device.branchAddress }}\u003cbr\u003e{{ appData.device.branchPostcode }}\u003c/td\u003e \u003ctd\u003eTP: {{ appData.device.nodeID }}\u003cbr\u003eFAD: {{ appData.device.branchID }}\u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003chr /\u003e \u003cp\u003eSession Id: TBC\u003c/p\u003e \u003cp\u003eTxn Id: TBC\u003c/p\u003e \u003cp\u003eClient: {{ outputData.barcodeInfo.ClientAccName }}\u003c/p\u003e \u003cp\u003eScheme: {{ outputData.barcodeInfo.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}\u003c/p\u003e \u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e \u003cp\u003eRef: {{ outputData.barcodeInfo.Rref }}\u003c/p\u003e \u003cp\u003eAmount: 0.00 Cash\u003c/p\u003e \u003cp\u003eProduct No: {{ outputData.productNo }}\u003c/p\u003e \u003chr /\u003e \u003cp\u003eSort Code: {{ outputData.sortCode }}\u003c/p\u003e \u003cp\u003eAccount Number: {{ outputData.accountNumber }}\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003cdiv class=\"text-center\"\u003e \u003cp\u003ePlease retain for future reference.\u003c/p\u003e \u003chr /\u003e \u003cp\u003e{{ outputData.receiptNotice }}\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003c/div\u003e \u003cdiv class=\"text-center\"\u003e \u003cp\u003eThis is not a VAT receipt.\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003c/body\u003e \u003c/html\u003e"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "basket":{
                                             "id":"{{ outputData.product.longName }}"
                                          },
                                          "transaction":{
                                             "entryType":"banking",
                                             "itemID":"{{ outputData.productNo }}",
                                             "quantity":"1",
                                             "quantityFixed":"true",
                                             "receiptLine":"1",
                                             "tokens.AD1":"TBC",
                                             "tokens.APTransactionReference":"0001",
                                             "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                                             "tokens.BNM":"TBC",
                                             "tokens.BRN":"TBC",
                                             "tokens.ConfirmBank":"TBC",
                                             "tokens.DD":"TBC",
                                             "tokens.DDI":"TBC",
                                             "tokens.DeclineAbort":"TBC",
                                             "tokens.ManualLookup":"TBC",
                                             "tokens.PCD":"TBC",
                                             "tokens.PN":"{{ outputData.productNo }}",
                                             "tokens.Receipt_Text2":"TBC",
                                             "tokens.SmileCheck":"TBC",
                                             "tokens.SortCode":"{{ outputData.sortCode }}",
                                             "tokens.TWN":"TBC",
                                             "tokens.Timeout":"TBC",
                                             "tokens.ValidationDeclined":"TBC",
                                             "tokens.ValidationFailed":"TBC",
                                             "tokens.ValidationFailedAbort":"TBC",
                                             "tokens.X_DATA_PN":"{{ outputData.productNo }}",
                                             "tokens.X_DATA_SetProduct_FP":"TBC",
                                             "tokens.X_DATA_SetProduct_LN":"TBC",
                                             "tokens.X_DATA_SetProduct_MV":"TBC",
                                             "tokens.X_DATA_SetProduct_MnV":"TBC",
                                             "tokens.X_DATA_SetProduct_MxV":"TBC",
                                             "tokens.X_DATA_SetProduct_PN":"TBC",
                                             "tokens.X_DATA_SetProduct_RN":"TBC",
                                             "tokens.X_DATA_SetProduct_RP":"TBC",
                                             "tokens.X_DATA_SetProduct_SN":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_ACC":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_CTR":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_FAD":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_SCD":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_STAFF":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_SVC":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TDATE":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TREF":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TTYP":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_VID":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_VER":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_RETURN_ACC":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_RETURN_SCD":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_RESULT_RCODE":"TBC",
                                             "tokens.X_DATA_ValidateBank_APOP_RESP_VER":"TBC",
                                             "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
                                             "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
                                             "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
                                             "tokens.paymentCode":"1",
                                             "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                             "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
                                             "tokens.versionNumber":"1",
                                             "value":"0",
                                             "valueInPence":"0",
                                             "voidable":"true"
                                          },
                                          "type":"complete"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"{{ outputData.action }}",
                              "given":"cancel",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm bank selection",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "accountNumber":"{{ inputData.inputValue }}"
                  },
                  "title":"Account number",
                  "type":"input",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "outputData":{
               "sortCode":"{{ inputData.inputValue }}"
            },
            "title":"Sort Code",
            "type":"input"
         }
      ],
      "ClydesdaleManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149009",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"Clydesdale Bank",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Client name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "description":"Enter",
                                                            "inputMask":"alphanumeric",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "required":{
                                                                     "message":"Serial number is required."
                                                                  }
                                                               },
                                                               {
                                                                  "field":"inputValue",
                                                                  "format":{
                                                                     "match":"^[0-9]{6,6}$",
                                                                     "message":"Serial Number must be 6 digits in length."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "description":"0.00",
                                                                  "inputMask":"currency",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "numericality":{
                                                                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"0.00",
                                                                        "inputMask":"currency",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"Amount is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"The amounts entered mismatch. Please re-key.",
                                                                                 "value":"{{ outputData.inputAmount }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "actions":[
                                                                                 {
                                                                                    "title":"Re-enter",
                                                                                    "value":"reenter",
                                                                                    "visual":{
                                                                                       "view":"secondary"
                                                                                    }
                                                                                 },
                                                                                 {
                                                                                    "title":"Confirm",
                                                                                    "value":"confirm",
                                                                                    "visual":{
                                                                                       "view":"primary"
                                                                                    }
                                                                                 }
                                                                              ],
                                                                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                                              "nodes":[
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"reenter",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "numberOfSteps":4,
                                                                                          "type":"undo"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 },
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"confirm",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                                                          "type":"subJourney"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 }
                                                                              ],
                                                                              "outputData":{
                                                                                 "actions.inputGroup":"{{ inputData.action }}"
                                                                              },
                                                                              "title":"Confirm Deposit amount",
                                                                              "type":"prompt",
                                                                              "visual":{
                                                                                 "actionAlignment":"left",
                                                                                 "transition":false
                                                                              }
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter Amount",
                                                                        "type":"input",
                                                                        "unit":{
                                                                           "position":"left",
                                                                           "type":"text",
                                                                           "value":"£"
                                                                        }
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "inputAmount":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"Amount",
                                                                  "type":"input",
                                                                  "unit":{
                                                                     "position":"left",
                                                                     "type":"text",
                                                                     "value":"£"
                                                                  }
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "serialNo":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Serial Number",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "expectedBankNames":"CLYDESDALE|Clydesdale|clydesdale"
            },
            "type":"condition"
         }
      ],
      "Danske_ChangeGiving":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510156110",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Ok",
                        "value":"ok"
                     }
                  ],
                  "description":"Please ensure the customer has provided their business debit card or business deposit card showing sort code and account number.",
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Cancel",
                              "value":"cancel",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Continue",
                              "value":"continue",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"Accept only notes for this transaction.",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"{{ outputData.action }}",
                              "given":"continue",
                              "nodes":[
                                 {
                                    "description":"Danske Bank",
                                    "title":"Bank name",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.Rref }}",
                                    "title":"PAN",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                                    "title":"Client name",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.longName }}",
                                    "title":"Description",
                                    "type":"info"
                                 },
                                 {
                                    "description":"Enter",
                                    "inputMask":"alphanumeric",
                                    "inputValidation":[
                                       {
                                          "field":"inputValue",
                                          "required":{
                                             "message":"Sort code is required."
                                          }
                                       },
                                       {
                                          "field":"inputValue",
                                          "format":{
                                             "match":"^[0-9]{6}$",
                                             "message":"Bank Sort Code must be 6 digits in length. Please Note: This is the Account not Card Number."
                                          }
                                       }
                                    ],
                                    "nodes":[
                                       {
                                          "description":"Enter",
                                          "inputMask":"alphanumeric",
                                          "inputValidation":[
                                             {
                                                "field":"inputValue",
                                                "required":{
                                                   "message":"Account number is required"
                                                }
                                             },
                                             {
                                                "field":"inputValue",
                                                "format":{
                                                   "match":"^[0-9]{8}$",
                                                   "message":"Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                                                }
                                             }
                                          ],
                                          "nodes":[
                                             {
                                                "actions":[
                                                   {
                                                      "title":"Cancel",
                                                      "value":"cancel",
                                                      "visual":{
                                                         "view":"secondary"
                                                      }
                                                   },
                                                   {
                                                      "title":"Continue",
                                                      "value":"continue",
                                                      "visual":{
                                                         "view":"primary"
                                                      }
                                                   }
                                                ],
                                                "description":"Confirm that the customer is a {{ outputData.bankShortName }} customer.\n\nClick Continue to proceed, or Cancel to abort transaction.",
                                                "nodes":[
                                                   {
                                                      "comparison":"eq",
                                                      "expected":"{{ outputData.action }}",
                                                      "given":"continue",
                                                      "nodes":[
                                                         {
                                                            "defaultValues":{
                                                               "inputValue":"0.00"
                                                            },
                                                            "inputMask":"currency",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "numericality":{
                                                                     "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                     "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "comparison":"eq",
                                                                  "enablers":[
                                                                     {
                                                                        "action":"print",
                                                                        "id":"printCustomerReceipt",
                                                                        "loadingMessage":"Printing change giving receipt.",
                                                                        "name":"printer",
                                                                        "params":{
                                                                           "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e* { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; }\u003c/style\u003e\u003c/head\u003e\u003cbody\u003e \u003cdiv class=\"text-center no-padding\"\u003e \u003ch1\u003ePost Office Ltd.\u003c/h1\u003e \u003ch3\u003ewww.postoffice.co.uk\u003c/h3\u003e \u003c/div\u003e \u003chr /\u003e \u003cdiv class=\"no-padding\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }} \u003cbr\u003e{{ appData.device.branchName }} \u003cbr\u003e{{ appData.device.branchAddress }} \u003cbr\u003e{{ appData.device.branchPostcode }} \u003c/td\u003e \u003ctd\u003eTP: {{ appData.device.nodeID }} \u003cbr\u003eFAD: {{ appData.device.branchID }} \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003chr /\u003e \u003cp\u003eSession Id: TBC\u003c/p\u003e \u003cp\u003eTxn Id: TBC\u003c/p\u003e \u003cp\u003eClient: {{ outputData.barcodeInfo.ClientAccName }}\u003c/p\u003e \u003cp\u003eScheme: {{ outputData.barcodeInfo.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}\u003c/p\u003e \u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e \u003cp\u003eRef: {{ outputData.barcodeInfo.Rref }}\u003c/p\u003e \u003cp\u003eAmount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"\") }} Cash\u003c/p\u003e \u003cp\u003eProduct No: {{ outputData.barcodeInfo.ProdNo }}\u003c/p\u003e \u003c/div\u003e\u003chr /\u003e \u003c/div\u003e \u003cdiv class=\"text-center\"\u003e \u003cp\u003eThis is not a VAT receipt.\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003c/body\u003e\u003c/html\u003e"
                                                                        },
                                                                        "stepEvent":"onMatch"
                                                                     },
                                                                     {
                                                                        "action":"objectsToArray",
                                                                        "id":"createdAdditionalItems",
                                                                        "name":"payloadTransform",
                                                                        "params":{
                                                                           "1":{
                                                                              "itemID":"45311",
                                                                              "quantity":"1",
                                                                              "receiptLine":"1",
                                                                              "value":"{{ outputData.amount }}"
                                                                           }
                                                                        },
                                                                        "stepEvent":"onMatch"
                                                                     }
                                                                  ],
                                                                  "expected":"1",
                                                                  "given":"1",
                                                                  "nodes":[
                                                                     {
                                                                        "basket":{
                                                                           "id":"{{ outputData.barcodeInfo.longName }}"
                                                                        },
                                                                        "transaction":{
                                                                           "additionalItems":"{{ outputData.additionalItems }}",
                                                                           "entryType":"banking",
                                                                           "itemID":"{{ outputData.barcodeInfo.ProdNo }}",
                                                                           "quantity":"1",
                                                                           "quantityFixed":"true",
                                                                           "receiptLine":"1",
                                                                           "tokens.APTransactionReference":"0001",
                                                                           "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                                                                           "tokens.BRANCHNAME":"{{ appData.device.branchName }}",
                                                                           "tokens.CHNG":"{{ outputData.amount }}",
                                                                           "tokens.DATE":"{{ FORMAT_DATE(NOW(), \"DD/MM/YY\") }}",
                                                                           "tokens.FADCODE":"{{ appData.device.branchID }}",
                                                                           "tokens.PCA":"TBC",
                                                                           "tokens.SortCode":"{{ outputData.sortCode }}",
                                                                           "tokens.TIME":"{{ FORMAT_DATE(NOW(), \"HH:mm:ss\") }}",
                                                                           "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
                                                                           "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
                                                                           "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
                                                                           "tokens.paymentCode":"1",
                                                                           "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                                                           "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
                                                                           "tokens.versionNumber":"1",
                                                                           "value":"0",
                                                                           "valueInPence":"0",
                                                                           "voidable":"true"
                                                                        },
                                                                        "type":"complete"
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "additionalItems":"{{ inputData.enablers.createdAdditionalItems }}"
                                                                  },
                                                                  "type":"condition"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "amount":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Enter total change required",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   },
                                                   {
                                                      "comparison":"eq",
                                                      "expected":"{{ outputData.action }}",
                                                      "given":"cancel",
                                                      "nodes":[
                                                         {
                                                            "type":"abort"
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   }
                                                ],
                                                "outputData":{
                                                   "action":"{{ inputData.action }}"
                                                },
                                                "title":"Confirm Bank selection",
                                                "type":"prompt",
                                                "visual":{
                                                   "actionAlignment":"left"
                                                }
                                             }
                                          ],
                                          "outputData":{
                                             "accountNumber":"{{ inputData.inputValue }}"
                                          },
                                          "title":"Account number",
                                          "type":"input"
                                       }
                                    ],
                                    "outputData":{
                                       "sortCode":"{{ inputData.inputValue }}"
                                    },
                                    "title":"Sort code",
                                    "type":"input"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"{{ outputData.action }}",
                              "given":"cancel",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Information",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Action Required",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"right"
                  }
               }
            ],
            "outputData":{
               "bankShortName":"Danske Bank",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}"
            },
            "type":"condition"
         }
      ],
      "FirstTrustAIBManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"9826935101491",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               },
               {
                  "action":"getProduct",
                  "id":"product",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "ProdNo":"42834"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.longName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        },
                        "required":{
                           "message":"Sort code is required"
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "description":"Enter",
                                                            "inputMask":"alphanumeric",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "required":{
                                                                     "message":"Serial number is required."
                                                                  }
                                                               },
                                                               {
                                                                  "field":"inputValue",
                                                                  "format":{
                                                                     "match":"^[0-9]{6,6}$",
                                                                     "message":"Serial Number must be 6 digits in length."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "description":"0.00",
                                                                  "inputMask":"currency",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "numericality":{
                                                                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"0.00",
                                                                        "inputMask":"currency",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"Amount is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"The amounts entered mismatch. Please re-key.",
                                                                                 "value":"{{ outputData.inputAmount }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "actions":[
                                                                                 {
                                                                                    "title":"Re-enter",
                                                                                    "value":"reenter",
                                                                                    "visual":{
                                                                                       "view":"secondary"
                                                                                    }
                                                                                 },
                                                                                 {
                                                                                    "title":"Confirm",
                                                                                    "value":"confirm",
                                                                                    "visual":{
                                                                                       "view":"primary"
                                                                                    }
                                                                                 }
                                                                              ],
                                                                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                                              "nodes":[
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"reenter",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "numberOfSteps":4,
                                                                                          "type":"undo"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 },
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"confirm",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                                                          "type":"subJourney"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 }
                                                                              ],
                                                                              "outputData":{
                                                                                 "actions.inputGroup":"{{ inputData.action }}"
                                                                              },
                                                                              "title":"Confirm Deposit amount",
                                                                              "type":"prompt",
                                                                              "visual":{
                                                                                 "actionAlignment":"left",
                                                                                 "transition":false
                                                                              }
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter Amount",
                                                                        "type":"input",
                                                                        "unit":{
                                                                           "position":"left",
                                                                           "type":"text",
                                                                           "value":"£"
                                                                        }
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "inputAmount":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"Amount",
                                                                  "type":"input",
                                                                  "unit":{
                                                                     "position":"left",
                                                                     "type":"text",
                                                                     "value":"£"
                                                                  }
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "serialNo":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Serial Number",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "barcodeInfo.ProdNo":"{{ inputData.enablers.product.itemID }}",
               "barcodeInfo.itemID":"{{ inputData.enablers.product.itemID }}",
               "barcodeInfo.itemName":"{{ inputData.enablers.product.itemName }}",
               "barcodeInfo.longName":"{{ inputData.enablers.product.longName }}",
               "barcodeInfo.maximumValue":"{{ inputData.enablers.product.maximumValue }}",
               "barcodeInfo.mediumName":"{{ inputData.enablers.product.mediumName }}",
               "barcodeInfo.minimumValue":"{{ inputData.enablers.product.minimumValue }}",
               "barcodeInfo.shortName":"{{ inputData.enablers.product.shortName }}",
               "expectedBankNames":"AIB GROUP|Aib Group|aib group"
            },
            "type":"condition"
         }
      ],
      "HSBC_ChangeGiving":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510156101",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Ok",
                        "value":"ok"
                     }
                  ],
                  "description":"Please ensure the customer has provided their business debit card or business deposit card showing sort code and account number.",
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Cancel",
                              "value":"cancel",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Continue",
                              "value":"continue",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"Accept only notes for this transaction.",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"{{ outputData.action }}",
                              "given":"continue",
                              "nodes":[
                                 {
                                    "description":"HSBC",
                                    "title":"Bank name",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.Rref }}",
                                    "title":"PAN",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                                    "title":"Client name",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.longName }}",
                                    "title":"Description",
                                    "type":"info"
                                 },
                                 {
                                    "description":"Enter",
                                    "inputMask":"alphanumeric",
                                    "inputValidation":[
                                       {
                                          "field":"inputValue",
                                          "required":{
                                             "message":"Sort code is required."
                                          }
                                       },
                                       {
                                          "field":"inputValue",
                                          "format":{
                                             "match":"^[0-9]{6}$",
                                             "message":"Bank Sort Code must be 6 digits in length. Please Note: This is the Account not Card Number."
                                          }
                                       }
                                    ],
                                    "nodes":[
                                       {
                                          "description":"Enter",
                                          "inputMask":"alphanumeric",
                                          "inputValidation":[
                                             {
                                                "field":"inputValue",
                                                "required":{
                                                   "message":"Account number is required"
                                                }
                                             },
                                             {
                                                "field":"inputValue",
                                                "format":{
                                                   "match":"^[0-9]{8}$",
                                                   "message":"Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                                                }
                                             }
                                          ],
                                          "nodes":[
                                             {
                                                "actions":[
                                                   {
                                                      "title":"Cancel",
                                                      "value":"cancel",
                                                      "visual":{
                                                         "view":"secondary"
                                                      }
                                                   },
                                                   {
                                                      "title":"Continue",
                                                      "value":"continue",
                                                      "visual":{
                                                         "view":"primary"
                                                      }
                                                   }
                                                ],
                                                "description":"Confirm that the customer is a {{ outputData.bankShortName }} customer.\n\nClick Continue to proceed, or Cancel to abort transaction.",
                                                "nodes":[
                                                   {
                                                      "comparison":"eq",
                                                      "expected":"{{ outputData.action }}",
                                                      "given":"continue",
                                                      "nodes":[
                                                         {
                                                            "defaultValues":{
                                                               "inputValue":"0.00"
                                                            },
                                                            "inputMask":"currency",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "numericality":{
                                                                     "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                     "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "comparison":"eq",
                                                                  "enablers":[
                                                                     {
                                                                        "action":"print",
                                                                        "id":"printCustomerReceipt",
                                                                        "loadingMessage":"Printing change giving receipt.",
                                                                        "name":"printer",
                                                                        "params":{
                                                                           "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e* { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; }\u003c/style\u003e\u003c/head\u003e\u003cbody\u003e \u003cdiv class=\"text-center no-padding\"\u003e \u003ch1\u003ePost Office Ltd.\u003c/h1\u003e \u003ch3\u003ewww.postoffice.co.uk\u003c/h3\u003e \u003c/div\u003e \u003chr /\u003e \u003cdiv class=\"no-padding\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }} \u003cbr\u003e{{ appData.device.branchName }} \u003cbr\u003e{{ appData.device.branchAddress }} \u003cbr\u003e{{ appData.device.branchPostcode }} \u003c/td\u003e \u003ctd\u003eTP: {{ appData.device.nodeID }} \u003cbr\u003eFAD: {{ appData.device.branchID }} \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003chr /\u003e \u003cp\u003eSession Id: TBC\u003c/p\u003e \u003cp\u003eTxn Id: TBC\u003c/p\u003e \u003cp\u003eClient: {{ outputData.barcodeInfo.ClientAccName }}\u003c/p\u003e \u003cp\u003eScheme: {{ outputData.barcodeInfo.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}\u003c/p\u003e \u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e \u003cp\u003eRef: {{ outputData.barcodeInfo.Rref }}\u003c/p\u003e \u003cp\u003eAmount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"\") }} Cash\u003c/p\u003e \u003cp\u003eProduct No: {{ outputData.barcodeInfo.ProdNo }}\u003c/p\u003e \u003c/div\u003e\u003chr /\u003e \u003c/div\u003e \u003cdiv class=\"text-center\"\u003e \u003cp\u003eThis is not a VAT receipt.\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003c/body\u003e\u003c/html\u003e"
                                                                        },
                                                                        "stepEvent":"onMatch"
                                                                     },
                                                                     {
                                                                        "action":"objectsToArray",
                                                                        "id":"createdAdditionalItems",
                                                                        "name":"payloadTransform",
                                                                        "params":{
                                                                           "1":{
                                                                              "itemID":"43482",
                                                                              "quantity":"1",
                                                                              "receiptLine":"1",
                                                                              "value":"{{ outputData.amount }}"
                                                                           }
                                                                        },
                                                                        "stepEvent":"onMatch"
                                                                     }
                                                                  ],
                                                                  "expected":"1",
                                                                  "given":"1",
                                                                  "nodes":[
                                                                     {
                                                                        "basket":{
                                                                           "id":"{{ outputData.barcodeInfo.longName }}"
                                                                        },
                                                                        "transaction":{
                                                                           "additionalItems":"{{ outputData.additionalItems }}",
                                                                           "entryType":"banking",
                                                                           "itemID":"{{ outputData.barcodeInfo.ProdNo }}",
                                                                           "quantity":"1",
                                                                           "quantityFixed":"true",
                                                                           "receiptLine":"1",
                                                                           "tokens.APTransactionReference":"0001",
                                                                           "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                                                                           "tokens.BRANCHNAME":"{{ appData.device.branchName }}",
                                                                           "tokens.CHNG":"{{ outputData.amount }}",
                                                                           "tokens.DATE":"{{ FORMAT_DATE(NOW(), \"DD/MM/YY\") }}",
                                                                           "tokens.FADCODE":"{{ appData.device.branchID }}",
                                                                           "tokens.PCA":"TBC",
                                                                           "tokens.SortCode":"{{ outputData.sortCode }}",
                                                                           "tokens.TIME":"{{ FORMAT_DATE(NOW(), \"HH:mm:ss\") }}",
                                                                           "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
                                                                           "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
                                                                           "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
                                                                           "tokens.paymentCode":"1",
                                                                           "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                                                           "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
                                                                           "tokens.versionNumber":"1",
                                                                           "value":"0",
                                                                           "valueInPence":"0",
                                                                           "voidable":"true"
                                                                        },
                                                                        "type":"complete"
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "additionalItems":"{{ inputData.enablers.createdAdditionalItems }}"
                                                                  },
                                                                  "type":"condition"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "amount":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Enter total change required",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   },
                                                   {
                                                      "comparison":"eq",
                                                      "expected":"{{ outputData.action }}",
                                                      "given":"cancel",
                                                      "nodes":[
                                                         {
                                                            "type":"abort"
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   }
                                                ],
                                                "outputData":{
                                                   "action":"{{ inputData.action }}"
                                                },
                                                "title":"Confirm Bank selection",
                                                "type":"prompt",
                                                "visual":{
                                                   "actionAlignment":"left"
                                                }
                                             }
                                          ],
                                          "outputData":{
                                             "accountNumber":"{{ inputData.inputValue }}"
                                          },
                                          "title":"Account number",
                                          "type":"input"
                                       }
                                    ],
                                    "outputData":{
                                       "sortCode":"{{ inputData.inputValue }}"
                                    },
                                    "title":"Sort code",
                                    "type":"input"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"{{ outputData.action }}",
                              "given":"cancel",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Information",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Action Required",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"right"
                  }
               }
            ],
            "outputData":{
               "bankShortName":"HSBC",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}"
            },
            "type":"condition"
         }
      ],
      "HalifaxManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149005",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^({{ outputData.allowedSortCodes }})",
                           "message":"This transaction is not supported at the Post Office. Please refer customer to their bank."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^(?!({{ outputData.excludedSortCodes }})$)",
                           "message":"This transaction is not supported at Post Office, please refer customer to their bank."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "comparison":"matchregexp",
                                                            "expected":"(^{{ outputData.customDepositLimitTranCodes }})$",
                                                            "given":"{{ outputData.tranCode }}",
                                                            "nodes":[
                                                               {
                                                                  "name":"HalifaxManualCashDeposit-Stage-2",
                                                                  "type":"subJourney"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "barcodeInfo.maximumValue":"1000.00"
                                                            },
                                                            "type":"condition"
                                                         },
                                                         {
                                                            "comparison":"eq",
                                                            "expected":"1",
                                                            "given":"1",
                                                            "nodes":[
                                                               {
                                                                  "name":"HalifaxManualCashDeposit-Stage-2",
                                                                  "type":"subJourney"
                                                               }
                                                            ],
                                                            "type":"condition"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "allowedSortCodes":"11000\\d|1100[1-9]\\d|110[1-9]\\d{2}|11[1-8]\\d{3}|1190\\d{2})|(11920\\d|1192[1-9]\\d|119[3-9]\\d{2}",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "customDepositLimitTranCodes":"84",
               "excludedSortCodes":"11910[0-9]|1191[1-9][0-9]",
               "expectedBankNames":"Halifax|HALIFAX"
            },
            "type":"condition"
         }
      ],
      "HalifaxManualCashDeposit-Stage-2":[
         {
            "description":"Enter",
            "inputMask":"alphanumeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Serial number is required."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^[0-9]{6,6}$",
                     "message":"Serial Number must be 6 digits in length."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "numericality":{
                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"0.00",
                        "inputMask":"currency",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Amount is required."
                              }
                           },
                           {
                              "confirmation":{
                                 "message":"The amounts entered mismatch. Please re-key.",
                                 "value":"{{ outputData.inputAmount }}"
                              },
                              "field":"inputValue"
                           }
                        ],
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Re-enter",
                                    "value":"reenter",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Confirm",
                                    "value":"confirm",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"reenter",
                                    "given":"{{ outputData.actions.inputGroup }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":4,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"confirm",
                                    "given":"{{ outputData.actions.inputGroup }}",
                                    "nodes":[
                                       {
                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.inputGroup":"{{ inputData.action }}"
                              },
                              "title":"Confirm Deposit amount",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left",
                                 "transition":false
                              }
                           }
                        ],
                        "title":"Re-Enter Amount",
                        "type":"input",
                        "unit":{
                           "position":"left",
                           "type":"text",
                           "value":"£"
                        }
                     }
                  ],
                  "outputData":{
                     "inputAmount":"{{ inputData.inputValue }}"
                  },
                  "title":"Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "serialNo":"{{ inputData.inputValue }}"
            },
            "title":"Serial Number",
            "type":"input"
         }
      ],
      "Item31351":[
         {
            "description":"9826935100676",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"Offline Banking",
            "title":"Client Name",
            "type":"info"
         },
         {
            "description":"Banking - Cheque Deposit",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"Enter",
            "inputMask":"alphanumeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Sort code is required."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^[0-9]{6}$",
                     "message":"Branch sort code must be 6 digits in length."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^(?!(401255)$)",
                     "message":"This transaction is not supported at the Post Office. Please refer customer to their bank."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Account number is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{8}$",
                           "message":"Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "comparison":"eq",
                        "enablers":[
                           {
                              "action":"AccountValidation",
                              "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                              "id":"accountValidation",
                              "loadingMessage":"Validating account details",
                              "name":"banking",
                              "params":{
                                 "accountNumber":"{{ outputData.accountNumber }}",
                                 "sortCode":"{{ outputData.sortCode }}"
                              },
                              "retriable":true,
                              "stepEvent":"onMatch"
                           }
                        ],
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"UnknownSortCode",
                              "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                              "nodes":[
                                 {
                                    "name":"LoqateAbortError",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                 "loqateError.title":"Transaction Declined"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"InvalidAccountNumber",
                              "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                              "nodes":[
                                 {
                                    "name":"LoqateAbortError",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                 "loqateError.title":"Transaction Declined"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"Cahoot",
                              "given":"{{ outputData.bankAccountDetails.branch }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "bankName":"Cahoot",
                                 "productNo":"4374",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Cahoot."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"ADAM \u0026 COMPANY PLC|adam \u0026 company plc|Adam \u0026 Company Plc",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"48914",
                                 "receiptNotice":"In the event of a query on this deposit \u003cbr\u003eplease contact Adam24 on 0131 278 3777"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"ALLIED IRISH BANK \\(GB\\)|Allied Irish Bank \\(GB\\)|Allied Irish Bank \\(Gb\\)|allied irish bank \\(gb\\)",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"46722",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact AIB (NI)."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"AIB GROUP \\(UK\\) PLC \\(TRADING NAME FIRST T|Aib Group \\(UK\\) Plc \\(Trading Name First T|Aib Group \\(UK\\) plc \\(Trading Name First T|aib group \\(UK\\) plc \\(trading name first t",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"46721",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact AIB (NI)."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"Bank of Scotland",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"43168",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Bank of Scotland on\u003cbr\u003e0345 721 3141."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"Barclays|BARCLAYS|Woolwich|WOOLWICH",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"4371",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Barclays."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"Bank of Ireland|BANK OF IRELAND",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "bankName":"Bank of Ireland",
                                 "productNo":"5978",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Bank of Ireland."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"CAF BANK LIMITED",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "bankName":"CAF",
                                 "productNo":"35446",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact cafbank@cafonline.org \u003cbr\u003eor ring 03000 123 456."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"CO-OPERATIVE|Co-Operative|co-operative",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "actions":[
                                       {
                                          "title":"Co-Op Bank",
                                          "value":"co-op",
                                          "visual":{
                                             "view":"secondary"
                                          }
                                       },
                                       {
                                          "title":"Smile Bank",
                                          "value":"smile",
                                          "visual":{
                                             "view":"secondary"
                                          }
                                       }
                                    ],
                                    "description":"Please confirm if the Sort Code {{ outputData.sortCode }} and Account Number {{ outputData.accountNumber }} is for Smile or The Co-Op Bank.",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "expected":"{{ outputData.bankSelection }}",
                                          "given":"co-op",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"1",
                                                "given":"1",
                                                "nodes":[
                                                   {
                                                      "name":"Item31351-PostBankSelection",
                                                      "type":"subJourney"
                                                   }
                                                ],
                                                "outputData":{
                                                   "productNo":"4377",
                                                   "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact the Co-op."
                                                },
                                                "type":"condition"
                                             }
                                          ],
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"{{ outputData.bankSelection }}",
                                          "given":"smile",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"1",
                                                "given":"1",
                                                "nodes":[
                                                   {
                                                      "name":"Item31351-PostBankSelection",
                                                      "type":"subJourney"
                                                   }
                                                ],
                                                "outputData":{
                                                   "productNo":"4386",
                                                   "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Smile"
                                                },
                                                "type":"condition"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "bankSelection":"{{ inputData.action }}"
                                    },
                                    "title":"Confirm bank selection",
                                    "type":"prompt",
                                    "visual":{
                                       "actionAlignment":"left"
                                    }
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"COUTTS \u0026 CO|Coutts \u0026 Co|coutts \u0026 co",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"48913",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Coutts24 on 020 7957 2424."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"FIRST DIRECT|First Direct|first direct|FirstDirect|Firstdirect|firstdirect",
                              "given":"{{ outputData.bankAccountDetails.branch }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"4380",
                                 "receiptNotice":"If you have any questions about the\u003cbr\u003echeques you've paid in,\u003cbr\u003eplease contact first direct on\u003cbr\u003e03 456 00 100."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"Halifax|HALIFAX",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"31789",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Halifax on 0345 720 3040"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"LLOYDS|Lloyds|lloyds",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"4383",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Lloyds Bank on \u003cbr\u003e0345 300 0000."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"METRO BANK PLC|Metro Bank plc",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"41693",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Metro Bank on \u003cbr\u003e0345 08 08 508."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"NATIONAL WESTMINSTER BANK|National Westminster Bank|national westminster bank",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"38877",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact NatWest"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"ROYAL BANK OF SCOTLAND|Royal Bank of Scotland|royal bank of scotland",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"38875",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact RBS."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"SANTANDER UK PLC|Santander Uk Plc|Santander Uk plc|Santander UK plc|santander uk plc",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"45263",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Santander"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"THINK MONEY LIMITED|Think Money Limited|think money limited",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"40160",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease refer to ThinkMoney via\u003cbr\u003ewww.thinkmoney.co.uk/help-support"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"TSB|tsb",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"37114",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease visit www.TSB.co.uk\u003cbr\u003efor your local TSB branch contact details."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"ULSTER|Ulster|ulster",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"38878",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Ulster Bank."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"HSBC|hsbc",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"36804",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact HSBC on \u003cbr\u003e0345 740 4404"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"CLYDESDALE|Clydesdale|clydesdale",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"6166",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Clydesdale."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"matchregexp",
                              "expected":"YORKSHIRE|Yorkshire|yorkshire",
                              "given":"{{ outputData.bankAccountDetails.bank }}",
                              "nodes":[
                                 {
                                    "name":"Item31351-PostBankSelection",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "productNo":"37633",
                                 "receiptNotice":"In the event of a query on this deposit\u003cbr\u003eplease contact Yorkshire Bank."
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "name":"LoqateAbortError",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "loqateError.description":"The Sort Code {{ outputData.sortCode }} and Account Number {{ outputData.accountNumber }} is not valid for Personal Banking.\n\nClick Ok to end the transaction.",
                                 "loqateError.title":"Transaction Declined"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                        },
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "accountNumber":"{{ inputData.inputValue }}"
                  },
                  "title":"Account number",
                  "type":"input"
               }
            ],
            "outputData":{
               "sortCode":"{{ inputData.inputValue }}"
            },
            "title":"Sort Code",
            "type":"input"
         }
      ],
      "Item31351-PostBankSelection":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"product",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "ProdNo":"{{ outputData.productNo }}"
                  },
                  "stepEvent":"onMatch"
               },
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"9826935100676"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Continue",
                        "value":"continue",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"Confirm that you have a {{ outputData.product.longName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"{{ outputData.action }}",
                        "given":"continue",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"print",
                                    "id":"printCustomerReceipt",
                                    "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                    "name":"printer",
                                    "params":{
                                       "value":"\u003chtml\u003e \u003chead\u003e \u003cstyle\u003e * { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv class=\"text-center no-padding\"\u003e \u003ch1\u003ePost Office Ltd.\u003c/h1\u003e \u003ch3\u003ewww.postoffice.co.uk\u003c/h3\u003e \u003c/div\u003e \u003chr /\u003e \u003cdiv class=no-padding\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e{{ appData.device.branchName }}\u003cbr\u003e{{ appData.device.branchAddress }}\u003cbr\u003e{{ appData.device.branchPostcode }}\u003c/td\u003e \u003ctd\u003eTP: {{ appData.device.nodeID }}\u003cbr\u003eFAD: {{ appData.device.branchID }}\u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003chr /\u003e \u003cp\u003eSession Id: TBC\u003c/p\u003e \u003cp\u003eTxn Id: TBC\u003c/p\u003e \u003cp\u003eClient: {{ outputData.barcodeInfo.ClientAccName }}\u003c/p\u003e \u003cp\u003eScheme: {{ outputData.barcodeInfo.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}\u003c/p\u003e \u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e \u003cp\u003eRef: {{ outputData.barcodeInfo.Rref }}\u003c/p\u003e \u003cp\u003eAmount: 0.00 Cash\u003c/p\u003e \u003cp\u003eProduct No: {{ outputData.productNo }}\u003c/p\u003e \u003chr /\u003e \u003cp\u003eSort Code: {{ outputData.sortCode }}\u003c/p\u003e \u003cp\u003eAccount Number: {{ outputData.accountNumber }}\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003cdiv class=\"text-center\"\u003e \u003cp\u003ePlease retain for future reference.\u003c/p\u003e \u003chr /\u003e \u003cp\u003e{{ outputData.receiptNotice }}\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003c/div\u003e \u003cdiv class=\"text-center\"\u003e \u003cp\u003eThis is not a VAT receipt.\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003c/body\u003e \u003c/html\u003e"
                                    },
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "basket":{
                                       "id":"{{ outputData.product.longName }}"
                                    },
                                    "transaction":{
                                       "entryType":"banking",
                                       "itemID":"{{ outputData.productNo }}",
                                       "quantity":"1",
                                       "quantityFixed":"true",
                                       "receiptLine":"1",
                                       "tokens.AD1":"TBC",
                                       "tokens.APTransactionReference":"0001",
                                       "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                                       "tokens.BNM":"TBC",
                                       "tokens.BRN":"TBC",
                                       "tokens.ConfirmBank":"TBC",
                                       "tokens.DD":"TBC",
                                       "tokens.DDI":"TBC",
                                       "tokens.DeclineAbort":"TBC",
                                       "tokens.ManualLookup":"TBC",
                                       "tokens.PCD":"TBC",
                                       "tokens.PN":"{{ outputData.productNo }}",
                                       "tokens.Receipt_Text2":"TBC",
                                       "tokens.SmileCheck":"TBC",
                                       "tokens.SortCode":"{{ outputData.sortCode }}",
                                       "tokens.TWN":"TBC",
                                       "tokens.Timeout":"TBC",
                                       "tokens.ValidationDeclined":"TBC",
                                       "tokens.ValidationFailed":"TBC",
                                       "tokens.ValidationFailedAbort":"TBC",
                                       "tokens.X_DATA_PN":"{{ outputData.productNo }}",
                                       "tokens.X_DATA_SetProduct_FP":"TBC",
                                       "tokens.X_DATA_SetProduct_LN":"TBC",
                                       "tokens.X_DATA_SetProduct_MV":"TBC",
                                       "tokens.X_DATA_SetProduct_MnV":"TBC",
                                       "tokens.X_DATA_SetProduct_MxV":"TBC",
                                       "tokens.X_DATA_SetProduct_PN":"TBC",
                                       "tokens.X_DATA_SetProduct_RN":"TBC",
                                       "tokens.X_DATA_SetProduct_RP":"TBC",
                                       "tokens.X_DATA_SetProduct_SN":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_ACC":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_CTR":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_FAD":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_SCD":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_STAFF":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_SVC":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TDATE":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TREF":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_TTYP":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_TXN_VID":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_MSG_VER":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_RETURN_ACC":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_APOP_RETURN_SCD":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_RESULT_RCODE":"TBC",
                                       "tokens.X_DATA_ValidateBank_APOP_RESP_VER":"TBC",
                                       "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
                                       "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
                                       "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
                                       "tokens.paymentCode":"1",
                                       "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                       "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
                                       "tokens.versionNumber":"1",
                                       "value":"0",
                                       "valueInPence":"0",
                                       "voidable":"true"
                                    },
                                    "type":"complete"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"{{ outputData.action }}",
                        "given":"cancel",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "action":"{{ inputData.action }}"
                  },
                  "title":"Confirm bank selection",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "product":"{{ inputData.enablers.product }}"
            },
            "type":"condition"
         }
      ],
      "Item35383":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"product",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "ProdNo":"35383"
                  },
                  "stepEvent":"onMatch"
               },
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"9826935100981"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"Offline Banking",
                  "title":"Client name",
                  "type":"info"
               },
               {
                  "description":"Banking - Cheque Deposit",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required."
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"Northern Bank Ltd|NORTHERN BANK LTD|Danske Bank|NORTHERN BANK LIMITED T/A DANSKE BANK",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.product.longName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "comparison":"eq",
                                                      "enablers":[
                                                         {
                                                            "action":"print",
                                                            "id":"printCustomerReceipt",
                                                            "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                                            "name":"printer",
                                                            "params":{
                                                               "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e* { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; }\u003c/style\u003e\u003c/head\u003e\u003cbody\u003e\u003cdiv class=\"text-center no-padding\"\u003e\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\u003ch3\u003ewww.postoffice.co.uk\u003c/h3\u003e\u003c/div\u003e          \u003chr /\u003e\u003cdiv class=no-padding\u003e\u003ctable\u003e\u003ctr\u003e\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e{{ appData.device.branchName }}\u003cbr\u003e{{ appData.device.branchAddress }}\u003cbr\u003e{{ appData.device.branchPostcode }}\u003c/td\u003e\u003ctd\u003eTP: {{ appData.device.nodeID }}\u003cbr\u003eFAD: {{ appData.device.branchID }}\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\u003chr /\u003e\u003cp\u003eSession Id: TBC\u003c/p\u003e\u003cp\u003eTxn Id: TBC\u003c/p\u003e\u003cp\u003eClient: {{ outputData.barcodeInfo.ClientAccName }}\u003c/p\u003e\u003cp\u003eScheme: {{ outputData.barcodeInfo.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}\u003c/p\u003e\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\u003cp\u003eRef: {{ outputData.barcodeInfo.Rref }}\u003c/p\u003e\u003cp\u003eAmount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }} Cash\u003c/p\u003e\u003chr /\u003e\u003cp\u003eSort Code: {{ outputData.sortCode }}\u003c/p\u003e\u003cp\u003eAccount Number: {{ outputData.accountNumber }}\u003c/p\u003e\u003c/div\u003e\u003chr /\u003e\u003cdiv class=\"text-center\"\u003e\u003cp\u003ePlease retain for future reference.\u003c/p\u003e\u003chr /\u003e\u003cp\u003e{{ outputData.receiptNotice }}\u003c/p\u003e\u003c/div\u003e\u003chr /\u003e\u003c/div\u003e\u003cdiv class=\"text-center\"\u003e\u003cp\u003eThis is not a VAT receipt.\u003c/p\u003e\u003c/div\u003e\u003chr /\u003e \u003c/body\u003e\u003c/html\u003e"
                                                            },
                                                            "stepEvent":"onMatch"
                                                         }
                                                      ],
                                                      "expected":"1",
                                                      "given":"1",
                                                      "nodes":[
                                                         {
                                                            "basket":{
                                                               "id":"{{ outputData.product.longName }}"
                                                            },
                                                            "transaction":{
                                                               "entryType":"banking",
                                                               "itemID":"35383",
                                                               "quantity":"1",
                                                               "quantityFixed":"true",
                                                               "receiptLine":"1",
                                                               "tokens.APTransactionReference":"0001",
                                                               "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                                                               "tokens.SortCode":"{{ outputData.sortCode }}",
                                                               "tokens.Txn_Time":"{{ FORMAT_DATE(NOW(), \"HH:mm:ss\") }}",
                                                               "tokens.X_DATA_PN":"35383",
                                                               "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
                                                               "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
                                                               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
                                                               "tokens.paymentCode":"1",
                                                               "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                                               "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
                                                               "tokens.versionNumber":"1",
                                                               "value":"0",
                                                               "valueInPence":"0",
                                                               "voidable":"true"
                                                            },
                                                            "type":"complete"
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "productNo":"48914",
                                       "receiptNotice":"In the event of a query on this deposit \u003cbr\u003eplease contact Adam24 on 0131 278 3777"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code {{ outputData.sortCode }} and Account Number {{ outputData.accountNumber }} is not valid for Personal Banking.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account number",
                        "type":"input"
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort code",
                  "type":"input"
               }
            ],
            "outputData":{
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "product":"{{ inputData.enablers.product }}"
            },
            "type":"condition"
         }
      ],
      "Item39208":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"0.00",
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Amount is required."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.maximumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.amount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"re-enter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirmed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"re-enter",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirmed",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "enablers":[
                                             {
                                                "action":"print",
                                                "id":"printCustomerReceipt",
                                                "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                                "name":"printer",
                                                "params":{
                                                   "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                                                },
                                                "stepEvent":"onMatch"
                                             }
                                          ],
                                          "expected":"1",
                                          "given":"1",
                                          "nodes":[
                                             {
                                                "basket":{
                                                   "id":"{{ outputData.itemName }}"
                                                },
                                                "transaction":{
                                                   "entryType":"banking",
                                                   "itemID":"{{ outputData.itemID }}",
                                                   "quantity":"1",
                                                   "quantityFixed":"true",
                                                   "receiptLine":"1",
                                                   "tokens.ACC_NO":"{{ outputData.ACC_NO }}",
                                                   "tokens.APTransactionReference":"0001",
                                                   "tokens.CASH_AMT":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                                   "tokens.NSC":"{{ outputData.NSC }}",
                                                   "tokens.TRANS_DESC":"{{ outputData.TRANS_DESC }}",
                                                   "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                                                   "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                                                   "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                                                   "tokens.paymentCode":"1",
                                                   "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                                   "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                                                   "tokens.versionNumber":"1",
                                                   "value":"{{ outputData.amount }}",
                                                   "valueInPence":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                                   "voidable":"true"
                                                },
                                                "type":"complete"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "ACC_NO":"{{ outputData.barcodeSplit[3] }}",
                                       "NSC":"90{{ outputData.barcodeSplit[2] }}",
                                       "TRANS_DESC":"{{ outputData.barcodeSplit[4] }}"
                                    },
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "amount":"{{ inputData.inputValue }}",
               "barcodeSplit":"{{ REGEXP_SPLIT(\"{{ outputData.Rref }}\", \"^(\\w{8})(\\w{4})(\\w{8})(\\w{7})(\\w{1})\") }}"
            },
            "title":"Amount",
            "type":"input",
            "unit":{
               "position":"left",
               "type":"text",
               "value":"£"
            }
         }
      ],
      "Item49011":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"0.00",
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "format":{
                     "message":"Amount is required.",
                     "notMatch":"^0.00$"
                  }
               },
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Amount is required."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.maximumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.amount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"re-enter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirmed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"re-enter",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirmed",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"print",
                                          "id":"printCustomerReceipt",
                                          "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                          "name":"printer",
                                          "params":{
                                             "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "basket":{
                                             "id":"{{ outputData.itemName }}"
                                          },
                                          "transaction":{
                                             "entryType":"banking",
                                             "itemID":"{{ outputData.itemID }}",
                                             "quantity":"1",
                                             "quantityFixed":"true",
                                             "receiptLine":"1",
                                             "tokens.APTransactionReference":"0001",
                                             "tokens.Amount":"{{outputData.amount}}",
                                             "tokens.X_DATA_PN":"{{ outputData.ProdNo }}",
                                             "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                                             "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                                             "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                                             "tokens.paymentCode":"1",
                                             "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                             "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                                             "tokens.versionNumber":"1",
                                             "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
                                             "value":"{{ outputData.amount }}",
                                             "valueInPence":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                             "voidable":"true"
                                          },
                                          "type":"complete"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "amount":"{{ inputData.inputValue }}"
            },
            "title":"Amount",
            "type":"input",
            "unit":{
               "position":"left",
               "type":"text",
               "value":"£"
            }
         }
      ],
      "Item49078":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"0.00",
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Amount is required."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.maximumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.amount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"re-enter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirmed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"re-enter",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirmed",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"print",
                                          "id":"printCustomerReceipt",
                                          "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                          "name":"printer",
                                          "params":{
                                             "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "basket":{
                                             "id":"{{ outputData.itemName }}"
                                          },
                                          "transaction":{
                                             "entryType":"banking",
                                             "itemID":"{{ outputData.itemID }}",
                                             "quantity":"1",
                                             "quantityFixed":"true",
                                             "receiptLine":"1",
                                             "tokens.APTransactionReference":"0001",
                                             "tokens.Amount":"{{ outputData.amount }}",
                                             "tokens.X_DATA_PN":"{{ outputData.ProdNo }}",
                                             "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                                             "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                                             "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                                             "tokens.paymentCode":"1",
                                             "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                             "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                                             "tokens.versionNumber":"1",
                                             "value":"{{ outputData.amount }}",
                                             "voidable":"true"
                                          },
                                          "type":"complete"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "amount":"{{ inputData.inputValue }}"
            },
            "title":"Amount",
            "type":"input",
            "unit":{
               "position":"left",
               "type":"text",
               "value":"£"
            }
         }
      ],
      "Item49081":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"0.00",
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "format":{
                     "message":"Amount is required.",
                     "notMatch":"^0.00$"
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.maximumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.amount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"re-enter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirmed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"re-enter",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirmed",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"print",
                                          "id":"printCustomerReceipt",
                                          "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                          "name":"printer",
                                          "params":{
                                             "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "basket":{
                                             "id":"{{ outputData.itemName }}"
                                          },
                                          "transaction":{
                                             "entryType":"banking",
                                             "itemID":"{{ outputData.itemID }}",
                                             "quantity":"1",
                                             "quantityFixed":"true",
                                             "receiptLine":"1",
                                             "tokens.APTransactionReference":"0001",
                                             "tokens.Amount":"{{outputData.amount}}",
                                             "tokens.X_DATA_PN":"{{ outputData.ProdNo }}",
                                             "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                                             "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                                             "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                                             "tokens.paymentCode":"1",
                                             "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                             "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                                             "tokens.versionNumber":"1",
                                             "value":"{{ outputData.amount }}",
                                             "valueInPence":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                             "voidable":"true"
                                          },
                                          "type":"complete"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "amount":"{{ inputData.inputValue }}"
            },
            "title":"Amount",
            "type":"input",
            "unit":{
               "position":"left",
               "type":"text",
               "value":"£"
            }
         }
      ],
      "Item49082":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"0.00",
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "format":{
                     "message":"Amount is required.",
                     "notMatch":"^0.00$"
                  }
               },
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Amount is required."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.maximumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.amount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"re-enter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirmed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"re-enter",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirmed",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"print",
                                          "id":"printCustomerReceipt",
                                          "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                          "name":"printer",
                                          "params":{
                                             "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "basket":{
                                             "id":"{{ outputData.itemName }}"
                                          },
                                          "transaction":{
                                             "entryType":"banking",
                                             "itemID":"{{ outputData.itemID }}",
                                             "quantity":"1",
                                             "quantityFixed":"true",
                                             "receiptLine":"1",
                                             "tokens.APTransactionReference":"0001",
                                             "tokens.Amount":"{{outputData.amount}}",
                                             "tokens.X_DATA_PN":"{{ outputData.ProdNo }}",
                                             "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                                             "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                                             "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                                             "tokens.paymentCode":"1",
                                             "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                             "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                                             "tokens.versionNumber":"1",
                                             "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
                                             "value":"{{ outputData.amount }}",
                                             "valueInPence":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                             "voidable":"true"
                                          },
                                          "type":"complete"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "amount":"{{ inputData.inputValue }}"
            },
            "title":"Amount",
            "type":"input",
            "unit":{
               "position":"left",
               "type":"text",
               "value":"£"
            }
         }
      ],
      "Item9201":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"Barcode",
            "inputMask":"alphanumeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^[A][A-Za-z0-9]{3,20}$",
                     "message":"2nd barcode should be alphanumeric and between 4-21 characters."
                  },
                  "required":{
                     "message":"2nd barcode is required"
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "numericality":{
                           "lte":"{{ outputData.maximumValue }}",
                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                        }
                     },
                     {
                        "field":"inputValue",
                        "numericality":{
                           "gte":"{{ outputData.minimumValue }}",
                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"0.00",
                        "inputMask":"currency",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Amount is required."
                              }
                           },
                           {
                              "confirmation":{
                                 "message":"The amounts entered mismatch. Please re-key.",
                                 "value":"{{ outputData.amount }}"
                              },
                              "field":"inputValue"
                           }
                        ],
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Re-enter",
                                    "value":"re-enter",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Confirm",
                                    "value":"confirmed",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"re-enter",
                                    "given":"{{ outputData.action }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":4,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"confirmed",
                                    "given":"{{ outputData.action }}",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "enablers":[
                                             {
                                                "action":"print",
                                                "id":"printCustomerReceipt",
                                                "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                                                "name":"printer",
                                                "params":{
                                                   "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                                                },
                                                "stepEvent":"onMatch"
                                             }
                                          ],
                                          "expected":"1",
                                          "given":"1",
                                          "nodes":[
                                             {
                                                "basket":{
                                                   "id":"{{ outputData.itemName }}"
                                                },
                                                "transaction":{
                                                   "entryType":"banking",
                                                   "itemID":"{{ outputData.itemID }}",
                                                   "quantity":"1",
                                                   "quantityFixed":"true",
                                                   "receiptLine":"1",
                                                   "tokens.APTransactionReference":"0001",
                                                   "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                                                   "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                                                   "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                                                   "tokens.paymentCode":"1",
                                                   "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                                   "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                                                   "tokens.versionNumber":"1",
                                                   "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
                                                   "value":"{{ outputData.amount }}",
                                                   "valueInPence":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                                                   "voidable":"true"
                                                },
                                                "type":"complete"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "action":"{{ inputData.action }}"
                              },
                              "title":"Confirm Deposit amount",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "title":"Re-Enter Amount",
                        "type":"input",
                        "unit":{
                           "position":"left",
                           "type":"text",
                           "value":"£"
                        }
                     }
                  ],
                  "outputData":{
                     "amount":"{{ inputData.inputValue }}"
                  },
                  "title":"Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "secondBarcode":"{{ inputData.inputValue }}"
            },
            "title":"Scan or enter 2nd barcode",
            "type":"input"
         }
      ],
      "Labels2Go":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"parseQrCode",
                  "id":"qrcodeParsor",
                  "loadingMessage":"Parsing QR code",
                  "name":"qrcodeParsor",
                  "params":{
                     "barcode":"{{ outputData.TD }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "enablers":[
                     {
                        "action":"tokenise",
                        "id":"tokeniser",
                        "loadingMessage":"Tokenising data",
                        "name":"tokeniser",
                        "params":{
                           "barcode":"{{ outputData.parsedQRcode.barcode }}"
                        },
                        "stepEvent":"onMatch"
                     }
                  ],
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "enablers":[
                           {
                              "action":"getProduct",
                              "id":"getProduct",
                              "loadingMessage":"Fetching product information",
                              "name":"RMProductLookup",
                              "params":{
                                 "parsedBarcode":"{{ outputData.parsedBarcode }}",
                                 "parsedQRcode":"{{ outputData.parsedQRcode }}"
                              },
                              "stepEvent":"onMatch"
                           }
                        ],
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "name":"labels2GoMinimalAddressValidation",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "productResponse":"{{ inputData.enablers.getProduct }}",
                           "returnsMaxWeight":"{{ inputData.enablers.getProduct.Area.MaxWeight }}"
                        },
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "parsedBarcode":"{{ inputData.enablers.tokeniser }}"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "parsedQRcode":"{{ inputData.enablers.qrcodeParsor }}"
            },
            "type":"condition"
         }
      ],
      "LloydsManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149003",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required"
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"({{ outputData.allowedSortCodes }})$",
                           "message":"This transaction is not supported at Post Office, please refer customer to their bank."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^(?!({{ outputData.excludedSortCodes }})$)",
                           "message":"This transaction is not supported at the Post Office. Please refer customer to their bank."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              },
                              "required":{
                                 "message":"Account number is required"
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "comparison":"matchregexp",
                                                            "expected":"(^{{ outputData.customDepositLimitTranCodes }})$",
                                                            "given":"{{ outputData.tranCode }}",
                                                            "nodes":[
                                                               {
                                                                  "name":"LloydsManualCashDeposit-Stage-2-Post-HOCA-Field-Entry",
                                                                  "type":"subJourney"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "HOCACode":" ",
                                                               "barcodeInfo.maximumValue":"1000.00"
                                                            },
                                                            "type":"condition"
                                                         },
                                                         {
                                                            "comparison":"matchregexp",
                                                            "expected":"{{ outputData.tranCode }}",
                                                            "given":"^(85)$",
                                                            "nodes":[
                                                               {
                                                                  "name":"LloydsManualCashDeposit-Stage-2-Post-HOCA-Field-Entry",
                                                                  "type":"subJourney"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "HOCACode":" "
                                                            },
                                                            "type":"condition"
                                                         },
                                                         {
                                                            "comparison":"eq",
                                                            "expected":"1",
                                                            "given":"1",
                                                            "nodes":[
                                                               {
                                                                  "description":"Enter",
                                                                  "inputMask":"alphanumeric",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "required":{
                                                                           "message":"HOCA code is required."
                                                                        }
                                                                     },
                                                                     {
                                                                        "field":"inputValue",
                                                                        "format":{
                                                                           "match":"^[0-9]{1,18}$",
                                                                           "message":"HOCA code must be 1-18 digits in length."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"Enter",
                                                                        "inputMask":"alphanumeric",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"HOCA code is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"Please enter the same HOCA code.",
                                                                                 "value":"{{ outputData.HOCACode }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "name":"LloydsManualCashDeposit-Stage-2-Post-HOCA-Field-Entry",
                                                                              "type":"subJourney"
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter HOCA",
                                                                        "type":"input"
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "HOCACode":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"HOCA",
                                                                  "type":"input"
                                                               }
                                                            ],
                                                            "type":"condition"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "PCA":"0",
               "allowedSortCodes":"(77[0-9]{4}$)|(87[0-9]{4}$)|(30[0-9]{4}$)",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "customDepositLimitTranCodes":"84",
               "excludedSortCodes":"111307|121318|122130|126000|126001|126002|126003|126004|126005|126006|126007|126008|126009|126010|126011|126012|126014|126020|126021|126030|126031|126032|126033|126034|126035|126036|126037|126038|126039|126040|126041|126042|126046|126050|126051|126052|126053|126054|126060|126070|300027|300030|300034|300045|300050|300051|300053|300055|300056|300057|300058|300059|300066|300072|300076|300079|300080|300081|300083|300084|300085|300087|300088|300089|300097|300098|300103|300114|300120|300125|300127|300128|300129|300140|300141|300142|300143|300144|300146|300147|300151|300173|300174|300190|300195|300196|300197|300198|300199|300231|300308|300316|300333|300354|300363|300381|300395|300456|301001|301012|301022|301027|301047|301049|301058|301061|301075|301076|301112|301114|301139|301142|301143|301154|301155|301166|301170|301174|301234|301234|301242|301275|301281|301295|301301|301309|301342|301350|301352|301353|301376|301393|301400|301419|301433|301435|301439|301443|301456|301458|301463|301466|301469|301473|301474|301482|301485|301486|301487|301495|301510|301514|301517|301519|301525|301542|301542|301561|301573|301607|301627|301629|301631|301635|301655|301657|301658|301664|301696|301696|301700|301700|301705|301757|301777|301785|301795|301809|301816|301816|301816|301825|301869|301869|301869|301869|301898|301901|301902|301903|302581|302581|302581|302581|302581|302581|302582|302582|302583|302583|302583|302584|302585|302585|302585|302585|302586|302586|302586|302587|302587|302588|302589|302589|302795|302870|302873|302874|302875|304013|304014|304015|304159|304400|305735|305907|305908|305909|305910|305911|305912|305913|305914|305915|305916|305917|305918|305919|305920|305921|305922|305923|305924|305925|305926|305927|305928|305929|305930|305931|305932|305933|305934|305935|305936|305937|305938|305939|305941|305942|305943|305944|305945|305946|305947|305948|305949|305950|305951|305952|305953|305954|305955|305956|305957|305958|305959|305960|305971|305974|305978|305982|305984|305985|305986|305988|305990|305991|305992|306045|306150|306151|306153|306154|306155|306181|306182|306183|306184|306185|306186|306187|306196|306273|306412|306414|306434|306539|306572|306592|306695|306748|306749|306759|306789|307184|307271|307688|307742|308026|308085|308087|308097|308422|308434|308448|308452|308469|308472|308789|308957|309004|309006|309015|309018|309024|309050|309050|309059|309059|309062|309074|309095|309100|309100|309121|309122|309141|309143|309150|309150|309162|309193|309204|309210|309243|309272|309276|309303|309315|309322|309322|309329|309329|309340|309341|309344|309366|309367|309370|309370|309372|309372|309375|309382|309388|309388|309424|309424|309425|309426|309426|309434|309434|309446|309453|309460|309475|309490|309503|309519|309526|309534|309548|309548|309552|309557|309566|309576|309576|309576|309588|309588|309608|309625|309628|309628|309629|309633|309633|309660|309666|309667|309686|309714|309720|309735|309755|309755|309755|309776|309780|309780|309780|309797|309803|309814|309822|309823|309843|309846|309846|309846|309846|309849|309852|309870|309904|309910|309911|309919|309919|309927|309958|309965|309968|309974|770104|770204|770210|770404|770511|770515|770601|770605|770606|770702|770703|770705|770709|770806|770811|770905|770907|770909|770919|771003|771005|771101|771102|771104|771202|771218|771221|771227|771228|771229|771302|771304|771315|771405|771413|771414|771501|771503|771601|771706|771707|771708|771709|771710|771714|771716|771723|771733|771741|771745|771909|771910|771913|771915|771918|771925|771927|771937|771941|771946|771955|771956|771957|772004|772005|772007|772009|772010|772016|772017|772020|772022|772024|772033|772035|772036|772037|772053|772054|772055|772057|772058|772060|772114|772201|772208|772210|772214|772216|772219|772222|772224|772229|772235|772241|772243|772305|772506|772601|772603|772605|772606|772608|772610|772614|772616|772617|772620|772626|772627|772628|772630|772702|772708|772710|772719|772725|772727|772730|772901|772903|772905|772907|772910|772911|772929|772931|772932|772933|772934|772936|772947|772948|772949|772953|772962|772978|772979|772984|772989|772995|772996|772997|772998|773002|773018|773022|773029|773032|773033|773037|773038|773039|773040|773041|773042|773043|773044|773045|773046|773047|773054|773101|773104|773202|773205|773212|773303|773310|773475|773476|774336|774802|774803|774806|774808|774814|774816|774818|774827|774831|774832|774927|775003|775011|775023|775027|775035|775106|775114|775116|775118|775603|775606|775612|775670|775701|775702|775703|775704|775801|775809|775813|775815|775904|776202|776205|776212|776301|776333|776400|776493|776499|776501|776502|776505|776507|776517|776518|776548|776557|776569|776576|776580|776582|776587|776591|776594|776595|776596|776597|776598|776599|776602|776603|776610|776625|776629|776630|776638|776644|776652|776662|776663|776664|776665|776668|776669|776671|776672|776673|776674|776709|776713|776715|776716|776717|776719|776803|776805|776806|776813|776815|776817|776821|776822|776826|776829|776830|776831|776832|776833|776834|776835|776836|776837|776838|776839|776841|776844|776845|776846|776848|776849|776850|776851|776852|776853|776854|776855|776856|776857|776858|776859|776862|776863|776864|776874|776875|776876|776877|776878|776879|776880|776881|776882|776886|776888|776889|776893|776920|776937|776938|776939|776950|776966|776967|776968|776969|776995|776996|776997|776998|776999|777017|777029|777043|777048|777050|777058|777059|777060|777061|777064|777067|777068|777069|777070|777072|777073|777074|777075|777076|777077|777095|777096|777101|777104|777105|777106|777107|777110|777112|777113|777114|777116|777119|777125|777133|777135|777136|777140|777141|777146|777147|777148|777149|777150|777153|777154|777155|777158|777162|777163|777169|777170|777171|777173|777202|777203|777211|777212|777217|777218|777221|777224|777234|777239|777241|777243|777258|777260|777261|777262|777263|777264|777265|777266|777267|777268|777269|777270|777272|777273|777275|777276|777277|777311|777402|777406|777415|777422|777436|777438|777439|777459|777528|777602|777603|777607|777608|777613|777615|777618|777619|777624|777627|777628|777635|777668|777678|777681|777903|777910|777912|777913|777916|778111|778241|778272|778507|778509|778511|778518|778530|778537|778539|778540|778541|778544|778545|778555|778566|778568|778571|778589|778712|779111|779114|779119|779121|779127|779134|779138|779140|779142|779147|779149|779150|779153|779154|779158|779163|779164|779169|779503|779513|872635|872636|872639|872644|872645|872646|872647|872648|872649|872693|872694|872695|872696|872697|872743|872746|872773|872792|873400|873401|873402|873403|873404|873405|873406|873407|873408|873410|873411|873412|873413|873414|873415|873416|873417|873418|873419|873420|873421|873422|873423|873424|873425|873427|873428|873429|873430|873432|873433|873434|873435|873436|873437|873438|873439|873440|873441|873443|873444|873445|873446|873447|873448|873449|873450|873451|873452|873453|873454|873455|873466|873467|873701|873705|873706|873707|873708|873710|873711|873712|873713|873714|873715|873716|873717|873718|873719|873720|873721|873722|873725|873726|873727|873728|873729|873731|873732|873733|873734|873735|873736|873737|873738|873739|873740|873741|873742|873743|873744|873745|873746|873747|873748|873749|873750|873751|873752|873753|873754|873755|873756|873757|873759|873760|873763|873764|873765|873766|873767|873768|873769|873770|873771|873772|873774|873775|873776|873777|873790|873799|873901|873902|873903|873904|873905|873906|873907|873953|874016|874017|874018|874221|874231|874234|874301|874302|874303|874304|874305|874306|874307|874308|874309|874310|874311|874312|874313|874316|874350|874351|874356|874358|874360|874362|874401|874401|874404|874405|874406|874407|874408|874409|874411|874414|874415|874431|874644|874645|876401|876402|876404|876405|876406|876408|876488|876489|876491|876801|876804|876807|876808|876810|876811|876812|876814|876816|876818|876819|876820|876823|876824|876825|876827|876828|876840|876842|876843|876847|876860|876861|876883|876884|876885|876887|876890|876891|876892|876894|876895|876896|876919|876921|876922|876923|876924|876925|876926|876927|876928|876929|876930|876931|876932|876934|876935|876957|876961|876962|876963|876964|876965|877001|877002|877003|877004|877005|877006|877007|877008|877009|877010|877011|877012|877014|877015|877016|877018|877019|877020|877021|877022|877023|877024|877025|877026|877027|877028|877030|877031|877032|877033|877034|877035|877037|877039|877041|877042|877044|877045|877046|877047|877052|877053|877054|877055|877056|877057|877062|877063|877066|877071|877078|877790|877791|877901|877902|877904|877905|877907|877908|877909|877911|877914|877915|877931|878811|878853|878858|878864",
               "expectedBankNames":"LLOYDS|Lloyds|lloyds"
            },
            "type":"condition"
         }
      ],
      "LloydsManualCashDeposit-Stage-2-Post-HOCA-Field-Entry":[
         {
            "description":"Enter",
            "inputMask":"alphanumeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Serial number is required."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^[0-9]{6,6}$",
                     "message":"Serial Number must be 6 digits in length."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "numericality":{
                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"0.00",
                        "inputMask":"currency",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Amount is required."
                              }
                           },
                           {
                              "confirmation":{
                                 "message":"The amounts entered mismatch. Please re-key.",
                                 "value":"{{ outputData.inputAmount }}"
                              },
                              "field":"inputValue"
                           }
                        ],
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Re-enter",
                                    "value":"reenter",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Confirm",
                                    "value":"confirm",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"reenter",
                                    "given":"{{ outputData.actions.inputGroup }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":4,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"confirm",
                                    "given":"{{ outputData.actions.inputGroup }}",
                                    "nodes":[
                                       {
                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.inputGroup":"{{ inputData.action }}"
                              },
                              "title":"Confirm Deposit amount",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left",
                                 "transition":false
                              }
                           }
                        ],
                        "title":"Re-Enter Amount",
                        "type":"input",
                        "unit":{
                           "position":"left",
                           "type":"text",
                           "value":"£"
                        }
                     }
                  ],
                  "outputData":{
                     "inputAmount":"{{ inputData.inputValue }}"
                  },
                  "title":"Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "serialNo":"{{ inputData.inputValue }}"
            },
            "title":"Serial Number",
            "type":"input"
         }
      ],
      "Lloyds_ChangeGiving":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510156112",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Ok",
                        "value":"ok"
                     }
                  ],
                  "description":"Please ensure the customer has provided their business debit card or business deposit card showing sort code and account number.",
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Cancel",
                              "value":"cancel",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Continue",
                              "value":"continue",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"Accept only notes for this transaction.",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"{{ outputData.action }}",
                              "given":"continue",
                              "nodes":[
                                 {
                                    "description":"Lloyds Bank",
                                    "title":"Bank name",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.Rref }}",
                                    "title":"PAN",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                                    "title":"Client name",
                                    "type":"info"
                                 },
                                 {
                                    "description":"{{ outputData.barcodeInfo.longName }}",
                                    "title":"Description",
                                    "type":"info"
                                 },
                                 {
                                    "description":"Enter",
                                    "inputMask":"alphanumeric",
                                    "inputValidation":[
                                       {
                                          "field":"inputValue",
                                          "required":{
                                             "message":"Sort code is required."
                                          }
                                       },
                                       {
                                          "field":"inputValue",
                                          "format":{
                                             "match":"^[0-9]{6}$",
                                             "message":"Bank Sort Code must be 6 digits in length. Please Note: This is the Account not Card Number."
                                          }
                                       }
                                    ],
                                    "nodes":[
                                       {
                                          "description":"Enter",
                                          "inputMask":"alphanumeric",
                                          "inputValidation":[
                                             {
                                                "field":"inputValue",
                                                "required":{
                                                   "message":"Account number is required"
                                                }
                                             },
                                             {
                                                "field":"inputValue",
                                                "format":{
                                                   "match":"^[0-9]{8}$",
                                                   "message":"Account Numbers must be 8 digits in length. If less than 8 digits, add zeros to the beginning of the account number so that it is 8 digits long."
                                                }
                                             }
                                          ],
                                          "nodes":[
                                             {
                                                "actions":[
                                                   {
                                                      "title":"Cancel",
                                                      "value":"cancel",
                                                      "visual":{
                                                         "view":"secondary"
                                                      }
                                                   },
                                                   {
                                                      "title":"Continue",
                                                      "value":"continue",
                                                      "visual":{
                                                         "view":"primary"
                                                      }
                                                   }
                                                ],
                                                "description":"Confirm that the customer is a {{ outputData.bankShortName }} customer.\n\nClick Continue to proceed, or Cancel to abort transaction.",
                                                "nodes":[
                                                   {
                                                      "comparison":"eq",
                                                      "expected":"{{ outputData.action }}",
                                                      "given":"continue",
                                                      "nodes":[
                                                         {
                                                            "defaultValues":{
                                                               "inputValue":"0.00"
                                                            },
                                                            "inputMask":"currency",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "numericality":{
                                                                     "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                     "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "comparison":"eq",
                                                                  "enablers":[
                                                                     {
                                                                        "action":"print",
                                                                        "id":"printCustomerReceipt",
                                                                        "loadingMessage":"Printing change giving receipt.",
                                                                        "name":"printer",
                                                                        "params":{
                                                                           "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e* { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px; } table { width: 100% } table tbody { vertical-align: top; } .no-padding h1, h2, h3, p { margin: 0; padding: 0; } h1 { font-size: 32px; } h2 { font-size: 28px; } h3 { font-size: 24px; } .text-center { text-align: center; } hr { width: 100%; border: 0; height: 1px; background-color: #ccc; }\u003c/style\u003e\u003c/head\u003e\u003cbody\u003e \u003cdiv class=\"text-center no-padding\"\u003e \u003ch1\u003ePost Office Ltd.\u003c/h1\u003e \u003ch3\u003ewww.postoffice.co.uk\u003c/h3\u003e \u003c/div\u003e \u003chr /\u003e \u003cdiv class=\"no-padding\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }} \u003cbr\u003e{{ appData.device.branchName }} \u003cbr\u003e{{ appData.device.branchAddress }} \u003cbr\u003e{{ appData.device.branchPostcode }} \u003c/td\u003e \u003ctd\u003eTP: {{ appData.device.nodeID }} \u003cbr\u003eFAD: {{ appData.device.branchID }} \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003chr /\u003e \u003cp\u003eSession Id: TBC\u003c/p\u003e \u003cp\u003eTxn Id: TBC\u003c/p\u003e \u003cp\u003eClient: {{ outputData.barcodeInfo.ClientAccName }}\u003c/p\u003e \u003cp\u003eScheme: {{ outputData.barcodeInfo.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}\u003c/p\u003e \u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e \u003cp\u003eRef: {{ outputData.barcodeInfo.Rref }}\u003c/p\u003e \u003cp\u003eAmount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"\") }} Cash\u003c/p\u003e  \u003cp\u003eProduct No: {{ outputData.barcodeInfo.ProdNo }}\u003c/p\u003e \u003c/div\u003e\u003chr /\u003e \u003c/div\u003e \u003cdiv class=\"text-center\"\u003e \u003cp\u003eThis is not a VAT receipt.\u003c/p\u003e \u003c/div\u003e \u003chr /\u003e \u003c/body\u003e\u003c/html\u003e"
                                                                        },
                                                                        "stepEvent":"onMatch"
                                                                     },
                                                                     {
                                                                        "action":"objectsToArray",
                                                                        "id":"createdAdditionalItems",
                                                                        "name":"payloadTransform",
                                                                        "params":{
                                                                           "1":{
                                                                              "itemID":"45619",
                                                                              "quantity":"1",
                                                                              "receiptLine":"1",
                                                                              "value":"{{ outputData.amount }}"
                                                                           }
                                                                        },
                                                                        "stepEvent":"onMatch"
                                                                     }
                                                                  ],
                                                                  "expected":"1",
                                                                  "given":"1",
                                                                  "nodes":[
                                                                     {
                                                                        "basket":{
                                                                           "id":"{{ outputData.barcodeInfo.longName }}"
                                                                        },
                                                                        "transaction":{
                                                                           "additionalItems":"{{ outputData.additionalItems }}",
                                                                           "entryType":"banking",
                                                                           "itemID":"{{ outputData.barcodeInfo.ProdNo }}",
                                                                           "quantity":"1",
                                                                           "quantityFixed":"true",
                                                                           "receiptLine":"1",
                                                                           "tokens.APTransactionReference":"0001",
                                                                           "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                                                                           "tokens.BRANCHNAME":"{{ appData.device.branchName }}",
                                                                           "tokens.CHNG":"{{ outputData.amount }}",
                                                                           "tokens.DATE":"{{ FORMAT_DATE(NOW(), \"DD/MM/YY\") }}",
                                                                           "tokens.FADCODE":"{{ appData.device.branchID }}",
                                                                           "tokens.PCA":"TBC",
                                                                           "tokens.SortCode":"{{ outputData.sortCode }}",
                                                                           "tokens.TIME":"{{ FORMAT_DATE(NOW(), \"HH:mm:ss\") }}",
                                                                           "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
                                                                           "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
                                                                           "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
                                                                           "tokens.paymentCode":"1",
                                                                           "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                                                                           "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
                                                                           "tokens.versionNumber":"1",
                                                                           "value":"0",
                                                                           "valueInPence":"0",
                                                                           "voidable":"true"
                                                                        },
                                                                        "type":"complete"
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "additionalItems":"{{ inputData.enablers.createdAdditionalItems }}"
                                                                  },
                                                                  "type":"condition"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "amount":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Enter total change required",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   },
                                                   {
                                                      "comparison":"eq",
                                                      "expected":"{{ outputData.action }}",
                                                      "given":"cancel",
                                                      "nodes":[
                                                         {
                                                            "type":"abort"
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   }
                                                ],
                                                "outputData":{
                                                   "action":"{{ inputData.action }}"
                                                },
                                                "title":"Confirm Bank selection",
                                                "type":"prompt",
                                                "visual":{
                                                   "actionAlignment":"left"
                                                }
                                             }
                                          ],
                                          "outputData":{
                                             "accountNumber":"{{ inputData.inputValue }}"
                                          },
                                          "title":"Account number",
                                          "type":"input"
                                       }
                                    ],
                                    "outputData":{
                                       "sortCode":"{{ inputData.inputValue }}"
                                    },
                                    "title":"Enter sort code",
                                    "type":"input"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"{{ outputData.action }}",
                              "given":"cancel",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Information",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Action Required",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"right"
                  }
               }
            ],
            "outputData":{
               "bankShortName":"Lloyds Bank",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}"
            },
            "type":"condition"
         }
      ],
      "LoqateAbortError":[
         {
            "actions":[
               {
                  "title":"Ok",
                  "value":"ok",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"{{ outputData.loqateError.description }}",
            "nodes":[
               {
                  "type":"abort"
               }
            ],
            "title":"{{ outputData.loqateError.title }}",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left"
            }
         }
      ],
      "ManualCashDeposit-PrintAndAddToBasket":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"print",
                  "id":"printCustomerReceipt",
                  "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                  "name":"printer",
                  "params":{
                     "value":"\u003chtml\u003e \u003chead\u003e \u003cstyle\u003e * { font-family: \"monospace\" } body, tr, td, span, p, ul, li, div { font-size: 24px } table { width: 100% } table tbody { vertical-align: top } .no-padding h1, h2, h3, p { margin: 0; padding: 0 } h1 { font-size: 32px } h2 { font-size: 28px } h3 { font-size: 24px } .text-center { text-align: center } hr { width: 100%; border: 0; height: 1px; background-color: #ccc } \u003c/style\u003e\r\n \u003c/head\u003e \u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n \u003chr /\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n \u003chr /\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.barcodeInfo.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003e Scheme: {{ outputData.barcodeInfo.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.barcodeInfo.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003e Token Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.barcodeInfo.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"\") }} Cash\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.barcodeInfo.ProdNo }}\u003c/p\u003e\r\n \u003chr /\u003e\r\n\u003cp\u003eSort Code: {{ outputData.sortCode }}\u003c/p\u003e\r\n\u003cp\u003eAccount Number: {{ outputData.accountNumber }}\u003c/p\u003e \r\n\u003cp\u003eSerial Number: {{ outputData.serialNo }}\u003c/p\u003e\r\n\u003cp\u003eTran Code: {{ outputData.tranCode }}\u003c/p\u003e\r\n\u003cp\u003eHOCA Code: {{ outputData.HOCACode }}\u003c/p\u003e\r\n \u003c/div\u003e\r\n \u003chr /\u003e\r\n\u003cdiv class=\"text-center\"\u003e\r\n\t\u003cp\u003ePLEASE KEEP THIS RECEIPT SAFE UNTIL YOU ARE CERTAIN YOUR ACCOUNT HAS BEEN UPDATED.\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003chr /\u003e\r\n\u003cdiv class=\"text-center\"\u003e\r\n\t\u003cp\u003eThis is not a VAT receipt\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n \u003chr /\u003e\r\n \u003c/div\u003e\r\n \u003c/body\u003e \u003c/html\u003e"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "basket":{
                     "id":"{{ outputData.barcodeInfo.mediumName }}"
                  },
                  "transaction":{
                     "entryType":"banking",
                     "itemID":"{{ outputData.barcodeInfo.itemID }}",
                     "quantity":"1",
                     "quantityFixed":"true",
                     "receiptLine":"1",
                     "tokens.APTransactionReference":"0001",
                     "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                     "tokens.HOCA":"{{ outputData.HOCACode }}",
                     "tokens.PCA":"{{ outputData.PCA }}",
                     "tokens.SerialNo":"{{ outputData.serialNo }}",
                     "tokens.SortCode":"{{ outputData.sortCode }}",
                     "tokens.TranCode":"{{ outputData.tranCode }}",
                     "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
                     "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
                     "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
                     "tokens.paymentCode":"1",
                     "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                     "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
                     "tokens.versionNumber":"1",
                     "value":"{{ outputData.inputAmount }}",
                     "valueInPence":"{{ MULTIPLY(\"{{ outputData.inputAmount }}\", \"100\") }}",
                     "voidable":"true"
                  },
                  "type":"complete"
               }
            ],
            "type":"condition"
         }
      ],
      "NatwestManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149101",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^(?!({{ outputData.excludedSortCodes }})$)",
                           "message":"This transaction is not supported at the Post Office. Please refer customer to their bank."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "comparison":"matchregexp",
                                                            "expected":"{{ outputData.sortCode }}",
                                                            "given":"^({{ outputData.HOCAFieldRequiredForSortCodes }})$",
                                                            "nodes":[
                                                               {
                                                                  "description":"Enter",
                                                                  "inputMask":"alphanumeric",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "required":{
                                                                           "message":"HOCA code is required."
                                                                        }
                                                                     },
                                                                     {
                                                                        "field":"inputValue",
                                                                        "format":{
                                                                           "match":"^[0-9]{1,18}$",
                                                                           "message":"HOCA code must be 1-18 digits in length."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"Enter",
                                                                        "inputMask":"alphanumeric",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"HOCA code is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"Please enter the same HOCA code.",
                                                                                 "value":"{{ outputData.HOCACode }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "name":"NatwestManualCashDeposit-PostHOCAFieldEntry",
                                                                              "type":"subJourney"
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter HOCA",
                                                                        "type":"input"
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "HOCACode":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"HOCA",
                                                                  "type":"input"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "HOCAFieldRequired":"true"
                                                            },
                                                            "type":"condition"
                                                         },
                                                         {
                                                            "comparison":"eq",
                                                            "expected":"1",
                                                            "given":"1",
                                                            "nodes":[
                                                               {
                                                                  "name":"NatwestManualCashDeposit-PostHOCAFieldEntry",
                                                                  "type":"subJourney"
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "HOCACode":" "
                                                            },
                                                            "type":"condition"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCAFieldRequired":"false",
               "HOCAFieldRequiredForSortCodes":"621118|622899|622206|622202|622203|622204|622207|622205|622201|622800|622979|622505|622981|623175|622751|621169|622197|621880|622735|622736|622937|622938|622889|622948|622993|622994|621894|623142|622773|623092|621797|623147|622370|622573|622928|623080|622943|623190|622850|622647|622833|622591|622826|622824|622825|622139|621112|623099|623094|623101|622259|623122|622094|622862|622863|622476|623100|623098|623197|622546|622808|621169|622953|622848|623037|622976|623105|623059|623063|623061|623058|623060|623062|623104|623109|623106|622973|622198|621208|622526|623171|621895|622159|622055|622859|622860|622541|622395|623013|622951|622230|622238|623144|622487|622968|622978|622980|622967|622974|622977|623065|623067|623069|623064|623066|623068|621161|622763|622885|622831|622886|622884|623143|623198|623199|623200|623201|623202|623203|623204|623205|623206|623207|623208|623209|623210|623211|623212|623213|623214|623215|623216|623217|623218|623219|623220|623221|623222|623223|623224|623225|623226|623227|623228|623229|623230|623231|623232|623233|623234|623235|623236|623237|623238|623239|623240|623241|623242|623243|623244|623245",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "excludedSortCodes":"622933|622799|623141|622845|623121|623126|623102|622888|622644|621350|622504|622453|622934|622919|623023|622812|623056|623057|621707|622145|621348|623114|623115|621179|621914|622657|622658|623150|623149|622911|622914|622913|622912|622910|623053|622868|621306|622562|623051|622005|623137|622413|622776|622494|622725|622849|622602|622603|622604|624001|624002|624004|624005|624010|624011|624012|624013|624014|624007|622152|622104|622561|622929|623003|621709|622699|622700|622457|622411|623187|623157|621109|622492|621335|621705|621708|622802|621352|622085|622810|622620|623172|622448|622821|622670|621272|620044|622917|623156|622103|622400|622999|623079|621037|622155|623035|622949|623036|623016|622765|622837|622791|622838|622672|622739|622586|622722|622745|622839|622645|622867|622756|622150|622844|622726|622661|621761|622572|622754|623129|622816|621887|623120|623119|622017|622734|622491|622809|622623|621710|622678|622618|623025|623160|622398|622414|622918|622437|622440|622659|622818|622900|622052|621873|623006|621110|621325|883000|623020|623017|623019|623021|623022|623026|622600|622997|622232|623088|623117|622908|622907|622909|622905|623176|623039|622231|622436|622587|622610|623054|622574|622792|622936|622083|623133|623135|622769|622147|623188|622337|621970|571745",
               "expectedBankNames":"NATIONAL WESTMINSTER BANK|National Westminster Bank|national westminster bank"
            },
            "type":"condition"
         }
      ],
      "NatwestManualCashDeposit-PostHOCAFieldEntry":[
         {
            "description":"Enter",
            "inputMask":"alphanumeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Serial number is required."
                  }
               },
               {
                  "field":"inputValue",
                  "format":{
                     "match":"^[0-9]{6,6}$",
                     "message":"Serial Number must be 6 digits in length."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "numericality":{
                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"0.00",
                        "inputMask":"currency",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Amount is required."
                              }
                           },
                           {
                              "confirmation":{
                                 "message":"The amounts entered mismatch. Please re-key.",
                                 "value":"{{ outputData.inputAmount }}"
                              },
                              "field":"inputValue"
                           }
                        ],
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Re-enter",
                                    "value":"reenter",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Confirm",
                                    "value":"confirm",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"reenter",
                                    "given":"{{ outputData.actions.inputGroup }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":4,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"confirm",
                                    "given":"{{ outputData.actions.inputGroup }}",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "expected":"{{ outputData.HOCAFieldRequired }}",
                                          "given":"true",
                                          "nodes":[
                                             {
                                                "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "outputData":{
                                             "serialNo":"000000",
                                             "tranCode":"00"
                                          },
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"{{ outputData.HOCAFieldRequired }}",
                                          "given":"false",
                                          "nodes":[
                                             {
                                                "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.inputGroup":"{{ inputData.action }}"
                              },
                              "title":"Confirm Deposit amount",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left",
                                 "transition":false
                              }
                           }
                        ],
                        "title":"Re-Enter Amount",
                        "type":"input",
                        "unit":{
                           "position":"left",
                           "type":"text",
                           "value":"£"
                        }
                     }
                  ],
                  "outputData":{
                     "inputAmount":"{{ inputData.inputValue }}"
                  },
                  "title":"Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "serialNo":"{{ inputData.inputValue }}"
            },
            "title":"Serial Number",
            "type":"input"
         }
      ],
      "Natwest_BCD":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"0.00",
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Amount is required."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.maximumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.amount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"re-enter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirmed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"re-enter",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirmed",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "comparison":"matchregexp",
                                          "expected":"{{ outputData.barcodeSplit[2] }}",
                                          "given":"/^(0|1|2|3)$/",
                                          "nodes":[
                                             {
                                                "name":"Natwest_BCD_Entry",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "outputData":{
                                             "accountNumber":"{{ outputData.barcodeSplit[5] }}"
                                          },
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"{{ outputData.barcodeSplit[2] }}",
                                          "given":"4",
                                          "nodes":[
                                             {
                                                "name":"Natwest_BCD_Entry",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "outputData":{
                                             "HOCACode":"{{ outputData.barcodeSplit[5] }}",
                                             "accountNumber":"00000000"
                                          },
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "HOCACode":" ",
                                       "serialNo":"{{ outputData.barcodeSplit[3] }}",
                                       "sortcode":"{{ outputData.barcodeSplit[4] }}",
                                       "svc":"{{ outputData.barcodeSplit[2] }}",
                                       "transCode":"77"
                                    },
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "accountNumber":"00000000",
               "amount":"{{ inputData.inputValue }}",
               "barcodeSplit":"{{ REGEXP_SPLIT(\"{{ outputData.Rref }}\", \"^(\\w{8})(\\w{1})(\\w{6})(\\w{6})(\\w{8})(\\w{1})\") }}"
            },
            "title":"Amount",
            "type":"input",
            "unit":{
               "position":"left",
               "type":"text",
               "value":"£"
            }
         }
      ],
      "Natwest_BCD_Entry":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"print",
                  "id":"printCustomerReceipt",
                  "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                  "name":"printer",
                  "params":{
                     "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "basket":{
                     "id":"{{ outputData.itemName }}"
                  },
                  "transaction":{
                     "entryType":"banking",
                     "itemID":"{{ outputData.itemID }}",
                     "quantity":"1",
                     "quantityFixed":"true",
                     "receiptLine":"1",
                     "tokens.APTransactionReference":"0001",
                     "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                     "tokens.HOCA":"{{ outputData.HOCACode }}",
                     "tokens.PCA":" ",
                     "tokens.SVC":"{{ outputData.svc }}",
                     "tokens.SerialNo":"{{ outputData.serialNo }}",
                     "tokens.SortCode":"{{ outputData.sortcode }}",
                     "tokens.TranCode":"77",
                     "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                     "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                     "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                     "tokens.paymentCode":"1",
                     "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                     "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                     "tokens.versionNumber":"1",
                     "value":"{{ outputData.amount }}",
                     "valueInPence":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                     "voidable":"true"
                  },
                  "type":"complete"
               }
            ],
            "type":"condition"
         }
      ],
      "OLPAccept":[
         {
            "actions":[
               {
                  "title":"Cancel",
                  "value":"cancel",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Continue",
                  "value":"continue",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"The date in the bottom right of the label must be today or later.\n\nThe item must be no bigger than the format stated in the top right of the label",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"cancel",
                  "given":"{{ outputData.actions.continue }}",
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"continue",
                  "given":"{{ outputData.actions.continue }}",
                  "nodes":[
                     {
                        "name":"OLPAcceptLastDespatchCheck",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.continue":"{{ inputData.action }}"
            },
            "title":"Is the Post-by date today or later?\nPlease check the following",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left",
               "transition":true
            }
         }
      ],
      "OLPAcceptLastDespatchCheck":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"afterLastDespatch",
                  "id":"lastDespatch",
                  "loadingMessage":"Waiting for despatch info...",
                  "name":"despatch",
                  "params":{
                     "branchID":"{{ appData.device.branchID }}",
                     "carrierID":"RM",
                     "clerkID":"2",
                     "counterID":"{{ appData.device.nodeID }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"true",
                  "given":"{{ outputData.afterLastCollection }}",
                  "nodes":[
                     {
                        "description":"Advise the customer that the mail item will not be despatched until the following working day.",
                        "title":"Royal Mail final collection has passed",
                        "type":"info",
                        "visual":{
                           "view":"notification-info"
                        }
                     },
                     {
                        "name":"OLPWeight",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"false",
                  "given":"{{ outputData.afterLastCollection }}",
                  "nodes":[
                     {
                        "name":"OLPWeight",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "afterLastCollection":"{{ inputData.enablers.lastDespatch.afterLastDispatch }}"
            },
            "type":"condition"
         }
      ],
      "OLPAddToBasket":[
         {
            "basket":{
               "Service":"{{ outputData.product.Service.DisplayName }}",
               "id":"{{ outputData.UPUTrackingNumber }}"
            },
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"n/a",
               "tokens.Dest":"{{ outputData.product.Area.SourceAreaId }}",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandTCarrier":"{{ outputData.product.TrackAndTrace.TandTCarrier }}",
               "tokens.TandTSvcID":"{{ outputData.product.TrackAndTrace.TandTSvcID }}",
               "tokens.TandTType":"{{ outputData.product.TrackAndTrace.TandTType }}",
               "tokens.afterLastDespatch":"{{ outputData.afterLastCollection }}",
               "tokens.barcode":"{{ outputData.TD }}",
               "tokens.carrier":"{{ outputData.product.Service.CarrierId }}",
               "tokens.clientAccountNo":"n/a",
               "tokens.clientSrvCode":"n/a",
               "tokens.country":"{{ outputData.DestinationCountry }}",
               "tokens.customerRefNumber":"n/a",
               "tokens.destination":"{{ outputData.BuildingName }}, {{ outputData.DestinationPostCode }}",
               "tokens.destinationAddress":"{{ outputData.BuildingName }}, {{ outputData.DestinationPostCode }}",
               "tokens.destinationAreaId":"{{ outputData.product.Area.DestinationAreaId }}",
               "tokens.entryID":"1",
               "tokens.firstAddressLine":"{{ outputData.BuildingName }}",
               "tokens.paymentCode":"n/a",
               "tokens.pipFormat":"{{ outputData.product.PIPFormat }}",
               "tokens.prePaidLine":"1",
               "tokens.receiptReference":"n/a",
               "tokens.serviceId":"{{ outputData.product.Service.ServiceId }}",
               "tokens.serviceName":"{{ outputData.product.Service.ReportName }}",
               "tokens.tokenIdentifier":"n/a",
               "tokens.versionNumber":"n/a",
               "tokens.weight":"{{ outputData.weight }}",
               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "OLPAskAddress":[
         {
            "comparison":"matchregexp",
            "expected":"^\\s*$",
            "given":"{{ outputData.DestinationPostCode }}",
            "nodes":[
               {
                  "comparison":"matchregexp",
                  "expected":"^\\s*$",
                  "given":"{{ outputData.BuildingName }}",
                  "nodes":[
                     {
                        "description":"{{ outputData.product.Service.DisplayName }}",
                        "title":"Service information",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"{{ outputData.UPUTrackingNumber }}",
                        "title":"Tracking reference number",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "groupNodes":[
                           {
                              "description":"Address",
                              "inputValidation":[
                                 {
                                    "field":"inputValue",
                                    "required":{
                                       "message":"Address is required"
                                    }
                                 }
                              ],
                              "outputData":{
                                 "BuildingName":"{{ inputValue }}"
                              },
                              "title":"Destination",
                              "type":"input"
                           },
                           {
                              "description":"Postcode",
                              "inputValidation":[
                                 {
                                    "field":"inputValue",
                                    "required":{
                                       "message":"Postcode is required"
                                    }
                                 }
                              ],
                              "outputData":{
                                 "DestinationPostCode":"{{ inputValue }}"
                              },
                              "title":"",
                              "type":"input"
                           }
                        ],
                        "nodes":[
                           {
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"S",
                                    "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                                    "nodes":[
                                       {
                                          "name":"OLPSegregationPrompt",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "promptMessage":"Keep item secure and separate for despatch to {{ outputData.ClientAccName }}"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                                    "nodes":[
                                       {
                                          "name":"OLPSegregationPrompt",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "promptMessage":"Place item in the 1st Class Parcel bag",
                                       "promptTitle":"Segregate Online Postage Item"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"2",
                                    "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                                    "nodes":[
                                       {
                                          "name":"OLPSegregationPrompt",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "promptMessage":"Place item in the 2nd Class Parcel bag",
                                       "promptTitle":"Segregate Online Postage Item"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"L",
                                    "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                                    "nodes":[
                                       {
                                          "name":"OLPSegregationPrompt",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "promptMessage":"Place item in the Letters bag",
                                       "promptTitle":"Segregate Online Postage Item"
                                    },
                                    "type":"condition"
                                 }
                              ],
                              "title":"OK",
                              "type":"choice"
                           }
                        ],
                        "outputData":{
                           "BuildingName":"{{ inputData.inputValue.BuildingName }}",
                           "DestinationPostCode":"{{ inputData.inputValue.DestinationPostCode }}"
                        },
                        "title":"",
                        "type":"inputGroup"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "description":"{{ outputData.product.Service.DisplayName }}",
                        "title":"Service information",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"{{ outputData.UPUTrackingNumber }}",
                        "title":"Tracking reference number",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"{{ outputData.BuildingName }}",
                        "title":"Destination",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"Postcode",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Postcode is required"
                              }
                           }
                        ],
                        "outputData":{
                           "DestinationPostCode":"{{ inputData.inputValue }}"
                        },
                        "title":"",
                        "type":"input"
                     },
                     {
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"S",
                              "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                              "nodes":[
                                 {
                                    "name":"OLPSegregationPrompt",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "promptMessage":"Keep item secure and separate for despatch to {{ outputData.ClientAccName }}"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"1",
                              "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                              "nodes":[
                                 {
                                    "name":"OLPSegregationPrompt",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "promptMessage":"Place item in the 1st Class Parcel bag",
                                 "promptTitle":"Segregate Online Postage Item"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"2",
                              "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                              "nodes":[
                                 {
                                    "name":"OLPSegregationPrompt",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "promptMessage":"Place item in the 2nd Class Parcel bag",
                                 "promptTitle":"Segregate Online Postage Item"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"L",
                              "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                              "nodes":[
                                 {
                                    "name":"OLPSegregationPrompt",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "promptMessage":"Place item in the Letters bag",
                                 "promptTitle":"Segregate Online Postage Item"
                              },
                              "type":"condition"
                           }
                        ],
                        "title":"OK",
                        "type":"choice"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "expected":"^\\s*$",
            "given":"{{ outputData.BuildingName }}",
            "nodes":[
               {
                  "description":"{{ outputData.product.Service.DisplayName }}",
                  "title":"Service information",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "description":"{{ outputData.UPUTrackingNumber }}",
                  "title":"Tracking reference number",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "description":"Address",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Address is required"
                        }
                     }
                  ],
                  "outputData":{
                     "BuildingName":"{{ inputData.inputValue }}"
                  },
                  "title":"Destination",
                  "type":"input"
               },
               {
                  "description":"{{ outputData.DestinationPostCode }}",
                  "title":"",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"S",
                        "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                        "nodes":[
                           {
                              "name":"OLPSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "promptMessage":"Keep item secure and separate for despatch to {{ outputData.ClientAccName }}"
                        },
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"1",
                        "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                        "nodes":[
                           {
                              "name":"OLPSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "promptMessage":"Place item in the 1st Class Parcel bag",
                           "promptTitle":"Segregate Online Postage Item"
                        },
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"2",
                        "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                        "nodes":[
                           {
                              "name":"OLPSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "promptMessage":"Place item in the 2nd Class Parcel bag",
                           "promptTitle":"Segregate Online Postage Item"
                        },
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"L",
                        "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                        "nodes":[
                           {
                              "name":"OLPSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "promptMessage":"Place item in the Letters bag",
                           "promptTitle":"Segregate Online Postage Item"
                        },
                        "type":"condition"
                     }
                  ],
                  "title":"OK",
                  "type":"choice"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.product.Service.DisplayName }}",
                  "title":"Service information",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "description":"{{ outputData.UPUTrackingNumber }}",
                  "title":"Tracking reference number",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "description":"{{ outputData.BuildingName }}",
                  "title":"Destination",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "description":"{{ outputData.DestinationPostCode }}",
                  "title":"",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"S",
                        "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                        "nodes":[
                           {
                              "name":"OLPSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "promptMessage":"Keep item secure and separate for despatch to {{ outputData.ClientAccName }}"
                        },
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"1",
                        "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                        "nodes":[
                           {
                              "name":"OLPSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "promptMessage":"Place item in the 1st Class Parcel bag",
                           "promptTitle":"Segregate Online Postage Item"
                        },
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"2",
                        "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                        "nodes":[
                           {
                              "name":"OLPSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "promptMessage":"Place item in the 2nd Class Parcel bag",
                           "promptTitle":"Segregate Online Postage Item"
                        },
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"L",
                        "given":"{{ outputData.product.PostageMethod.SegregationCode }}",
                        "nodes":[
                           {
                              "name":"OLPSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "promptMessage":"Place item in the Letters bag",
                           "promptTitle":"Segregate Online Postage Item"
                        },
                        "type":"condition"
                     }
                  ],
                  "title":"OK",
                  "type":"choice"
               }
            ],
            "type":"condition"
         }
      ],
      "OLPSegregationPrompt":[
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"cancel",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Add to basket",
                  "value":"addToBasket",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"{{ outputData.promptMessage }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"cancel",
                  "given":"{{ outputData.actions.addToBasket }}",
                  "nodes":[
                     {
                        "numberOfSteps":2,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"addToBasket",
                  "given":"{{ outputData.actions.addToBasket }}",
                  "nodes":[
                     {
                        "name":"OLPAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.addToBasket":"{{ inputData.action }}"
            },
            "title":"Segregate Online Postage Item",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left",
               "transition":true
            }
         }
      ],
      "OLPWeight":[
         {
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"getProduct",
                  "loadingMessage":"Fetching product information",
                  "name":"RMProductLookup",
                  "params":{
                     "parsedBarcode":"{{ outputData }}"
                  },
                  "stepEvent":"onComplete"
               }
            ],
            "inputMask":"numeric",
            "nodes":[
               {
                  "comparison":"lt",
                  "expected":"{{ outputData.product.TariffBand.WeightFrom }}",
                  "given":"{{ outputData.weight }}",
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Cancel",
                              "value":"cancel",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Proceed",
                              "value":"proceed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"Item weight is less than the weight on the label so the customer may have overpaid. Confirm if the customer wants to proceed or cancel this transaction.",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"cancel",
                              "given":"{{ outputData.actions.proceed }}",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"proceed",
                              "given":"{{ outputData.actions.proceed }}",
                              "nodes":[
                                 {
                                    "name":"OLPAskAddress",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.proceed":"{{ inputData.action }}"
                        },
                        "title":"Item has been overpaid",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"gt",
                  "expected":"{{ outputData.product.TariffBand.WeightTo }}",
                  "given":"{{ outputData.weight }}",
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Proceed and pay postage",
                              "value":"proceed",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"End transaction",
                              "value":"end",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"Item weight is greater than the weight on the label, customer has not paid enough postage and so the item cannot be accepted\n\nCustomer should contact Royal Mail Click \u0026 Drop to cancel the label and generate a new label for the correct weight or proceed and pay full postage.",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"proceed",
                              "given":"{{ outputData.actions.proceed }}",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"end",
                              "given":"{{ outputData.actions.proceed }}",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.proceed":"{{ inputData.action }}"
                        },
                        "title":"Item has been underpaid",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"OLPAskAddress",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "product":"{{ inputData.enablers.getProduct }}",
               "returnsMaxWeight":"{{ inputData.enablers.getProduct.Area.MaxWeight }}",
               "weight":"{{ inputData.inputValue }}"
            },
            "title":"Weight",
            "type":"input",
            "unit":{
               "position":"right",
               "value":"g"
            }
         }
      ],
      "OnlineBalanceEnquiry":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"BalanceEnquiryX",
                  "id":"balanceEnquiryX",
                  "loadingMessage":"Ask the customer to insert or present their card or device",
                  "name":"banking",
                  "params":{
                     
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "enablers":[
                     {
                        "action":"TokeniserLookup",
                        "id":"referenceData",
                        "loadingMessage":"Please wait, processing",
                        "name":"banking",
                        "params":{
                           "maskedPan":"{{ outputData.pedResponseX.maskedPan }}",
                           "operation":"Balance"
                        },
                        "stepEvent":"onMatch"
                     }
                  ],
                  "expected":"01",
                  "given":"{{ outputData.pedResponseX.responseCode }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"true",
                        "given":"{{ outputData.referenceData.isValidOperation }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"print",
                                    "id":"printReceipt",
                                    "loadingMessage":"Wait while customer's receipt is printed.",
                                    "name":"printer",
                                    "params":{
                                       "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003eDATE TO BE ADDED\u003cbr\u003e\r\nMoulton\u003cbr\u003e\r\nWhitlow Lane,\u003cbr\u003eNorthwich,\u003cbr\u003eCheshire\u003cbr\u003eCW9 8QN\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: 33\u003cbr\u003e\r\nFAD: 2314010\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003ch3 class=text-center\u003e{{ outputData.referenceData.item.itemName }}\u003c/h3\u003e\r\n\u003chr/\u003e\r\n\u003ch3\u003ePost Office Banking Services\u003c/h3\u003e\r\n\u003cp\u003eCard Number: {{ outputData.pedResponseX.maskedPan }}\u003c/p\u003e\r\n\u003cp\u003eAuth Code: {{ outputData.pedResponseY.authCode }}\u003c/p\u003e\r\n\u003cp\u003eApplication ID: {{ outputData.pedResponseY.applicationId }}\u003c/p\u003e\r\n\u003cp\u003ePAN Seq No: {{ outputData.pedResponseY.panSequenceNumber }}\u003c/p\u003e\r\n\u003cp\u003eTransaction ID: TR000099933000000938000000002\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003cp\u003eService: \u003cstrong\u003eBalance Enquiry\u003c/strong\u003e\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003ch3\u003e\u003cstrong\u003eBALANCE ENQUIRY APPROVED\u003c/strong\u003e\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003eAccount available balance\u003c/td\u003e\r\n\u003ctd\u003e£{{ outputData.pedResponseY.availableBalance }}\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003eAccount balance\u003c/td\u003e\r\n\u003ctd\u003e£{{ outputData.pedResponseY.balance }}\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch3\u003eCARDHOLDER RECEIPT\u003c/h3\u003e\u003cbr\u003e\r\n\u003cp\u003ePlease retain for your records\u003c/p\u003e\r\n\u003cp\u003eThis is not a VAT receipt\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                                    },
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "basket":{
                                       "id":"{{ outputData.referenceData.item.itemName }}"
                                    },
                                    "transaction":{
                                       "entryType":"banking",
                                       "fulfilmentAction":"balance",
                                       "itemID":"{{ outputData.referenceData.item.itemID }}",
                                       "merchantNumber":"TBC",
                                       "quantity":"1",
                                       "quantityFixed":"true",
                                       "receiptLine":"1",
                                       "routingGateway":"TBC",
                                       "tokens.agentSlaInfo":"TBC",
                                       "tokens.amountRequested":"0",
                                       "tokens.authorisation_code":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.bankResponse":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.bankTransactionID":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.bankValueFlag":"N",
                                       "tokens.cardImpounded":"0",
                                       "tokens.clientID":"{{ outputData.referenceData.tokenmask.ClientId }}",
                                       "tokens.counterSlaInfo":"TBC",
                                       "tokens.currency":"GBP",
                                       "tokens.fee":"0",
                                       "tokens.financialTransaction":"TBC",
                                       "tokens.horizonTransactionID":"TBC",
                                       "tokens.issuerSchemeID":"{{ outputData.referenceData.tokenmask.IssuerScheme }}",
                                       "tokens.pan":"{{ outputData.pedResponseX.maskedPan }}",
                                       "tokens.receiptDate":"{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                                       "tokens.recoveryFlag":"N",
                                       "tokens.responseCode":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.settlementDate":"{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                                       "tokens.transactionResultCode":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.transactionType":"TBC",
                                       "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
                                       "value":"0",
                                       "valueInPence":"0",
                                       "voidable":"true"
                                    },
                                    "type":"complete"
                                 }
                              ],
                              "outputData":{
                                 
                              },
                              "type":"condition"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"01",
                        "given":"{{ outputData.pedResponseX.responseCode }}",
                        "nodes":[
                           {
                              "name":"TransactionDeclinedPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"false",
                        "given":"{{ outputData.referenceData.isValidOperation }}",
                        "nodes":[
                           {
                              "description":"The transaction has been declined. Advise the customer to use an alternative card for this transaction.",
                              "title":"Unsupported Card",
                              "type":"info"
                           },
                           {
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "title":"Cancel Transaction",
                              "type":"choice",
                              "visual":{
                                 "transition":true
                              }
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "referenceData":"{{ inputData.enablers.referenceData }}"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "pedResponseX":"{{ inputData.enablers.balanceEnquiryX }}"
            },
            "type":"condition"
         }
      ],
      "OnlineCashDeposit":[
         {
            "defaultValues":{
               "inputValue":"0.00"
            },
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "format":{
                     "message":"Amount is required.",
                     "notMatch":"^0.00$"
                  }
               }
            ],
            "nodes":[
               {
                  "defaultValues":{
                     "inputValue":"0.00"
                  },
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.inputAmount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"reenter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirm",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"reenter",
                              "given":"{{ outputData.actions.inputGroup }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirm",
                              "given":"{{ outputData.actions.inputGroup }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"CashDepositX",
                                          "id":"cashDepositX",
                                          "loadingMessage":"Ask the customer to insert or present their card or device",
                                          "name":"banking",
                                          "params":{
                                             
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "enablers":[
                                             {
                                                "action":"TokeniserLookup",
                                                "id":"referenceData",
                                                "loadingMessage":"Please wait, processing",
                                                "name":"banking",
                                                "params":{
                                                   "maskedPan":"{{ outputData.pedResponseX.maskedPan }}",
                                                   "operation":"Cash Deposit"
                                                },
                                                "stepEvent":"onMatch"
                                             }
                                          ],
                                          "expected":"01",
                                          "given":"{{ outputData.pedResponseX.responseCode }}",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"false",
                                                "given":"{{ outputData.referenceData.isValidOperation }}",
                                                "nodes":[
                                                   {
                                                      "description":"The transaction has been declined. Advise the customer to use an alternative card for this transaction.",
                                                      "title":"Unsupported Card",
                                                      "type":"info"
                                                   },
                                                   {
                                                      "nodes":[
                                                         {
                                                            "type":"abort"
                                                         }
                                                      ],
                                                      "title":"Cancel Transaction",
                                                      "type":"choice",
                                                      "visual":{
                                                         "transition":true
                                                      }
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"true",
                                                "given":"{{ outputData.referenceData.isValidOperation }}",
                                                "nodes":[
                                                   {
                                                      "comparison":"lt",
                                                      "expected":"{{ outputData.referenceData.item.minimumValue }}",
                                                      "given":"{{ outputData.inputAmount }}",
                                                      "nodes":[
                                                         {
                                                            "description":"The minimum value allowed for a {{ outputData.referenceData.item.itemName }} transaction is {{ NUMBER_TO_CURRENCY(\"{{ outputData.referenceData.item.minimumValue }}\", \"GBP\") }}.",
                                                            "title":"Invalid Amount",
                                                            "type":"info"
                                                         },
                                                         {
                                                            "nodes":[
                                                               {
                                                                  "type":"abort"
                                                               }
                                                            ],
                                                            "title":"Cancel Transaction",
                                                            "type":"choice",
                                                            "visual":{
                                                               "transition":true
                                                            }
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   },
                                                   {
                                                      "comparison":"gt",
                                                      "expected":"{{ outputData.referenceData.item.maximumValue }}",
                                                      "given":"{{ outputData.inputAmount }}",
                                                      "nodes":[
                                                         {
                                                            "description":"The maximum value allowed for a {{ outputData.referenceData.item.itemName }} transaction is {{ NUMBER_TO_CURRENCY(\"{{ outputData.referenceData.item.maximumValue }}\", \"GBP\") }}.",
                                                            "title":"Invalid Amount",
                                                            "type":"info"
                                                         },
                                                         {
                                                            "nodes":[
                                                               {
                                                                  "type":"abort"
                                                               }
                                                            ],
                                                            "title":"Cancel Transaction",
                                                            "type":"choice",
                                                            "visual":{
                                                               "transition":false
                                                            }
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   },
                                                   {
                                                      "comparison":"eq",
                                                      "enablers":[
                                                         {
                                                            "action":"print",
                                                            "id":"printReceipt",
                                                            "loadingMessage":"Wait while customer's receipt is printed.",
                                                            "name":"printer",
                                                            "params":{
                                                               "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e\r\n    * {font-family:\"monospace\";}\r\n    body,tr,td,span,p,ul,li,div {font-size:24px;}\r\n    table {width:100%}\r\n    table tbody {vertical-align: top;}\r\n    .no-padding h1, h2, h3, p { margin: 0; padding: 0; }\r\n    h1 {font-size:32px;}\r\n    h2 {font-size:28px;}\r\n    h3 {font-size:24px;}\r\n    .text-center { text-align: center; }\r\n    hr { width:100%; border:0; height:1px; background-color: #cccccc;}\r\n    \u003c/style\u003e\r\n  \u003c/head\u003e\u003cbody\u003e\r\n      \u003cdiv class=\"text-center no-padding\"\u003e\r\n    \u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n    \u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n  \u003c/div\u003e\r\n  \u003chr/\u003e\r\n    \u003cdiv class=\"no-padding\"\u003e\r\n    \u003ctable\u003e\r\n      \u003ctr\u003e\r\n        \u003ctd\u003eDATE TO BE ADDED\u003cbr\u003e\r\n        Moulton\u003cbr\u003e\r\n          Whitlow Lane,\u003cbr\u003eNorthwich,\u003cbr\u003eCheshire\u003cbr\u003eCW9 8QN\r\n        \u003c/td\u003e\r\n        \u003ctd\u003e\r\n        TP: 33\u003cbr\u003e\r\n        FAD: 2314010\r\n      \u003c/td\u003e\r\n      \u003c/tr\u003e\r\n    \u003c/table\u003e\r\n    \u003chr/\u003e\r\n    \u003ch3 class=\"text-center\"\u003e{{ outputData.referenceData.item.itemName }}\u003c/h3\u003e\r\n    \u003chr/\u003e\r\n    \u003ch3\u003ePost Office Banking Services\u003c/h3\u003e\r\n    \u003cp\u003eService: {{ outputData.referenceData.item.itemName }}\u003c/p\u003e\r\n    \u003cp\u003eCard Number: {{ outputData.pedResponseX.maskedPan }}\u003c/p\u003e\r\n    \u003cp\u003eAmount: {{outputData.inputAmount}}\u003c/p\u003e\r\n  \u003c/div\u003e\r\n    \u003cdiv\u003e\r\n      \u003chr/\u003e\r\n      \u003cdiv class=\"no-padding\"\u003e\r\n      \u003cp\u003eService: \u003cstrong\u003eCash Deposit\u003c/strong\u003e\u003c/p\u003e\r\n      \u003chr/\u003e\r\n    \u003c/div\u003e\r\n    \u003chr/\u003e\r\n    \u003cdiv class=\"no-padding\"\u003e\r\n    \u003c/div\u003e\r\n  \u003c/div\u003e\r\n   \u003chr/\u003e\r\n  \u003cdiv class=\"text-center no-padding\"\u003e\r\n      \u003ch3\u003eCARDHOLDER RECEIPT\u003c/h3\u003e\u003cbr\u003e\r\n      \u003cp\u003ePlease retain for future reference\u003c/p\u003e\r\n      \u003cp\u003eThis is not a VAT receipt\u003c/p\u003e\r\n    \u003c/div\u003e\r\n    \u003c/body\u003e\u003c/html\u003e"
                                                            },
                                                            "stepEvent":"onMatch"
                                                         }
                                                      ],
                                                      "expected":"1",
                                                      "given":"1",
                                                      "nodes":[
                                                         {
                                                            "basket":{
                                                               "id":"{{ outputData.referenceData.item.itemName }}"
                                                            },
                                                            "transaction":{
                                                               "entryType":"banking",
                                                               "fulfilmentAction":"deposit",
                                                               "itemID":"{{ outputData.referenceData.item.itemID }}",
                                                               "merchantNumber":"TBC",
                                                               "quantity":"1",
                                                               "quantityFixed":"true",
                                                               "receiptLine":"1",
                                                               "routingGateway":"TBC",
                                                               "tokens.agentSlaInfo":"TBC",
                                                               "tokens.amountRequested":"{{ outputData.inputAmount }}",
                                                               "tokens.authorisation_code":"WILL_COME_FROM_FULFILLMENT",
                                                               "tokens.bankResponse":"WILL_COME_FROM_FULFILLMENT",
                                                               "tokens.bankTransactionID":"WILL_COME_FROM_FULFILLMENT",
                                                               "tokens.bankValueFlag":"TBC",
                                                               "tokens.cardImpounded":"WILL_COME_FROM_FULFILLMENT",
                                                               "tokens.clientID":"{{ outputData.referenceData.tokenmask.ClientId }}",
                                                               "tokens.counterSlaInfo":"TBC",
                                                               "tokens.currency":"GBP",
                                                               "tokens.fee":"0",
                                                               "tokens.financialTransaction":"TBC",
                                                               "tokens.horizonTransactionID":"TBC",
                                                               "tokens.issuerSchemeID":"{{ outputData.referenceData.tokenmask.IssuerScheme }}",
                                                               "tokens.pan":"{{ outputData.pedResponseX.maskedPan }}",
                                                               "tokens.receiptDate":"{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                                                               "tokens.recoveryFlag":"N",
                                                               "tokens.responseCode":"WILL_COME_FROM_FULFILLMENT",
                                                               "tokens.settlementDate":"{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                                                               "tokens.transactionResultCode":"WILL_COME_FROM_FULFILLMENT",
                                                               "tokens.transactionType":"TBC",
                                                               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
                                                               "value":"{{ outputData.inputAmount }}",
                                                               "valueInPence":"{{ MULTIPLY(\"{{ outputData.inputAmount }}\", \"100\") }}",
                                                               "voidable":"true"
                                                            },
                                                            "type":"complete"
                                                         }
                                                      ],
                                                      "type":"condition"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "referenceData":"{{ inputData.enablers.referenceData }}"
                                          },
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"01",
                                          "given":"{{ outputData.pedResponseX.responseCode }}",
                                          "nodes":[
                                             {
                                                "name":"TransactionDeclinedPrompt",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "pedResponseX":"{{ inputData.enablers.cashDepositX }}"
                                    },
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.inputGroup":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left",
                           "transition":false
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input"
               }
            ],
            "outputData":{
               "inputAmount":"{{ inputData.inputValue }}"
            },
            "title":"Amount",
            "type":"input"
         }
      ],
      "OnlineCashWithdrawal":[
         {
            "defaultValues":{
               "inputValue":"0.00"
            },
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "format":{
                     "message":"Amount is required.",
                     "notMatch":"^0.00$"
                  }
               }
            ],
            "nodes":[
               {
                  "nodes":[
                     {
                        "comparison":"eq",
                        "enablers":[
                           {
                              "action":"CashWithdrawalX",
                              "id":"cashWithdrawalX",
                              "loadingMessage":"Ask the customer to insert or present their card or device",
                              "name":"banking",
                              "params":{
                                 
                              },
                              "stepEvent":"onMatch"
                           }
                        ],
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"TokeniserLookup",
                                    "id":"referenceData",
                                    "loadingMessage":"Please wait, processing",
                                    "name":"banking",
                                    "params":{
                                       "maskedPan":"{{ outputData.pedResponseX.maskedPan }}",
                                       "operation":"Cash Withdraw"
                                    },
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"01",
                              "given":"{{ outputData.pedResponseX.responseCode }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"false",
                                    "given":"{{ outputData.referenceData.isValidOperation }}",
                                    "nodes":[
                                       {
                                          "description":"The transaction has been declined. Advise the customer to use an alternative card for this transaction.",
                                          "title":"Unsupported Card",
                                          "type":"info"
                                       },
                                       {
                                          "nodes":[
                                             {
                                                "type":"abort"
                                             }
                                          ],
                                          "title":"Cancel Transaction",
                                          "type":"choice",
                                          "visual":{
                                             "transition":true
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"true",
                                    "given":"{{ outputData.referenceData.isValidOperation }}",
                                    "nodes":[
                                       {
                                          "comparison":"lt",
                                          "expected":"{{ outputData.referenceData.item.minimumValue }}",
                                          "given":"{{ outputData.inputAmount }}",
                                          "nodes":[
                                             {
                                                "description":"The minimum value allowed for a {{ outputData.referenceData.item.itemName }} transaction is {{ NUMBER_TO_CURRENCY(\"{{ outputData.referenceData.item.minimumValue }}\", \"GBP\") }}.",
                                                "title":"Invalid Amount",
                                                "type":"info"
                                             },
                                             {
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "title":"Cancel Transaction",
                                                "type":"choice",
                                                "visual":{
                                                   "transition":true
                                                }
                                             }
                                          ],
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"gt",
                                          "expected":"{{ outputData.referenceData.item.maximumValue }}",
                                          "given":"{{ outputData.inputAmount }}",
                                          "nodes":[
                                             {
                                                "description":"The maximum value allowed for a {{ outputData.referenceData.item.itemName }} transaction is {{ NUMBER_TO_CURRENCY(\"{{ outputData.referenceData.item.maximumValue }}\", \"GBP\") }}.",
                                                "title":"Invalid Amount",
                                                "type":"info"
                                             },
                                             {
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "title":"Cancel Transaction",
                                                "type":"choice",
                                                "visual":{
                                                   "transition":false
                                                }
                                             }
                                          ],
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "enablers":[
                                             {
                                                "action":"print",
                                                "id":"printReceipt",
                                                "loadingMessage":"Wait while customer's receipt is printed.",
                                                "name":"printer",
                                                "params":{
                                                   "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e\r\n    * {font-family:\"monospace\";}\r\n    body,tr,td,span,p,ul,li,div {font-size:24px;}\r\n    table {width:100%}\r\n    table tbody {vertical-align: top;}\r\n    .no-padding h1, h2, h3, p { margin: 0; padding: 0; }\r\n    h1 {font-size:32px;}\r\n    h2 {font-size:28px;}\r\n    h3 {font-size:24px;}\r\n    .text-center { text-align: center; }\r\n    hr { width:100%; border:0; height:1px; background-color: #cccccc;}\r\n    \u003c/style\u003e\r\n  \u003c/head\u003e\u003cbody\u003e\r\n      \u003cdiv class=\"text-center no-padding\"\u003e\r\n    \u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n    \u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n  \u003c/div\u003e\r\n  \u003chr/\u003e\r\n    \u003cdiv class=\"no-padding\"\u003e\r\n    \u003ctable\u003e\r\n      \u003ctr\u003e\r\n        \u003ctd\u003eDATE TO BE ADDED\u003cbr\u003e\r\n        Moulton\u003cbr\u003e\r\n          Whitlow Lane,\u003cbr\u003eNorthwich,\u003cbr\u003eCheshire\u003cbr\u003eCW9 8QN\r\n        \u003c/td\u003e\r\n        \u003ctd\u003e\r\n        TP: 33\u003cbr\u003e\r\n        FAD: 2314010\r\n      \u003c/td\u003e\r\n      \u003c/tr\u003e\r\n    \u003c/table\u003e\r\n    \u003chr/\u003e\r\n    \u003ch3 class=\"text-center\"\u003e{{ outputData.referenceData.item.itemName }}\u003c/h3\u003e\r\n    \u003chr/\u003e\r\n    \u003ch3\u003ePost Office Banking Services\u003c/h3\u003e\r\n    \u003cp\u003eService: {{ outputData.referenceData.item.itemName }}\u003c/p\u003e\r\n    \u003cp\u003eCard Number: {{ outputData.pedResponseX.maskedPan }}\u003c/p\u003e\r\n    \u003cp\u003eAmount: {{outputData.inputAmount}}\u003c/p\u003e\r\n  \u003c/div\u003e\r\n    \u003cdiv\u003e\r\n      \u003chr/\u003e\r\n      \u003cdiv class=\"no-padding\"\u003e\r\n      \u003cp\u003eService: \u003cstrong\u003eCash Withdrawal\u003c/strong\u003e\u003c/p\u003e\r\n      \u003chr/\u003e\r\n    \u003c/div\u003e\r\n    \u003chr/\u003e\r\n    \u003cdiv class=\"no-padding\"\u003e\r\n    \u003c/div\u003e\r\n  \u003c/div\u003e\r\n   \u003chr/\u003e\r\n  \u003cdiv class=\"text-center no-padding\"\u003e\r\n      \u003ch3\u003eCARDHOLDER RECEIPT\u003c/h3\u003e\u003cbr\u003e\r\n      \u003cp\u003ePlease retain for future reference\u003c/p\u003e\r\n      \u003cp\u003eThis is not a VAT receipt\u003c/p\u003e\r\n    \u003c/div\u003e\r\n    \u003c/body\u003e\u003c/html\u003e"
                                                },
                                                "stepEvent":"onMatch"
                                             }
                                          ],
                                          "expected":"1",
                                          "given":"1",
                                          "nodes":[
                                             {
                                                "basket":{
                                                   "id":"{{ outputData.referenceData.item.itemName }}"
                                                },
                                                "transaction":{
                                                   "entryType":"banking",
                                                   "fulfilmentAction":"withdrawal",
                                                   "itemID":"{{ outputData.referenceData.item.itemID }}",
                                                   "merchantNumber":"TBC",
                                                   "quantity":"1",
                                                   "quantityFixed":"true",
                                                   "receiptLine":"1",
                                                   "routingGateway":"TBC",
                                                   "tokens.agentSlaInfo":"TBC",
                                                   "tokens.amountRequested":"{{ outputData.inputAmount }}",
                                                   "tokens.authorisation_code":"WILL_COME_FROM_FULFILLMENT",
                                                   "tokens.bankResponse":"WILL_COME_FROM_FULFILLMENT",
                                                   "tokens.bankTransactionID":"WILL_COME_FROM_FULFILLMENT",
                                                   "tokens.bankValueFlag":"TBC",
                                                   "tokens.cardImpounded":"N",
                                                   "tokens.clientID":"{{ outputData.referenceData.tokenmask.ClientId }}",
                                                   "tokens.counterSlaInfo":"TBC",
                                                   "tokens.currency":"GBP",
                                                   "tokens.fee":"0",
                                                   "tokens.financialTransaction":"TBC",
                                                   "tokens.horizonTransactionID":"TBC",
                                                   "tokens.issuerSchemeID":"{{ outputData.referenceData.tokenmask.IssuerScheme }}",
                                                   "tokens.pan":"{{ outputData.pedResponseX.maskedPan }}",
                                                   "tokens.receiptDate":"TBC",
                                                   "tokens.recoveryFlag":"N",
                                                   "tokens.responseCode":"WILL_COME_FROM_FULFILLMENT",
                                                   "tokens.settlementDate":"TBC",
                                                   "tokens.transactionResultCode":"TBC",
                                                   "tokens.transactionType":"TBC",
                                                   "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
                                                   "value":"-{{ outputData.inputAmount }}",
                                                   "valueInPence":"-{{ MULTIPLY(\"{{ outputData.inputAmount }}\", \"100\") }}",
                                                   "voidable":"true"
                                                },
                                                "type":"complete"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "referenceData":"{{ inputData.enablers.referenceData }}"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"01",
                              "given":"{{ outputData.pedResponseX.responseCode }}",
                              "nodes":[
                                 {
                                    "name":"TransactionDeclinedPrompt",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "pedResponseX":"{{ inputData.enablers.cashWithdrawalX }}"
                        },
                        "type":"condition"
                     }
                  ],
                  "title":"Continue",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "outputData":{
               "inputAmount":"{{ inputData.inputValue }}"
            },
            "title":"Amount",
            "type":"input"
         },
         {
            "nodes":[
               {
                  "type":"abort"
               }
            ],
            "title":"Cancel",
            "type":"choice",
            "visual":{
               "transition":true
            }
         }
      ],
      "OnlineChangePin":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"ChangePinX",
                  "id":"changePinX",
                  "loadingMessage":"Ask the customer to insert or present their card or device",
                  "name":"banking",
                  "params":{
                     
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "enablers":[
                     {
                        "action":"TokeniserLookup",
                        "id":"referenceData",
                        "loadingMessage":"Please wait, processing",
                        "name":"banking",
                        "params":{
                           "maskedPan":"{{ outputData.pedResponseX.maskedPan }}",
                           "operation":"Change PIN"
                        },
                        "stepEvent":"onMatch"
                     }
                  ],
                  "expected":"01",
                  "given":"{{ outputData.pedResponseX.responseCode }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"true",
                        "given":"{{ outputData.referenceData.isValidOperation }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"print",
                                    "id":"printReceipt",
                                    "loadingMessage":"Wait while customer's receipt is printed.",
                                    "name":"printer",
                                    "params":{
                                       "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003eDATE TO BE ADDED\u003cbr\u003e\r\nMoulton\u003cbr\u003e\r\nWhitlow Lane,\u003cbr\u003eNorthwich,\u003cbr\u003eCheshire\u003cbr\u003eCW9 8QN\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: 33\u003cbr\u003e\r\nFAD: 2314010\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003ch3 class=text-center\u003e{{ outputData.referenceData.item.itemName }}\u003c/h3\u003e\r\n\u003chr/\u003e\r\n\u003ch3\u003ePost Office Everyday Banking\u003c/h3\u003e\r\n\u003cp\u003eCard Number: {{ outputData.pedResponseX.maskedPan }}\u003c/p\u003e\r\n\u003cp\u003eAuth Code: {{ outputData.pedResponseY.authCode }}\u003c/p\u003e\r\n\u003cp\u003eApplication ID: {{ outputData.pedResponseY.applicationId }}\u003c/p\u003e\r\n\u003cp\u003eHTxn ID: 8JNDA1020831\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003cp\u003eService: \u003cstrong\u003ePIN CHANGE\u003c/strong\u003e\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003ch3\u003e\u003cstrong\u003ePIN CHANGE APPROVED\u003c/strong\u003e\u003c/h3\u003e\r\n\u003cp\u003eYour PIN has been successfully changed.\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch3\u003eCARDHOLDER RECEIPT\u003c/h3\u003e\u003cbr\u003e\r\n\u003cp\u003ePlease retain for your records\u003c/p\u003e\r\n\u003cp\u003eThis is not a VAT receipt\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                                    },
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "basket":{
                                       "id":"{{ outputData.referenceData.item.itemName }}"
                                    },
                                    "transaction":{
                                       "entryType":"banking",
                                       "fulfilmentAction":"pinChange",
                                       "itemID":"{{ outputData.referenceData.item.itemID }}",
                                       "merchantNumber":"TBC",
                                       "quantity":"1",
                                       "quantityFixed":"true",
                                       "receiptLine":"1",
                                       "routingGateway":"TBC",
                                       "tokens.agentSlaInfo":"TBC",
                                       "tokens.amountRequested":"0",
                                       "tokens.authorisation_code":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.bankResponse":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.bankTransactionID":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.bankValueFlag":"N",
                                       "tokens.cardImpounded":"0",
                                       "tokens.clientID":"{{ outputData.referenceData.tokenmask.ClientId }}",
                                       "tokens.counterSlaInfo":"TBC",
                                       "tokens.currency":"GBP",
                                       "tokens.fee":"0",
                                       "tokens.financialTransaction":"TBC",
                                       "tokens.horizonTransactionID":"TBC",
                                       "tokens.issuerSchemeID":"{{ outputData.referenceData.tokenmask.IssuerScheme }}",
                                       "tokens.pan":"{{ outputData.pedResponseX.maskedPan }}",
                                       "tokens.receiptDate":"{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                                       "tokens.recoveryFlag":"N",
                                       "tokens.responseCode":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.settlementDate":"{{ FORMAT_DATE(NOW(), \"YYYYMMDD\") }}",
                                       "tokens.transactionResultCode":"WILL_COME_FROM_FULFILLMENT",
                                       "tokens.transactionType":"TBC",
                                       "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
                                       "value":"0",
                                       "valueInPence":"0",
                                       "voidable":"true"
                                    },
                                    "type":"complete"
                                 }
                              ],
                              "outputData":{
                                 
                              },
                              "type":"condition"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"false",
                        "given":"{{ outputData.referenceData.isValidOperation }}",
                        "nodes":[
                           {
                              "description":"The transaction has been declined. Advise the customer to use an alternative card for this transaction.",
                              "title":"Unsupported Card",
                              "type":"info"
                           },
                           {
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "title":"Cancel Transaction",
                              "type":"choice",
                              "visual":{
                                 "transition":true
                              }
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "referenceData":"{{ inputData.enablers.referenceData }}"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"01",
                  "given":"{{ outputData.pedResponseX.responseCode }}",
                  "nodes":[
                     {
                        "name":"TransactionDeclinedPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "pedResponseX":"{{ inputData.enablers.changePinX }}"
            },
            "type":"condition"
         }
      ],
      "PFWContract":[
         {
            "comparison":"matchregexp",
            "enablers":[
               {
                  "action":"afterLastDespatch",
                  "id":"lastDespatch",
                  "loadingMessage":"Waiting for despatch info...",
                  "name":"despatch",
                  "params":{
                     "branchID":"{{ appData.device.branchID }}",
                     "carrierID":"PF",
                     "clerkID":"1",
                     "counterID":"{{ appData.device.nodeID }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"^(PB|BS|TW|TS|CE|FW|FS|NW|NS|VS|VW|XW|XS).{12}$|^(PB|BS|TW|TS|FW|FS|NW|NS|VS|VW|XW|XS|CP|CE|EE|EK|CK|CU|EU|EB|ED).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"true",
                  "given":"{{ outputData.afterLastCollection }}",
                  "nodes":[
                     {
                        "nodes":[
                           {
                              "name":"pfwOptionListForTrue",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Next",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"false",
                  "given":"{{ outputData.afterLastCollection }}",
                  "nodes":[
                     {
                        "nodes":[
                           {
                              "name":"pfwOptionsList",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Next",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "afterLastCollection":"{{ inputData.enablers.lastDespatch.afterLastDispatch }}",
               "fromOption":"false"
            },
            "type":"condition"
         }
      ],
      "RBS_BCD":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"0.00",
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Amount is required."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.maximumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.amount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"re-enter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirmed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"re-enter",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirmed",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "comparison":"matchregexp",
                                          "expected":"{{ outputData.barcodeSplit[2] }}",
                                          "given":"/^(0|1|2|3)$/",
                                          "nodes":[
                                             {
                                                "name":"RBS_BCD_Entry",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "outputData":{
                                             "accountNumber":"{{ outputData.barcodeSplit[5] }}"
                                          },
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"{{ outputData.barcodeSplit[2] }}",
                                          "given":"4",
                                          "nodes":[
                                             {
                                                "name":"RBS_BCD_Entry",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "outputData":{
                                             "HOCACode":"{{ outputData.barcodeSplit[5] }}",
                                             "accountNumber":"00000000"
                                          },
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "HOCACode":" ",
                                       "serialNo":"{{ outputData.barcodeSplit[3] }}",
                                       "sortcode":"{{ outputData.barcodeSplit[4] }}",
                                       "svc":"{{ outputData.barcodeSplit[2] }}",
                                       "transCode":"77"
                                    },
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "accountNumber":"00000000",
               "amount":"{{ inputData.inputValue }}",
               "barcodeSplit":"{{ REGEXP_SPLIT(\"{{ outputData.Rref }}\", \"^(\\w{8})(\\w{1})(\\w{6})(\\w{6})(\\w{8})(\\w{1})\") }}"
            },
            "title":"Amount",
            "type":"input",
            "unit":{
               "position":"left",
               "type":"text",
               "value":"£"
            }
         }
      ],
      "RBS_BCD_Entry":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"print",
                  "id":"printCustomerReceipt",
                  "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                  "name":"printer",
                  "params":{
                     "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "basket":{
                     "id":"{{ outputData.itemName }}"
                  },
                  "transaction":{
                     "entryType":"banking",
                     "itemID":"{{ outputData.itemID }}",
                     "quantity":"1",
                     "quantityFixed":"true",
                     "receiptLine":"1",
                     "tokens.APTransactionReference":"0001",
                     "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                     "tokens.HOCA":"{{ outputData.HOCACode }}",
                     "tokens.PCA":" ",
                     "tokens.SVC":"{{ outputData.svc }}",
                     "tokens.SerialNo":"{{ outputData.serialNo }}",
                     "tokens.SortCode":"{{ outputData.sortcode }}",
                     "tokens.TranCode":"77",
                     "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                     "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                     "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                     "tokens.paymentCode":"1",
                     "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                     "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                     "tokens.versionNumber":"1",
                     "value":"{{ outputData.amount }}",
                     "valueInPence":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                     "voidable":"true"
                  },
                  "type":"complete"
               }
            ],
            "type":"condition"
         }
      ],
      "RMaddToBasket":[
         {
            "basket":{
               "Carrier":"{{ outputData.Carrier}}",
               "Tracking Reference":"{{ outputData.barcodeInfo.barcode }}",
               "id":"{{ outputData.barcodeInfo.barcode }}",
               "journeyType":"{{ outputData.journeyType }}"
            },
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Dest":"999",
               "tokens.Function":" ",
               "tokens.NumberOfItems":"1",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandT":"{{ outputData.TandT }}",
               "tokens.TandTCarrier":"{{ outputData.TandTCarrier }}",
               "tokens.TandTSvcID":" ",
               "tokens.TandTType":"{{ outputData.TandTType }}",
               "tokens.UPUTrackingNumber":" {{ outputData.barcodeInfo.barcode }}",
               "tokens.accLineType":"PS1",
               "tokens.addressValidated":"0",
               "tokens.afterLastDespatch":"1",
               "tokens.barcode":"{{ outputData.rawBarcode }}",
               "tokens.carrier":"{{ outputData.barcodeInfo.Carrier }}",
               "tokens.clientAccountNo":"3292",
               "tokens.clientSrvCode":" ",
               "tokens.compensationValue":" ",
               "tokens.conditionAccepted":" ",
               "tokens.consequentialLossBand":" ",
               "tokens.copIssued":"0",
               "tokens.copprn":" ",
               "tokens.country":"GB",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.destination":"UK (EU)",
               "tokens.destinationAddress":" ",
               "tokens.destinationAreaId":"999",
               "tokens.firstAddressLine":" ",
               "tokens.incidentCodes":"{{ outputData.incidentCodes }}",
               "tokens.international":" ",
               "tokens.isFranked":"0",
               "tokens.itemOnHand":"{{ outputData.itemOnHand }}",
               "tokens.parcelStatus":"{{ outputData.parcelStatus}}",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":"{{ outputData.product.PIPFormat }}",
               "tokens.prePaidLine":"1",
               "tokens.prepaidAmount":"0",
               "tokens.prn":" ",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.ServiceId }}",
               "tokens.serviceName":"{{ outputData.serviceName }}",
               "tokens.tokenIdentifier":"6729",
               "tokens.town":" ",
               "tokens.versionNumber":"1",
               "tokens.weight":"  ",
               "transactionStartTime":"NEED_TO_IMPLEMENT",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "RMaddToBasketWithReturn":[
         {
            "basket":{
               "Carrier":"{{ outputData.Carrier}}",
               "Tracking Reference":"{{ outputData.barcodeInfo.barcode }}",
               "id":"{{ outputData.barcodeInfo.barcode }}",
               "journeyType":"{{ outputData.journeyType }}"
            },
            "returnTo":"scanBarcode",
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Dest":"999",
               "tokens.Function":" ",
               "tokens.NumberOfItems":"1",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandT":"{{ outputData.TandT }}",
               "tokens.TandTCarrier":"{{ outputData.TandTCarrier }}",
               "tokens.TandTSvcID":" ",
               "tokens.TandTType":"{{ outputData.TandTType }}",
               "tokens.UPUTrackingNumber":" {{ outputData.barcodeInfo.barcode }}",
               "tokens.accLineType":"PS1",
               "tokens.addressValidated":"0",
               "tokens.afterLastDespatch":"1",
               "tokens.barcode":"{{ outputData.rawBarcode }}",
               "tokens.carrier":"{{ outputData.barcodeInfo.Carrier }}",
               "tokens.clientAccountNo":"3292",
               "tokens.clientSrvCode":" ",
               "tokens.compensationValue":" ",
               "tokens.conditionAccepted":" ",
               "tokens.consequentialLossBand":" ",
               "tokens.copIssued":"0",
               "tokens.copprn":" ",
               "tokens.country":"GB",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.destination":"UK (EU)",
               "tokens.destinationAddress":" ",
               "tokens.destinationAreaId":"999",
               "tokens.firstAddressLine":" ",
               "tokens.incidentCodes":"{{ outputData.incidentCodes }}",
               "tokens.international":" ",
               "tokens.isFranked":"0",
               "tokens.itemOnHand":"{{ outputData.itemOnHand }}",
               "tokens.parcelStatus":"{{ outputData.parcelStatus}}",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":"{{ outputData.product.PIPFormat }}",
               "tokens.prePaidLine":"1",
               "tokens.prepaidAmount":"0",
               "tokens.prn":" ",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.ServiceId }}",
               "tokens.serviceName":"{{ outputData.serviceName }}",
               "tokens.tokenIdentifier":"6729",
               "tokens.town":" ",
               "tokens.versionNumber":"1",
               "tokens.weight":"  ",
               "transactionStartTime":"NEED_TO_IMPLEMENT",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "ReturnsAcceptance":[
         {
            "comparison":"eq",
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"matchregexp",
                  "expected":"(^DA|FM|FN|FY|HU|HX|HZ|JK|JM|JN|JP|JQ|MU|NT|QK|QL|QM|QN|QQ|QX|QY|QZ|ST|VX|VZ|XC|XE|XF|YE|ZD|ZF|ZL|ZR|ZS|ZT|ZY|ZZ).{9}(GB)$",
                  "given":"{{ outputData.TD }}",
                  "nodes":[
                     {
                        "name":"returnsAcceptanceProductLookup1d",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"matchregexp",
                  "expected":"(^DA|FM|FN|FY|HU|HX|HZ|JK|JM|JN|JP|JQ|MU|NT|QK|QL|QM|QN|QQ|QX|QY|QZ|ST|VX|VZ|XC|XE|XF|YE|ZD|ZF|ZL|ZR|ZS|ZT|ZY|ZZ).{9}(GB)",
                  "given":"{{ outputData.TD }}",
                  "nodes":[
                     {
                        "name":"returnsAcceptanceProductLookup2d",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"returnsAcceptanceErrorMessage",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "type":"condition"
         }
      ],
      "TSBManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149006",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^(?!(300000|774832|774831)$)",
                           "message":"This transaction is not supported at Post Office, please refer customer to their bank."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "description":"Enter",
                                                            "inputMask":"alphanumeric",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "required":{
                                                                     "message":"Serial number is required."
                                                                  }
                                                               },
                                                               {
                                                                  "field":"inputValue",
                                                                  "format":{
                                                                     "match":"^[0-9]{6,6}$",
                                                                     "message":"Serial Number must be 6 digits in length."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "description":"0.00",
                                                                  "inputMask":"currency",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "numericality":{
                                                                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"0.00",
                                                                        "inputMask":"currency",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"Amount is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"The amounts entered mismatch. Please re-key.",
                                                                                 "value":"{{ outputData.inputAmount }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "actions":[
                                                                                 {
                                                                                    "title":"Re-enter",
                                                                                    "value":"reenter",
                                                                                    "visual":{
                                                                                       "view":"secondary"
                                                                                    }
                                                                                 },
                                                                                 {
                                                                                    "title":"Confirm",
                                                                                    "value":"confirm",
                                                                                    "visual":{
                                                                                       "view":"primary"
                                                                                    }
                                                                                 }
                                                                              ],
                                                                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                                              "nodes":[
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"reenter",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "numberOfSteps":4,
                                                                                          "type":"undo"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 },
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"confirm",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                                                          "type":"subJourney"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 }
                                                                              ],
                                                                              "outputData":{
                                                                                 "actions.inputGroup":"{{ inputData.action }}"
                                                                              },
                                                                              "title":"Confirm Deposit amount",
                                                                              "type":"prompt",
                                                                              "visual":{
                                                                                 "actionAlignment":"left",
                                                                                 "transition":false
                                                                              }
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter Amount",
                                                                        "type":"input",
                                                                        "unit":{
                                                                           "position":"left",
                                                                           "type":"text",
                                                                           "value":"£"
                                                                        }
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "inputAmount":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"Amount",
                                                                  "type":"input",
                                                                  "unit":{
                                                                     "position":"left",
                                                                     "type":"text",
                                                                     "value":"£"
                                                                  }
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "serialNo":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Serial Number",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "expectedBankNames":"TSB|tsb"
            },
            "type":"condition"
         }
      ],
      "TransactionDeclinedPrompt":[
         {
            "actions":[
               {
                  "title":"Continue",
                  "value":"continue",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"MSG99620: The transaction has been cancelled",
            "nodes":[
               {
                  "type":"abort"
               }
            ],
            "title":"Transaction Declined",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "UlsterManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149010",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "description":"Enter",
                                                            "inputMask":"alphanumeric",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "required":{
                                                                     "message":"Serial number is required."
                                                                  }
                                                               },
                                                               {
                                                                  "field":"inputValue",
                                                                  "format":{
                                                                     "match":"^[0-9]{6,6}$",
                                                                     "message":"Serial Number must be 6 digits in length."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "description":"0.00",
                                                                  "inputMask":"currency",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "numericality":{
                                                                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"0.00",
                                                                        "inputMask":"currency",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"Amount is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"The amounts entered mismatch. Please re-key.",
                                                                                 "value":"{{ outputData.inputAmount }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "actions":[
                                                                                 {
                                                                                    "title":"Re-enter",
                                                                                    "value":"reenter",
                                                                                    "visual":{
                                                                                       "view":"secondary"
                                                                                    }
                                                                                 },
                                                                                 {
                                                                                    "title":"Confirm",
                                                                                    "value":"confirm",
                                                                                    "visual":{
                                                                                       "view":"primary"
                                                                                    }
                                                                                 }
                                                                              ],
                                                                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                                              "nodes":[
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"reenter",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "numberOfSteps":4,
                                                                                          "type":"undo"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 },
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"confirm",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                                                          "type":"subJourney"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 }
                                                                              ],
                                                                              "outputData":{
                                                                                 "actions.inputGroup":"{{ inputData.action }}"
                                                                              },
                                                                              "title":"Confirm Deposit amount",
                                                                              "type":"prompt",
                                                                              "visual":{
                                                                                 "actionAlignment":"left",
                                                                                 "transition":false
                                                                              }
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter Amount",
                                                                        "type":"input",
                                                                        "unit":{
                                                                           "position":"left",
                                                                           "type":"text",
                                                                           "value":"£"
                                                                        }
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "inputAmount":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"Amount",
                                                                  "type":"input",
                                                                  "unit":{
                                                                     "position":"left",
                                                                     "type":"text",
                                                                     "value":"£"
                                                                  }
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "serialNo":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Serial Number",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "expectedBankNames":"ULSTER BANK|Ulster Bank|ulster bank"
            },
            "type":"condition"
         }
      ],
      "Ulster_BCD":[
         {
            "description":"{{ outputData.ClientAccName }}",
            "title":"Bank name",
            "type":"info"
         },
         {
            "description":"{{ outputData.Rref }}",
            "title":"PAN",
            "type":"info"
         },
         {
            "description":"{{ outputData.itemName }}",
            "title":"Description",
            "type":"info"
         },
         {
            "description":"0.00",
            "inputMask":"currency",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "required":{
                     "message":"Amount is required."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.maximumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               },
               {
                  "field":"inputValue",
                  "numericality":{
                     "gte":"{{ outputData.minimumValue }}",
                     "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.maximumValue }}\", \"GBP\") }}."
                  }
               }
            ],
            "nodes":[
               {
                  "description":"0.00",
                  "inputMask":"currency",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Amount is required."
                        }
                     },
                     {
                        "confirmation":{
                           "message":"The amounts entered mismatch. Please re-key.",
                           "value":"{{ outputData.amount }}"
                        },
                        "field":"inputValue"
                     }
                  ],
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Re-enter",
                              "value":"re-enter",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Confirm",
                              "value":"confirmed",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.amount }}\", \"GBP\") }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"re-enter",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"confirmed",
                              "given":"{{ outputData.action }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "comparison":"matchregexp",
                                          "expected":"{{ outputData.barcodeSplit[2] }}",
                                          "given":"/^(0|1|2|3)$/",
                                          "nodes":[
                                             {
                                                "name":"Ulster_BCD_Entry",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "outputData":{
                                             "accountNumber":"{{ outputData.barcodeSplit[5] }}"
                                          },
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"{{ outputData.barcodeSplit[2] }}",
                                          "given":"4",
                                          "nodes":[
                                             {
                                                "name":"Ulster_BCD_Entry",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "outputData":{
                                             "HOCACode":"{{ outputData.barcodeSplit[5] }}",
                                             "accountNumber":"00000000"
                                          },
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "HOCACode":" ",
                                       "serialNo":"{{ outputData.barcodeSplit[3] }}",
                                       "sortcode":"{{ outputData.barcodeSplit[4] }}",
                                       "svc":"{{ outputData.barcodeSplit[2] }}",
                                       "transCode":"77"
                                    },
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "action":"{{ inputData.action }}"
                        },
                        "title":"Confirm Deposit amount",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "title":"Re-Enter Amount",
                  "type":"input",
                  "unit":{
                     "position":"left",
                     "type":"text",
                     "value":"£"
                  }
               }
            ],
            "outputData":{
               "accountNumber":"00000000",
               "amount":"{{ inputData.inputValue }}",
               "barcodeSplit":"{{ REGEXP_SPLIT(\"{{ outputData.Rref }}\", \"^(\\w{8})(\\w{1})(\\w{6})(\\w{6})(\\w{8})(\\w{1})\") }}"
            },
            "title":"Amount",
            "type":"input",
            "unit":{
               "position":"left",
               "type":"text",
               "value":"£"
            }
         }
      ],
      "Ulster_BCD_Entry":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"print",
                  "id":"printCustomerReceipt",
                  "loadingMessage":"Hand the receipt and credit slip to the customer saying 'retain until their account has been credited'.",
                  "name":"printer",
                  "params":{
                     "value":"\u003chtml\u003e\u003chead\u003e\u003cstyle\u003e*{font-family:\"monospace\"}body,tr,td,span,p,ul,li,div{font-size:24px}table{width:100%}table tbody{vertical-align:top}.no-padding h1,h2,h3,p{margin:0;padding:0}h1{font-size:32px}h2{font-size:28px}h3{font-size:24px}.text-center{text-align:center}hr{width:100%;border:0;height:1px;background-color:#ccc}\u003c/style\u003e\r\n\u003c/head\u003e\u003cbody\u003e\r\n\u003cdiv class=\"text-center no-padding\"\u003e\r\n\u003ch1\u003ePost Office Ltd.\u003c/h1\u003e\r\n\u003ch3\u003eYour Receipt\u003c/h3\u003e\r\n\u003c/div\u003e\r\n\u003chr/\u003e\r\n\u003cdiv class=no-padding\u003e\r\n\u003ctable\u003e\r\n\u003ctr\u003e\r\n\u003ctd\u003e{{ FORMAT_DATE(NOW(), \"DD/MM/YYYY H:mm\") }}\u003cbr\u003e\r\n{{ appData.device.branchName }}\u003cbr\u003e\r\n{{ appData.device.branchAddress }}\u003cbr\u003e\r\n{{ appData.device.branchPostcode }}\r\n\u003c/td\u003e\r\n\u003ctd\u003e\r\nTP: {{ appData.device.nodeID }}\u003cbr\u003e\r\nFAD: {{ appData.device.branchID }}\r\n\u003c/td\u003e\r\n\u003c/tr\u003e\r\n\u003c/table\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eSession Id: TBC\u003c/p\u003e\r\n\u003cp\u003eTxn Id: TBC\u003c/p\u003e\r\n\u003cp\u003eClient: {{ outputData.ClientAccName }}\u003c/p\u003e\r\n\u003cp\u003eScheme: {{ outputData.TokenName }}\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Svc: {{ outputData.clientSrvCode }}\u003c/p\u003e\r\n\u003cp\u003eToken Type: BC\u0026nbsp;\u0026nbsp;\u0026nbsp;\u0026nbsp;Entry: TBC\u003c/p\u003e\r\n\u003cp\u003eRef: {{ outputData.Rref }}\u003c/p\u003e\r\n\u003cp\u003eAmount: {{ outputData.amount }}\u003c/p\u003e\r\n\u003cp\u003eProduct No: {{ outputData.ProdNo }}\u003c/p\u003e\r\n\u003chr/\u003e\r\n\u003cp\u003eCustomer Ref: {{ outputData.customerRefNumber }}\u003c/p\u003e\r\n\u003c/div\u003e\r\n\u003cdiv\u003e\r\n\u003chr/\u003e\r\n\u003c/div\u003e\r\n\u003c/body\u003e\u003c/html\u003e"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "basket":{
                     "id":"{{ outputData.itemName }}"
                  },
                  "transaction":{
                     "entryType":"banking",
                     "itemID":"{{ outputData.itemID }}",
                     "quantity":"1",
                     "quantityFixed":"true",
                     "receiptLine":"1",
                     "tokens.APTransactionReference":"0001",
                     "tokens.AccountNumber":"{{ outputData.accountNumber }}",
                     "tokens.HOCA":"{{ outputData.HOCACode }}",
                     "tokens.PCA":" ",
                     "tokens.SVC":"{{ outputData.svc }}",
                     "tokens.SerialNo":"{{ outputData.serialNo }}",
                     "tokens.SortCode":"{{ outputData.sortcode }}",
                     "tokens.TranCode":"77",
                     "tokens.clientAccountNo":"{{ outputData.ClientAcc }}",
                     "tokens.clientSrvCode":"{{ outputData.clientSrvCode }}",
                     "tokens.customerRefNumber":"{{ outputData.customerRefNumber }}",
                     "tokens.paymentCode":"1",
                     "tokens.receiptReference":"{{ appData.device.nodeID }}  H",
                     "tokens.tokenIdentifier":"{{ outputData.TokenId }}",
                     "tokens.versionNumber":"1",
                     "value":"{{ outputData.amount }}",
                     "valueInPence":"{{ MULTIPLY(\"{{ outputData.amount }}\", \"100\") }}",
                     "voidable":"true"
                  },
                  "type":"complete"
               }
            ],
            "type":"condition"
         }
      ],
      "YorkshireManualCashDeposit":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Retrieving bank details...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"982693510149008",
                     "shouldGetItems":1
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"Yorkshire Bank",
                  "title":"Bank name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.Rref }}",
                  "title":"PAN",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.ClientAccName }}",
                  "title":"Client name",
                  "type":"info"
               },
               {
                  "description":"{{ outputData.barcodeInfo.itemName }}",
                  "title":"Description",
                  "type":"info"
               },
               {
                  "description":"Enter",
                  "inputMask":"alphanumeric",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Sort code is required."
                        }
                     },
                     {
                        "field":"inputValue",
                        "format":{
                           "match":"^[0-9]{6}$",
                           "message":"Branch sort code must be 6 digits in length."
                        }
                     }
                  ],
                  "nodes":[
                     {
                        "description":"Enter",
                        "inputMask":"alphanumeric",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Account number is required"
                              }
                           },
                           {
                              "field":"inputValue",
                              "format":{
                                 "match":"^[0-9]{8}$",
                                 "message":"Account number must be 8 digits in length. If less than 8, add zeros to the beginning."
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"AccountValidation",
                                    "errorMessage":"It has not been possible to validate the account number and sort code. Please try again.",
                                    "id":"accountValidation",
                                    "loadingMessage":"Validating account details",
                                    "name":"banking",
                                    "params":{
                                       "accountNumber":"{{ outputData.accountNumber }}",
                                       "sortCode":"{{ outputData.sortCode }}"
                                    },
                                    "retriable":true,
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"UnknownSortCode",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code provided has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"InvalidAccountNumber",
                                    "given":"{{ outputData.bankAccountDetails.statusInformation }}",
                                    "nodes":[
                                       {
                                          "name":"LoqateAbortError",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "outputData":{
                                       "loqateError.description":"The Sort Code / Account Number combination has not been recognised.\n\nClick Ok to end the transaction.",
                                       "loqateError.title":"Transaction Declined"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"matchregexp",
                                    "expected":"{{ outputData.expectedBankNames }}",
                                    "given":"{{ outputData.bankAccountDetails.bank }}",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Cancel",
                                                "value":"cancel",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Continue",
                                                "value":"continue",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"Confirm that you have a {{ outputData.barcodeInfo.mediumName }} slip.\n\nClick Continue to proceed, or Cancel to abort the transaction.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"continue",
                                                "nodes":[
                                                   {
                                                      "description":"Enter",
                                                      "inputMask":"alphanumeric",
                                                      "inputValidation":[
                                                         {
                                                            "field":"inputValue",
                                                            "required":{
                                                               "message":"Tran code is required."
                                                            }
                                                         },
                                                         {
                                                            "field":"inputValue",
                                                            "format":{
                                                               "match":"^[0-9]{2}$",
                                                               "message":"Tran code should be 2 digits in length."
                                                            }
                                                         }
                                                      ],
                                                      "nodes":[
                                                         {
                                                            "description":"Enter",
                                                            "inputMask":"alphanumeric",
                                                            "inputValidation":[
                                                               {
                                                                  "field":"inputValue",
                                                                  "required":{
                                                                     "message":"Serial number is required."
                                                                  }
                                                               },
                                                               {
                                                                  "field":"inputValue",
                                                                  "format":{
                                                                     "match":"^[0-9]{6,6}$",
                                                                     "message":"Serial Number must be 6 digits in length."
                                                                  }
                                                               }
                                                            ],
                                                            "nodes":[
                                                               {
                                                                  "description":"0.00",
                                                                  "inputMask":"currency",
                                                                  "inputValidation":[
                                                                     {
                                                                        "field":"inputValue",
                                                                        "numericality":{
                                                                           "gte":"{{ outputData.barcodeInfo.minimumValue }}",
                                                                           "lte":"{{ outputData.barcodeInfo.maximumValue }}",
                                                                           "message":"The value must be between {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.minimumValue }}\", \"GBP\") }} and {{ NUMBER_TO_CURRENCY(\"{{ outputData.barcodeInfo.maximumValue }}\", \"GBP\") }}."
                                                                        }
                                                                     }
                                                                  ],
                                                                  "nodes":[
                                                                     {
                                                                        "description":"0.00",
                                                                        "inputMask":"currency",
                                                                        "inputValidation":[
                                                                           {
                                                                              "field":"inputValue",
                                                                              "required":{
                                                                                 "message":"Amount is required."
                                                                              }
                                                                           },
                                                                           {
                                                                              "confirmation":{
                                                                                 "message":"The amounts entered mismatch. Please re-key.",
                                                                                 "value":"{{ outputData.inputAmount }}"
                                                                              },
                                                                              "field":"inputValue"
                                                                           }
                                                                        ],
                                                                        "nodes":[
                                                                           {
                                                                              "actions":[
                                                                                 {
                                                                                    "title":"Re-enter",
                                                                                    "value":"reenter",
                                                                                    "visual":{
                                                                                       "view":"secondary"
                                                                                    }
                                                                                 },
                                                                                 {
                                                                                    "title":"Confirm",
                                                                                    "value":"confirm",
                                                                                    "visual":{
                                                                                       "view":"primary"
                                                                                    }
                                                                                 }
                                                                              ],
                                                                              "description":"You have entered a Cash Deposit for {{ NUMBER_TO_CURRENCY(\"{{ outputData.inputAmount }}\", \"GBP\") }}",
                                                                              "nodes":[
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"reenter",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "numberOfSteps":4,
                                                                                          "type":"undo"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 },
                                                                                 {
                                                                                    "comparison":"eq",
                                                                                    "expected":"confirm",
                                                                                    "given":"{{ outputData.actions.inputGroup }}",
                                                                                    "nodes":[
                                                                                       {
                                                                                          "name":"ManualCashDeposit-PrintAndAddToBasket",
                                                                                          "type":"subJourney"
                                                                                       }
                                                                                    ],
                                                                                    "type":"condition"
                                                                                 }
                                                                              ],
                                                                              "outputData":{
                                                                                 "actions.inputGroup":"{{ inputData.action }}"
                                                                              },
                                                                              "title":"Confirm Deposit amount",
                                                                              "type":"prompt",
                                                                              "visual":{
                                                                                 "actionAlignment":"left",
                                                                                 "transition":false
                                                                              }
                                                                           }
                                                                        ],
                                                                        "title":"Re-Enter Amount",
                                                                        "type":"input",
                                                                        "unit":{
                                                                           "position":"left",
                                                                           "type":"text",
                                                                           "value":"£"
                                                                        }
                                                                     }
                                                                  ],
                                                                  "outputData":{
                                                                     "inputAmount":"{{ inputData.inputValue }}"
                                                                  },
                                                                  "title":"Amount",
                                                                  "type":"input",
                                                                  "unit":{
                                                                     "position":"left",
                                                                     "type":"text",
                                                                     "value":"£"
                                                                  }
                                                               }
                                                            ],
                                                            "outputData":{
                                                               "serialNo":"{{ inputData.inputValue }}"
                                                            },
                                                            "title":"Serial Number",
                                                            "type":"input"
                                                         }
                                                      ],
                                                      "outputData":{
                                                         "tranCode":"{{ inputData.inputValue }}"
                                                      },
                                                      "title":"Tran Code",
                                                      "type":"input"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"{{ outputData.action }}",
                                                "given":"cancel",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Confirm bank selection",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "outputData":{
                                       "PCA":"1"
                                    },
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "actions":[
                                             {
                                                "title":"Re-enter",
                                                "value":"reenter",
                                                "visual":{
                                                   "view":"secondary"
                                                }
                                             },
                                             {
                                                "title":"Abort",
                                                "value":"abort",
                                                "visual":{
                                                   "view":"primary"
                                                }
                                             }
                                          ],
                                          "description":"The bank selected does not match the sort code and account number entered.",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "expected":"reenter",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "numberOfSteps":6,
                                                      "type":"undo"
                                                   }
                                                ],
                                                "type":"condition"
                                             },
                                             {
                                                "comparison":"eq",
                                                "expected":"abort",
                                                "given":"{{ outputData.action }}",
                                                "nodes":[
                                                   {
                                                      "type":"abort"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "outputData":{
                                             "action":"{{ inputData.action }}"
                                          },
                                          "title":"Bank details mismatch",
                                          "type":"prompt",
                                          "visual":{
                                             "actionAlignment":"left"
                                          }
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "bankAccountDetails":"{{ inputData.enablers.accountValidation }}"
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "accountNumber":"{{ inputData.inputValue }}"
                        },
                        "title":"Account Number",
                        "type":"input",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "sortCode":"{{ inputData.inputValue }}"
                  },
                  "title":"Sort Code",
                  "type":"input"
               }
            ],
            "outputData":{
               "HOCACode":" ",
               "PCA":"0",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "expectedBankNames":"YORKSHIRE|Yorkshire|yorkshire"
            },
            "type":"condition"
         }
      ],
      "acceptFromCarrierPFLocalCollect":[
         {
            "basket":{
               "Carrier":"Parcelforce",
               "Tracking Reference":"{{ outputData.barcodeInfo.barcode }}",
               "id":"{{ outputData.barcodeInfo.barcode }}",
               "journeyType":"{{ outputData.journeyType }}"
            },
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Dest":"999",
               "tokens.Function":" ",
               "tokens.NumberOfItems":"1",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandT":"true",
               "tokens.TandTCarrier":"POLP",
               "tokens.TandTSvcID":" ",
               "tokens.TandTType":"{{ outputData.TandTType }}",
               "tokens.UPUTrackingNumber":" {{ outputData.barcodeInfo.barcode }}",
               "tokens.accLineType":"PS1",
               "tokens.afterLastDespatch":"0",
               "tokens.barcode":"{{ outputData.rawBarcode }}",
               "tokens.carrier":"{{ outputData.barcodeInfo.Carrier }}",
               "tokens.clientAccountNo":"3292",
               "tokens.clientSrvCode":" ",
               "tokens.country":" {{ outputData.address.countryAlpha2 }}",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.destination":"UK (EU)",
               "tokens.destinationAddress":" ",
               "tokens.destinationAreaId":"999",
               "tokens.incidentCodes":"I520",
               "tokens.itemOnHand":"true",
               "tokens.parcelStatus":"acceptFromCarrierPFLocalCollectWithReturnTo{{ outputData.parcelStatus }}",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":"{{ outputData.product.PIPFormat }}",
               "tokens.prepaidAmount":"0",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.ServiceId }}",
               "tokens.serviceName":"{{ outputData.serviceName }}",
               "tokens.tokenIdentifier":"6729",
               "tokens.versionNumber":"1",
               "tokens.weight":" ",
               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "acceptFromCarrierPFLocalCollectWithReturn":[
         {
            "basket":{
               "Carrier":"Parcelforce",
               "Tracking Reference":"{{ outputData.barcodeInfo.barcode }}",
               "id":"{{ outputData.barcodeInfo.barcode }}",
               "journeyType":"{{ outputData.journeyType }}"
            },
            "returnTo":"scanBarcode",
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Dest":"999",
               "tokens.Function":" ",
               "tokens.NumberOfItems":"1",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandT":"true",
               "tokens.TandTCarrier":"POLP",
               "tokens.TandTSvcID":" ",
               "tokens.TandTType":"{{ outputData.TandTType }}",
               "tokens.UPUTrackingNumber":" {{ outputData.barcodeInfo.barcode }}",
               "tokens.accLineType":"PS1",
               "tokens.afterLastDespatch":"0",
               "tokens.barcode":"{{ outputData.rawBarcode }}",
               "tokens.carrier":"{{ outputData.barcodeInfo.Carrier }}",
               "tokens.clientAccountNo":"3292",
               "tokens.clientSrvCode":" ",
               "tokens.country":" {{ outputData.address.countryAlpha2 }}",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.destination":"UK (EU)",
               "tokens.destinationAddress":" ",
               "tokens.destinationAreaId":"999",
               "tokens.incidentCodes":"I520",
               "tokens.itemOnHand":"true",
               "tokens.parcelStatus":"acceptFromCarrierPFLocalCollectWithReturnTo{{ outputData.parcelStatus }}",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":"{{ outputData.product.PIPFormat }}",
               "tokens.prepaidAmount":"0",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.ServiceId }}",
               "tokens.serviceName":"{{ outputData.serviceName }}",
               "tokens.tokenIdentifier":"6729",
               "tokens.versionNumber":"1",
               "tokens.weight":" ",
               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "acceptFromCarrierRMLocalCollect":[
         {
            "comparison":"eq",
            "expected":"RMLocalCollect",
            "given":"{{ outputData.barcodeInfo.type }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Back",
                        "value":"backToPFW",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Scan another Item",
                        "value":"Scan",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add To Basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"Carrier: {{outputData.Carrier}}\nTracking reference: {{ outputData.barcodeInfo.barcode }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"backToPFW",
                        "given":"{{ outputData.actions.RMLocalCollect }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"Scan",
                        "given":"{{ outputData.actions.RMLocalCollect }}",
                        "nodes":[
                           {
                              "name":"RMaddToBasketWithReturn",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.RMLocalCollect }}",
                        "nodes":[
                           {
                              "name":"RMaddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.RMLocalCollect":"{{ inputData.action }}"
                  },
                  "title":"Accept Item",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"center"
                  }
               }
            ],
            "outputData":{
               "Carrier":"Royal Mail",
               "TandTCarrier":"POLR",
               "incidentCodes":"I510"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"PFLocalCollect",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Back",
                        "value":"backToPFW",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Scan another Item",
                        "value":"Scan",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add To Basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"Carrier: Parcelforce\nTracking reference: {{ outputData.barcodeInfo.barcode }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"backToPFW",
                        "given":"{{ outputData.actions.PFLocalCollect }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"Scan",
                        "given":"{{ outputData.actions.PFLocalCollect }}",
                        "nodes":[
                           {
                              "name":"acceptFromCarrierPFLocalCollectWithReturn",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.PFLocalCollect }}",
                        "nodes":[
                           {
                              "name":"acceptFromCarrierPFLocalCollect",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.PFLocalCollect":"{{ inputData.action }}"
                  },
                  "title":"Accept Item",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"center"
                  }
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "name":"invalidLocalCollect",
                  "type":"subJourney"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"notsupported",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "name":"invalidCarrier",
                  "type":"subJourney"
               }
            ],
            "type":"condition"
         }
      ],
      "acceptFromCustomer":[
         {
            "description":"Enter barcode value",
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Please wait...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"{{ inputData.barcode }}"
                  },
                  "stepEvent":"onChange"
               }
            ],
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"ReturnsAcceptance",
                  "given":"{{ outputData.barcodeInfo.Script }}",
                  "nodes":[
                     {
                        "comparison":"in",
                        "expected":"jgb6,jgb61d",
                        "given":"{{ outputData.barcodeInfo.Type }}",
                        "nodes":[
                           {
                              "name":"ReturnsAcceptance",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"PFWContract",
                  "given":"{{ outputData.barcodeInfo.Script }}",
                  "nodes":[
                     {
                        "comparison":"in",
                        "expected":"{{ appData.basket.items[*].id }}",
                        "given":"{{ outputData.TD }}",
                        "nodes":[
                           {
                              "title":"This item is already in the basket",
                              "type":"info"
                           },
                           {
                              "nodes":[
                                 {
                                    "returnTo":"acceptFromCustomer",
                                    "type":"abort"
                                 }
                              ],
                              "title":"Scan another item",
                              "type":"choice",
                              "visual":{
                                 "transition":true
                              }
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "name":"PFWContract",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"OLPAccept",
                  "given":"{{ outputData.barcodeInfo.Script }}",
                  "nodes":[
                     {
                        "comparison":"in",
                        "expected":[
                           "jgb8"
                        ],
                        "given":"{{ outputData.barcodeInfo.Type }}",
                        "nodes":[
                           {
                              "name":"OLPAccept",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Labels2Go",
                  "given":"{{ outputData.barcodeInfo.Script }}",
                  "nodes":[
                     {
                        "name":"Labels2Go",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"returnsAcceptanceErrorMessage",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "BarcodeType":"{{ inputData.enablers.tokeniser.Type }}",
               "BuildingName":"{{ inputData.enablers.tokeniser.BuildingName }}",
               "Class":"{{ inputData.enablers.tokeniser.Class }}",
               "ClientAcc":"{{ inputData.enablers.tokeniser.ClientAcc }}",
               "ClientAccName":"{{ inputData.enablers.tokeniser.ClientAccName }}",
               "ClientId":"{{ inputData.enablers.tokeniser.ClientId }}",
               "CustomerRef":"{{ inputData.enablers.tokeniser.CustomerRef }}",
               "DateOfProduction":"{{ inputData.enablers.tokeniser.DateOfProduction }}",
               "DestinationCountry":"{{ inputData.enablers.tokeniser.DestinationCountry }}",
               "DestinationPostCode":"{{ inputData.enablers.tokeniser.DestinationPostCode }}",
               "Format":"{{ inputData.enablers.tokeniser.Format }}",
               "InformationTypeID":"{{ inputData.enablers.tokeniser.InformationTypeID }}",
               "ItemWeight":"{{ inputData.enablers.tokeniser.ItemWeight }}",
               "MailPieceType":"{{ inputData.enablers.tokeniser.MailPieceType }}",
               "MailType":"{{ inputData.enablers.tokeniser.MailType }}",
               "PaddingSpaces":"{{ inputData.enablers.tokeniser.PaddingSpaces }}",
               "PricePaid":"{{ inputData.enablers.tokeniser.PricePaid }}",
               "ProdNo":"{{ inputData.enablers.tokeniser.ProdNo }}",
               "Product":"{{ inputData.enablers.tokeniser.Product }}",
               "RequiredAtDelivery":"{{ inputData.enablers.tokeniser.RequiredAtDelivery }}",
               "ReturnToSenderPostCode":"{{ inputData.enablers.tokeniser.ReturnToSenderPostCode }}",
               "Rref":"{{ inputData.enablers.tokeniser.Rref }}",
               "Script":"{{ inputData.enablers.tokeniser.Script }}",
               "ServiceGroup":"{{ inputData.enablers.tokeniser.ServiceGroup }}",
               "TD":"{{ inputData.barcode }}",
               "TokenId":"{{ inputData.enablers.tokeniser.TokenId }}",
               "TokenName":"{{ inputData.enablers.tokeniser.TokenName }}",
               "TxnType":"{{ inputData.enablers.tokeniser.TxnType }}",
               "Type":"{{ inputData.enablers.tokeniser.Type }}",
               "UPUCountryID":"{{ inputData.enablers.tokeniser.UPUCountryID }}",
               "UPUTrackingNumber":"{{ inputData.enablers.tokeniser.UPUTrackingNumber }}",
               "UniqueIdentifier":"{{ inputData.enablers.tokeniser.UniqueIdentifier }}",
               "VersionID":"{{ inputData.enablers.tokeniser.VersionID }}",
               "WeightType":"{{ inputData.enablers.tokeniser.WeightType }}",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "basketID":"{{ inputData.enablers.tokeniser.TD }}",
               "clientSrvCode":"{{ inputData.enablers.tokeniser.clientSrvCode }}",
               "customerRefNumber":"{{ inputData.enablers.tokeniser.customerRefNumber }}",
               "itemID":"{{ inputData.enablers.tokeniser.itemID }}",
               "itemName":"{{ inputData.enablers.tokeniser.itemName }}",
               "longName":"{{ inputData.enablers.tokeniser.longName }}",
               "maximumValue":"{{ inputData.enablers.tokeniser.maximumValue }}",
               "mediumName":"{{ inputData.enablers.tokeniser.mediumName }}",
               "minimumValue":"{{ inputData.enablers.tokeniser.minimumValue }}",
               "name":"{{ inputData.enablers.tokeniser.name }}",
               "parsedBarcode":"{{ inputData.enablers.tokeniser }}",
               "returnTo":"returnsAcceptanceInputBarcode",
               "serviceValue":"{{ inputData.enablers.tokeniser.clientSrvCode }}",
               "shortName":"{{ inputData.enablers.tokeniser.shortName }}"
            },
            "title":"Input barcode",
            "type":"barcode",
            "visual":{
               "transition":true
            }
         }
      ],
      "addBasketIssueToCustomerRejected":[
         {
            "basket":{
               "ID Check":"{{outputData.product.IDcheckType}}",
               "Reference No":"{{ outputData.referneceValue }}",
               "Return Reason":"{{outputData.returnReason}}",
               "Service":"{{ outputData.service }}",
               "id":"{{ outputData.barcodeInfo.barcode }}",
               "journeyType":"{{ outputData.journeyType }}"
            },
            "transaction":{
               "basketItems":"{{ outputData.product.ReturnItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Despatch":"{{outputData.despatchFlag}}",
               "tokens.Dest":"999",
               "tokens.Function":"",
               "tokens.NumberOfItems":"1",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandTCarrier":"{{ outputData.TandTCarrier }}",
               "tokens.TandTSvcID":"",
               "tokens.TandTType":"{{ outputData.TandTType }}",
               "tokens.Tandt":"{{outputData.TandT}}",
               "tokens.UPUTrackingNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.accLineType":"PS1",
               "tokens.addressValidated":"0",
               "tokens.afterLastDespatch":"1",
               "tokens.barcode":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.capturedID":"{{ outputData.captureID }}",
               "tokens.carrier":"{{ outputData.barcodeInfo.Carrier }}",
               "tokens.clientAccountNo":"3292",
               "tokens.clientSrvCode":"",
               "tokens.compensationValue":"",
               "tokens.conditionAccepted":"",
               "tokens.consequentialLossBand":"",
               "tokens.copIssued":"0",
               "tokens.copprn":"",
               "tokens.country":"GB",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.destination":"UK (EU)",
               "tokens.destinationAddress":"",
               "tokens.destinationAreaId":"999",
               "tokens.firstAddressLine":"",
               "tokens.incidentCodes":"{{outputData.incidentCodes}}",
               "tokens.international":"",
               "tokens.isFranked":"0",
               "tokens.itemOnHand":"{{outputData.itemOnHand}}",
               "tokens.parcelStatus":"{{outputData.rejectionStatus}}",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":"{{ outputData.product.PIPFormat }}",
               "tokens.prePaidLine":"1",
               "tokens.prepaidAmount":"0",
               "tokens.prn":"",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.product.Service.ReturnServiceID }}",
               "tokens.serviceName":"{{ outputData.product.Service.ReturnServiceName }}",
               "tokens.tokenIdentifier":"6729",
               "tokens.town":"",
               "tokens.versionNumber":"1",
               "tokens.weight":"",
               "transactionStartTime":"NEED_TO_IMPLEMENT",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "bookIn":[
         {
            "actions":[
               {
                  "title":"Cancel",
                  "value":"backToPFW",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Issue to Customer",
                  "value":"BookIn",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"Carrier: {{outputData.carrierType}}\nTracking reference: {{ outputData.barcodeInfo.barcode }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"backToPFW",
                  "given":"{{ outputData.actions.BK }}",
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"productLookUp",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.BK":"{{ inputData.action }}"
            },
            "title":"This item is not booked in yet. Do you want to book in and continue issuing item to the customer?",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "calendarSubJourney":[
         {
            "defaultValues":{
               "inputValue":"{{FORMAT_DATE(NOW(),\"DD/MM/YYYY\")}}"
            },
            "inputMask":"calendar",
            "nodes":[
               {
                  "nodes":[
                     {
                        "comparison":"eq",
                        "enablers":[
                           {
                              "action":"getestimatedDeliveryDate",
                              "id":"estimatedDeliveryDate",
                              "loadingMessage":"Waiting for the Info...",
                              "name":"estimatedDeliveryDate",
                              "params":{
                                 "destinationCountryCode":"{{ outputData.countryAlpha2 }}",
                                 "destinationPostalCode":"{{ outputData.postalCode }}",
                                 "originPostalCode":"{{ appData.device.branchPostcode}}",
                                 "packageAcceptanceDateTime":"{{ outputData.intendDate }}"
                              },
                              "stepEvent":"onMatch"
                           }
                        ],
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "name":"khalaApiResponseSuccessJourney",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "destinationCity":"{{ inputData.enablers.estimatedDeliveryDate.data.destinationCity }}",
                           "destinationCountryName":"{{ inputData.enablers.estimatedDeliveryDate.data.destinationCountryName }}",
                           "destinationPostalCode":"{{ inputData.enablers.estimatedDeliveryDate.data.destinationPostalCode }}",
                           "serviceGuaranteeDate":"{{ inputData.enablers.estimatedDeliveryDate.data.serviceGuaranteeDate  }}",
                           "status":"{{inputData.enablers.estimatedDeliveryDate.status}}"
                        },
                        "type":"condition"
                     }
                  ],
                  "title":"Next",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "outputData":{
               "intendDate":"{{ inputData.inputValue }}"
            },
            "title":"Intended posting date",
            "type":"input"
         }
      ],
      "captureID":[
         {
            "comparison":"eq",
            "expected":"Proof of name",
            "given":"{{ outputData.product.IDcheckType }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"PSP",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"PSP"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"DRL",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"DRL"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"FNI",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"FNI"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"MPI",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"MPI"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"PWC",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"PWC"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"RMP",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"RMP"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"NHS",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"NHS"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"SCB",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"SCB"
                  },
                  "type":"condition"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"Proof of age",
            "given":"{{ outputData.product.IDcheckType }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"OVER25",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"OVER25"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"PSP",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"PSP"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"DRL",
                  "given":"{{ outputData.selectedIdCheck }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "captureID":"DRL"
                  },
                  "type":"condition"
               }
            ],
            "type":"condition"
         }
      ],
      "carrierType":[
         {
            "comparison":"eq",
            "expected":"RMLocalCollect",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"0",
                  "given":"{{ outputData.despatchInfo.parcelCount }}",
                  "nodes":[
                     {
                        "description":"{{ outputData.barcodeInfo.barcode }}",
                        "title":"Barcode",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"Royal Mail",
                        "title":"Carrier",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "name":"bookIn",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "carrierServiceType":"RM",
                     "carrierType":"Royal Mail",
                     "rejectReasonMessage":"Keep secure for Royal Mail. Segregate in the appropriate mail bag.",
                     "requiredBookin":"1",
                     "service":"Accept from Carrier \u0026 Customer Issue"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "description":"{{ outputData.barcodeInfo.barcode }}",
                        "title":"Barcode",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"Royal Mail",
                        "title":"Carrier",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "nodes":[
                           {
                              "name":"productLookUp",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Next",
                        "type":"choice"
                     }
                  ],
                  "outputData":{
                     "carrierServiceType":"RM",
                     "carrierType":"Royal Mail",
                     "rejectReasonMessage":"Keep secure for Royal Mail. Segregate in the appropriate mail bag.",
                     "requiredBookin":"0",
                     "service":"Customer Issue"
                  },
                  "type":"condition"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"PFLocalCollect",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"0",
                  "given":"{{ outputData.despatchInfo.parcelCount }}",
                  "nodes":[
                     {
                        "description":"{{ outputData.barcodeInfo.barcode }}",
                        "title":"Barcode",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"ParcelFroce",
                        "title":"Carrier",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "name":"bookIn",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "carrierServiceType":"PF",
                     "carrierType":"ParcelForce",
                     "rejectReasonMessage":"Keep secure for Parcelforce",
                     "requiredBookin":"1",
                     "service":"Accept from Carrier \u0026 Customer Issue"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "description":"{{ outputData.barcodeInfo.barcode }}",
                        "title":"Barcode",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"ParcelFroce",
                        "title":"Carrier",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "nodes":[
                           {
                              "name":"productLookUp",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Next",
                        "type":"choice"
                     }
                  ],
                  "outputData":{
                     "carrierServiceType":"PF",
                     "carrierType":"ParcelForce",
                     "rejectReasonMessage":"Keep secure for Parcelforce",
                     "requiredBookin":"0",
                     "service":"Customer Issue"
                  },
                  "type":"condition"
               }
            ],
            "type":"condition"
         }
      ],
      "collections":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getBookInInfo",
                  "id":"despatch",
                  "name":"despatch",
                  "params":{
                     "branchID":"{{ appData.device.branchID }}",
                     "clerkID":"2",
                     "counterID":"{{ appData.device.nodeID }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"gt",
                  "expected":"0",
                  "given":"{{ outputData.despatchInfo.parcelCount }}",
                  "nodes":[
                     {
                        "title":"Customer collection",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "name":"scanIssuer",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Issue to customer",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     },
                     {
                        "title":"Carrier tasks",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "name":"scanBarcode",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Accept from Carrier",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     },
                     {
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "title":"Return to Carrier",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"lt",
                  "expected":"1",
                  "given":"{{ outputData.despatchInfo.parcelCount }}",
                  "nodes":[
                     {
                        "title":"Customer collection",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "name":"scanIssuer",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Issue to customer",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     },
                     {
                        "title":"Carrier tasks",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "name":"scanBarcode",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Accept from Carrier",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     },
                     {
                        "title":"Return to Carrier",
                        "type":"choice"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "despatchInfo":"{{ inputData.enablers.despatch }}"
            },
            "type":"condition"
         }
      ],
      "customerRejectPrompt":[
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"backToPFW",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Add To Basket",
                  "value":"addToBasket",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"Return Reason: {{ outputData.returnReason }}\n\n {{ outputData.rejectReasonMessage}}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"backToPFW",
                  "given":"{{ outputData.actions.action }}",
                  "nodes":[
                     {
                        "numberOfSteps":3,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"addToBasket",
                  "given":"{{ outputData.actions.action }}",
                  "nodes":[
                     {
                        "name":"addBasketIssueToCustomerRejected",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.action":"{{ inputData.action }}"
            },
            "title":"Collection item refused by customer",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "dangerousGoodPrompt":[
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"back",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Check further contents",
                  "value":"Scan",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Post item now",
                  "value":"next",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"{{ outputData.dgDescription }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"back",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "numberOfSteps":3,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Scan",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "numberOfSteps":3,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"next",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.segregation":"{{ inputData.action }}"
            },
            "title":"{{ outputData.dgTitle }}",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left"
            }
         }
      ],
      "dangerousGoodPromptProhibited":[
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"back",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Proceed without printing",
                  "value":"WithoutPrint",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Print advice slip",
                  "value":"Print",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"{{ outputData.dgDescription }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"back",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "numberOfSteps":3,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"WithoutPrint",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "name":"dangerousGoodsAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Print",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "enablers":[
                           {
                              "action":"echoSlowResponse",
                              "id":"fakeReceiptPrinter",
                              "loadingMessage":"Printing advice slip...",
                              "name":"test",
                              "params":{
                                 "timeout":"2000"
                              },
                              "stepEvent":"onMatch"
                           }
                        ],
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "name":"dangerousGoodsAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.segregation":"{{ inputData.action }}"
            },
            "title":"{{ outputData.dgTitle }}",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left"
            }
         }
      ],
      "dangerousGoodsAddToBasket":[
         {
            "basket":{
               "Service":"{{ outputData.dangerousGoodsLongName }}",
               "id":"{{ outputData.dangerousGoodsShortName }}"
            },
            "transaction":{
               "basketItems":"",
               "entryType":"mails",
               "itemID":"{{ outputData.dangerousGoodsItemId }}",
               "quantity":"1",
               "receiptLine":"1",
               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "dangerousGoodsDomesticAerosols":[
         {
            "title":"Is the aerosol for medical or toiletry purposes? ",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "title":"Is the aerosol can 500ml or less?",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "title":"How many aerosols are present?",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Back",
                                    "value":"back",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Check further contents",
                                    "value":"Scan",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Next",
                                    "value":"next",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"{{ outputData.dgDescription }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"back",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":3,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"Scan",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsReturnToFromBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"next",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.segregation":"{{ inputData.action }}"
                              },
                              "title":"{{ outputData.dgTitle }}",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "outputData":{
                           "dangerousGoodsItemId":"36904",
                           "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Aerosols Restricted",
                           "dangerousGoodsShortName":"Aerosols Restricted",
                           "dgDescription":"1. Print ID8000 label and apply it to the item\n2. Tick the relevant box\n3. Check a return address is applied",
                           "dgTitle":"Contents are restricted and require action"
                        },
                        "title":"1-2",
                        "type":"choice"
                     },
                     {
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Back",
                                    "value":"back",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Proceed without printing",
                                    "value":"ProceedWithoutPrinting",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Print advice slip",
                                    "value":"PrintReceipt",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"{{ outputData.dgDescription }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"back",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":3,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"ProceedWithoutPrinting",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "type":"abort"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"PrintReceipt",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "enablers":[
                                             {
                                                "action":"echoSlowResponse",
                                                "id":"fakeReceiptPrinter",
                                                "loadingMessage":"Printing advice slip...",
                                                "name":"test",
                                                "params":{
                                                   "timeout":"2000"
                                                },
                                                "stepEvent":"onMatch"
                                             }
                                          ],
                                          "expected":"1",
                                          "given":"1",
                                          "nodes":[
                                             {
                                                "name":"dangerousGoodsAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.segregation":"{{ inputData.action }}"
                              },
                              "title":"{{ outputData.dgTitle }}",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "outputData":{
                           "dangerousGoodsItemId":"36905",
                           "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Aerosols Prohibited",
                           "dangerousGoodsShortName":"Aerosols Prohibited",
                           "dgDescription":"1. Ask if the customer needs a prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
                           "dgTitle":"Item is prohibited and cannot be sent"
                        },
                        "title":"3 or more",
                        "type":"choice"
                     }
                  ],
                  "title":"Yes",
                  "type":"choice"
               },
               {
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Back",
                              "value":"back",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Proceed without printing",
                              "value":"ProceedWithoutPrinting",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Print advice slip",
                              "value":"PrintReceipt",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"{{ outputData.dgDescription }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"back",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":3,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"ProceedWithoutPrinting",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"PrintReceipt",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"echoSlowResponse",
                                          "id":"fakeReceiptPrinter",
                                          "loadingMessage":"Printing advice slip...",
                                          "name":"test",
                                          "params":{
                                             "timeout":"2000"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.segregation":"{{ inputData.action }}"
                        },
                        "title":"{{ outputData.dgTitle }}",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "dangerousGoodsItemId":"36905",
                     "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Aerosols Prohibited",
                     "dangerousGoodsShortName":"Aerosols Prohibited",
                     "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
                     "dgTitle":"Item is Prohibited and cannot be sent"
                  },
                  "title":"No",
                  "type":"choice"
               }
            ],
            "title":"Yes",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Back",
                        "value":"back",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Proceed without printing",
                        "value":"ProceedWithoutPrinting",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Print advice slip",
                        "value":"PrintReceipt",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.dgDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"back",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"ProceedWithoutPrinting",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"PrintReceipt",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"echoSlowResponse",
                                    "id":"fakeReceiptPrinter",
                                    "loadingMessage":"Printing advice slip...",
                                    "name":"test",
                                    "params":{
                                       "timeout":"2000"
                                    },
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.segregation":"{{ inputData.action }}"
                  },
                  "title":"{{ outputData.dgTitle }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36905",
               "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Aerosols Prohibited",
               "dangerousGoodsShortName":"Aerosols Prohibited",
               "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
               "dgTitle":"Item is prohibited and cannot be sent"
            },
            "title":"No",
            "type":"choice"
         }
      ],
      "dangerousGoodsDomesticBattery":[
         {
            "title":"Does the battery contain lithium?",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "title":"Are the batteries in a device?",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Back",
                              "value":"back",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Check further contents",
                              "value":"Scan",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Next",
                              "value":"next",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"{{ outputData.dgDescription }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"back",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":3,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"Scan",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"next",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.segregation":"{{ inputData.action }}"
                        },
                        "title":"{{ outputData.dgTitle }}",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "dangerousGoodsItemId":"36913",
                     "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Lith Batteries Inside Restricted",
                     "dangerousGoodsShortName":"Domestic Batteries Inside Restricted",
                     "dgDescription":"1. Check parcel contains no more than 2 batteries in a device\n2. Check a return address is applied",
                     "dgTitle":"Item is restricted but no label is required"
                  },
                  "title":"Yes",
                  "type":"choice",
                  "visual":{
                     "transition":false
                  }
               },
               {
                  "nodes":[
                     {
                        "title":"Are the batteries with the device?",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Back",
                                    "value":"back",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Check further contents",
                                    "value":"Scan",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Next",
                                    "value":"next",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"{{ outputData.dgDescription }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"back",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":3,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"Scan",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"next",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.segregation":"{{ inputData.action }}"
                              },
                              "title":"{{ outputData.dgTitle }}",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "outputData":{
                           "dangerousGoodsItemId":"36914",
                           "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Lith Batteries With Restricted",
                           "dangerousGoodsShortName":"Domestic Batteries With Restricted",
                           "dgDescription":"1. Check parcel contains no more than 2 batteries in a device\n2. Check a return address is applied",
                           "dgTitle":"Item is restricted but no label is required"
                        },
                        "title":"Yes",
                        "type":"choice",
                        "visual":{
                           "transition":false
                        }
                     },
                     {
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Back",
                                    "value":"back",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Proceed without printing",
                                    "value":"ProceedWithoutPrinting",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Print advice slip",
                                    "value":"PrintReceipt",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"{{ outputData.dgDescription }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"back",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":3,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"ProceedWithoutPrinting",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "type":"abort"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"PrintReceipt",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "enablers":[
                                             {
                                                "action":"echoSlowResponse",
                                                "id":"fakeReceiptPrinter",
                                                "loadingMessage":"Printing advice slip...",
                                                "name":"test",
                                                "params":{
                                                   "timeout":"2000"
                                                },
                                                "stepEvent":"onMatch"
                                             }
                                          ],
                                          "expected":"1",
                                          "given":"1",
                                          "nodes":[
                                             {
                                                "name":"dangerousGoodsAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.segregation":"{{ inputData.action }}"
                              },
                              "title":"{{ outputData.dgTitle }}",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "outputData":{
                           "dangerousGoodsItemId":"36915",
                           "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Lith Batteries Prohibited",
                           "dangerousGoodsShortName":"Domestic Batteries Prohibited",
                           "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
                           "dgTitle":"Item is prohibited and cannot be sent"
                        },
                        "title":"No",
                        "type":"choice",
                        "visual":{
                           "transition":false
                        }
                     }
                  ],
                  "title":"No",
                  "type":"choice"
               }
            ],
            "title":"Yes",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Back",
                        "value":"back",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Check further contents",
                        "value":"Scan",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Next",
                        "value":"next",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.dgDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"back",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"Scan",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "name":"dangerousGoodsAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"next",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "name":"dangerousGoodsAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.segregation":"{{ inputData.action }}"
                  },
                  "title":"{{ outputData.dgTitle }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36916",
               "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Non Lit Batteries Not Restricted",
               "dangerousGoodsShortName":"Domestic Batteries Not Restricted",
               "dgDescription":"1. Check parcel contains no more than 2 batteries in a device\n2. Check a return address is applied",
               "dgTitle":"Item is restricted but no label is required"
            },
            "title":"No",
            "type":"choice"
         }
      ],
      "dangerousGoodsDomesticNailVarnish":[
         {
            "title":"Does the parcel contain Nail varnish remover?",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Back",
                        "value":"back",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Proceed without printing",
                        "value":"ProceedWithoutPrinting",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Print advice slip",
                        "value":"PrintReceipt",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.dgDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"back",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"ProceedWithoutPrinting",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"PrintReceipt",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"echoSlowResponse",
                                    "id":"fakeReceiptPrinter",
                                    "loadingMessage":"Printing advice slip...",
                                    "name":"test",
                                    "params":{
                                       "timeout":"2000"
                                    },
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.segregation":"{{ inputData.action }}"
                  },
                  "title":"{{ outputData.dgTitle }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36910",
               "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Nail Varnish Prohibited",
               "dangerousGoodsShortName":"Nail Varnish Prohibited",
               "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
               "dgTitle":"Item is prohibited and cannot be sent"
            },
            "title":"Yes",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "title":"How many bottles of Nail varnish are in there?",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Back",
                              "value":"back",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Check further contents",
                              "value":"Scan",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Next",
                              "value":"next",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"{{ outputData.dgDescription }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"back",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":3,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"Scan",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"next",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.segregation":"{{ inputData.action }}"
                        },
                        "title":"{{ outputData.dgTitle }}",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "dangerousGoodsItemId":"36909",
                     "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Nail Varnish Restricted",
                     "dangerousGoodsShortName":"Nail Varnish Restricted",
                     "dgDescription":"1. Print ID8000 label and apply it to the item\n2. Tick the relevant box\n3. Check a return address is applied",
                     "dgTitle":"Contents are restricted and require action"
                  },
                  "title":"4 or less",
                  "type":"choice",
                  "visual":{
                     "transition":false
                  }
               },
               {
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Back",
                              "value":"back",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Proceed without printing",
                              "value":"ProceedWithoutPrinting",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Print advice slip",
                              "value":"PrintReceipt",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"{{ outputData.dgDescription }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"back",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":3,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"ProceedWithoutPrinting",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"PrintReceipt",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"echoSlowResponse",
                                          "id":"fakeReceiptPrinter",
                                          "loadingMessage":"Printing advice slip...",
                                          "name":"test",
                                          "params":{
                                             "timeout":"2000"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.segregation":"{{ inputData.action }}"
                        },
                        "title":"{{ outputData.dgTitle }}",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "dangerousGoodsItemId":"36910",
                     "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Nail Varnish Prohibited",
                     "dangerousGoodsShortName":"Nail Varnish Prohibited",
                     "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
                     "dgTitle":"Item is prohibited and cannot be sent"
                  },
                  "title":"5 or more",
                  "type":"choice",
                  "visual":{
                     "transition":false
                  }
               }
            ],
            "title":"No",
            "type":"choice"
         }
      ],
      "dangerousGoodsDomesticPerfumeAftershave":[
         {
            "title":"How many bottles of perfume or aftershave are in the parcel?",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "title":"Is the item(s) in its original packaging?",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "title":"What is the volume of the individual items?",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Back",
                                    "value":"back",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Check further contents",
                                    "value":"Scan",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Next",
                                    "value":"next",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"{{ outputData.dgDescription }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"back",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":3,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"Scan",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"next",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.segregation":"{{ inputData.action }}"
                              },
                              "title":"{{ outputData.dgTitle }}",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "outputData":{
                           "dangerousGoodsItemId":"36911",
                           "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Perfume Restricted",
                           "dangerousGoodsShortName":"Perfume Restricted",
                           "dgDescription":"1. Print ID8000 label and apply it to the item\n2. Tick the relevant box\n3. Check a return address is applied",
                           "dgTitle":"Item are restricted and require action"
                        },
                        "title":"No more than 150ml",
                        "type":"choice"
                     },
                     {
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Back",
                                    "value":"back",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Proceed without printing",
                                    "value":"ProceedWithoutPrinting",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Print advice slip",
                                    "value":"PrintReceipt",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"{{ outputData.dgDescription }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"back",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":3,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"ProceedWithoutPrinting",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "type":"abort"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"PrintReceipt",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "enablers":[
                                             {
                                                "action":"echoSlowResponse",
                                                "id":"fakeReceiptPrinter",
                                                "loadingMessage":"Printing advice slip...",
                                                "name":"test",
                                                "params":{
                                                   "timeout":"2000"
                                                },
                                                "stepEvent":"onMatch"
                                             }
                                          ],
                                          "expected":"1",
                                          "given":"1",
                                          "nodes":[
                                             {
                                                "name":"dangerousGoodsAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.segregation":"{{ inputData.action }}"
                              },
                              "title":"{{ outputData.dgTitle }}",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "outputData":{
                           "dangerousGoodsItemId":"36912",
                           "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Perfume Prohibited",
                           "dangerousGoodsShortName":"Perfume Prohibited",
                           "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
                           "dgTitle":"Item is prohibited and cannot be sent"
                        },
                        "title":"More than 150ml",
                        "type":"choice"
                     }
                  ],
                  "title":"Yes",
                  "type":"choice"
               },
               {
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Back",
                              "value":"back",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Proceed without printing",
                              "value":"ProceedWithoutPrinting",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Print advice slip",
                              "value":"PrintReceipt",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"{{ outputData.dgDescription }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"back",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":3,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"ProceedWithoutPrinting",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"PrintReceipt",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"echoSlowResponse",
                                          "id":"fakeReceiptPrinter",
                                          "loadingMessage":"Printing advice slip...",
                                          "name":"test",
                                          "params":{
                                             "timeout":"2000"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.segregation":"{{ inputData.action }}"
                        },
                        "title":"{{ outputData.dgTitle }}",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "dangerousGoodsItemId":"36912",
                     "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Perfume Prohibited",
                     "dangerousGoodsShortName":"Perfume Prohibited",
                     "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
                     "dgTitle":"Item is prohibited and cannot be sent"
                  },
                  "title":"No",
                  "type":"choice"
               }
            ],
            "title":"4 or less",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Back",
                        "value":"back",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Proceed without printing",
                        "value":"ProceedWithoutPrinting",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Print advice slip",
                        "value":"PrintReceipt",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.dgDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"back",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"ProceedWithoutPrinting",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"PrintReceipt",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"echoSlowResponse",
                                    "id":"fakeReceiptPrinter",
                                    "loadingMessage":"Printing advice slip...",
                                    "name":"test",
                                    "params":{
                                       "timeout":"2000"
                                    },
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.segregation":"{{ inputData.action }}"
                  },
                  "title":"{{ outputData.dgTitle }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36912",
               "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Perfume Prohibited",
               "dangerousGoodsShortName":"Perfume Prohibited",
               "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted Items leaflet",
               "dgTitle":"Item is prohibited and cannot be sent"
            },
            "title":"5 or more",
            "type":"choice"
         }
      ],
      "dangerousGoodsDomesticRestricted":[
         {
            "title":"What is the restricted content?",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsDomesticAerosols",
                  "type":"subJourney"
               }
            ],
            "title":"Aerosols",
            "type":"choice",
            "visual":{
               "transition":true
            }
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsDomesticBattery",
                  "type":"subJourney"
               }
            ],
            "title":"Lithium Batteries",
            "type":"choice",
            "visual":{
               "transition":true
            }
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsDomesticNailVarnish",
                  "type":"subJourney"
               }
            ],
            "title":"Nail Varnish",
            "type":"choice",
            "visual":{
               "transition":true
            }
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsDomesticPerfumeAftershave",
                  "type":"subJourney"
               }
            ],
            "title":"Perfume or aftershave",
            "type":"choice",
            "visual":{
               "transition":true
            }
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsDomesticSpirits",
                  "type":"subJourney"
               }
            ],
            "title":"Spirits",
            "type":"choice",
            "visual":{
               "transition":true
            }
         }
      ],
      "dangerousGoodsDomesticRules":[
         {
            "description":"Refer to the laminate and scan the appropriate barcode",
            "title":"Item is restricted or prohibited",
            "type":"info",
            "visual":{
               "view":"notification-info"
            }
         },
         {
            "description":"(For the purpose of safety)",
            "title":"What's inside?",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodPrompt",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "dgDescription":"1. Check that the packaging is adequate\n2. Check a return address is applied",
               "dgTitle":"Contents are not restricted",
               "returnTo":"dangerousGoodsDomesticRules"
            },
            "title":"Not restricted",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsNotRestrictedQuestionsAsked",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36903",
               "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Customer Not Restricted",
               "dangerousGoodsShortName":"Domestic Not Restricted",
               "dgDescription":"1. Check that the packaging is adequate\n2. Check a return address is applied",
               "dgTitle":"Contents are not restricted",
               "returnTo":"dangerousGoodsDomesticRules"
            },
            "title":"Not restricted - 2 or more questions asked",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "title":"What is the restricted content?",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "name":"dangerousGoodsDomesticAerosols",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Aerosols",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "name":"dangerousGoodsDomesticBattery",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Lithium Batteries",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "name":"dangerousGoodsDomesticNailVarnish",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Nail Varnish",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "name":"dangerousGoodsDomesticPerfumeAftershave",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Perfume or aftershave",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "name":"dangerousGoodsDomesticSpirits",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Spirits",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "outputData":{
               "returnTo":"dangerousGoodsDomesticRules"
            },
            "title":"Restricted",
            "type":"choice",
            "visual":{
               "transition":true
            }
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodPromptProhibited",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36902",
               "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Customer Prohibited",
               "dangerousGoodsShortName":"Domestic Prohibited",
               "dgDescription":"1. Ask if the customer needs a prohibited Item advice slip \n2. Offer the customer a Prohibited and Restricted Items leaflet",
               "dgTitle":"Contents are Prohibited and cannot be sent"
            },
            "title":"Prohibited",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "type":"abort"
               }
            ],
            "title":"Not sure - scan laminate",
            "type":"choice"
         }
      ],
      "dangerousGoodsDomesticSpirits":[
         {
            "title":"Is the alcoholic drink a spirit, EG whiskey, vodka or gin?",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "title":"Alcohol content 70% ABV or more?",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Back",
                              "value":"back",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Proceed without printing",
                              "value":"ProceedWithoutPrinting",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Print advice slip",
                              "value":"PrintReceipt",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"{{ outputData.dgDescription }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"back",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":3,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"ProceedWithoutPrinting",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"PrintReceipt",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"echoSlowResponse",
                                          "id":"fakeReceiptPrinter",
                                          "loadingMessage":"Printing advice slip...",
                                          "name":"test",
                                          "params":{
                                             "timeout":"2000"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.segregation":"{{ inputData.action }}"
                        },
                        "title":"{{ outputData.dgTitle }}",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "dangerousGoodsItemId":"36908",
                     "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Alcohol Prohibited",
                     "dangerousGoodsShortName":"Alcohol Prohibited",
                     "dgDescription":"1. Ask if the customer needs a prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items leaflet",
                     "dgTitle":"Item is prohibited and cannot be sent"
                  },
                  "title":"Yes",
                  "type":"choice",
                  "visual":{
                     "transition":false
                  }
               },
               {
                  "nodes":[
                     {
                        "title":"Is each bottle 1 litre or less?",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "title":"How many bottles are present?",
                              "type":"info"
                           },
                           {
                              "nodes":[
                                 {
                                    "actions":[
                                       {
                                          "title":"Back",
                                          "value":"back",
                                          "visual":{
                                             "view":"secondary"
                                          }
                                       },
                                       {
                                          "title":"Check further contents",
                                          "value":"Scan",
                                          "visual":{
                                             "view":"secondary"
                                          }
                                       },
                                       {
                                          "title":"Next",
                                          "value":"next",
                                          "visual":{
                                             "view":"primary"
                                          }
                                       }
                                    ],
                                    "description":"{{ outputData.dgDescription }}",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "expected":"back",
                                          "given":"{{ outputData.actions.segregation }}",
                                          "nodes":[
                                             {
                                                "numberOfSteps":3,
                                                "type":"undo"
                                             }
                                          ],
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"Scan",
                                          "given":"{{ outputData.actions.segregation }}",
                                          "nodes":[
                                             {
                                                "name":"dangerousGoodsAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"next",
                                          "given":"{{ outputData.actions.segregation }}",
                                          "nodes":[
                                             {
                                                "name":"dangerousGoodsAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "actions.segregation":"{{ inputData.action }}"
                                    },
                                    "title":"{{ outputData.dgTitle }}",
                                    "type":"prompt",
                                    "visual":{
                                       "actionAlignment":"left"
                                    }
                                 }
                              ],
                              "outputData":{
                                 "dangerousGoodsItemId":"36906",
                                 "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Alcohol Restricted",
                                 "dangerousGoodsShortName":"Alcohol Restricted",
                                 "dgDescription":"1. Check that the packaging is adequate.\n2. Check a return address is applied",
                                 "dgTitle":"Item is Restricted but no label is required"
                              },
                              "title":"1 or 2",
                              "type":"choice",
                              "visual":{
                                 "transition":false
                              }
                           },
                           {
                              "nodes":[
                                 {
                                    "actions":[
                                       {
                                          "title":"Back",
                                          "value":"back",
                                          "visual":{
                                             "view":"secondary"
                                          }
                                       },
                                       {
                                          "title":"Proceed without printing",
                                          "value":"ProceedWithoutPrinting",
                                          "visual":{
                                             "view":"secondary"
                                          }
                                       },
                                       {
                                          "title":"Print advice slip",
                                          "value":"PrintReceipt",
                                          "visual":{
                                             "view":"primary"
                                          }
                                       }
                                    ],
                                    "description":"{{ outputData.dgDescription }}",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "expected":"back",
                                          "given":"{{ outputData.actions.segregation }}",
                                          "nodes":[
                                             {
                                                "numberOfSteps":3,
                                                "type":"undo"
                                             }
                                          ],
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"ProceedWithoutPrinting",
                                          "given":"{{ outputData.actions.segregation }}",
                                          "nodes":[
                                             {
                                                "name":"dangerousGoodsAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"PrintReceipt",
                                          "given":"{{ outputData.actions.segregation }}",
                                          "nodes":[
                                             {
                                                "comparison":"eq",
                                                "enablers":[
                                                   {
                                                      "action":"echoSlowResponse",
                                                      "id":"fakeReceiptPrinter",
                                                      "loadingMessage":"Printing advice slip...",
                                                      "name":"test",
                                                      "params":{
                                                         "timeout":"2000"
                                                      },
                                                      "stepEvent":"onMatch"
                                                   }
                                                ],
                                                "expected":"1",
                                                "given":"1",
                                                "nodes":[
                                                   {
                                                      "name":"dangerousGoodsAddToBasket",
                                                      "type":"subJourney"
                                                   }
                                                ],
                                                "type":"condition"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "actions.segregation":"{{ inputData.action }}"
                                    },
                                    "title":"{{ outputData.dgTitle }}",
                                    "type":"prompt",
                                    "visual":{
                                       "actionAlignment":"left"
                                    }
                                 }
                              ],
                              "outputData":{
                                 "dangerousGoodsItemId":"36908",
                                 "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Alcohol Prohibited",
                                 "dangerousGoodsShortName":"Alcohol Prohibited",
                                 "dgDescription":"1. Ask if the customer needs a prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items leaflet",
                                 "dgTitle":"Item is prohibited and cannot be sent"
                              },
                              "title":"3 or more",
                              "type":"choice",
                              "visual":{
                                 "transition":false
                              }
                           }
                        ],
                        "title":"Yes",
                        "type":"choice"
                     },
                     {
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"Back",
                                    "value":"back",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Proceed without printing",
                                    "value":"ProceedWithoutPrinting",
                                    "visual":{
                                       "view":"secondary"
                                    }
                                 },
                                 {
                                    "title":"Print advice slip",
                                    "value":"PrintReceipt",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"{{ outputData.dgDescription }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "expected":"back",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "numberOfSteps":3,
                                          "type":"undo"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"ProceedWithoutPrinting",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 },
                                 {
                                    "comparison":"eq",
                                    "expected":"PrintReceipt",
                                    "given":"{{ outputData.actions.segregation }}",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "enablers":[
                                             {
                                                "action":"echoSlowResponse",
                                                "id":"fakeReceiptPrinter",
                                                "loadingMessage":"Printing advice slip...",
                                                "name":"test",
                                                "params":{
                                                   "timeout":"2000"
                                                },
                                                "stepEvent":"onMatch"
                                             }
                                          ],
                                          "expected":"1",
                                          "given":"1",
                                          "nodes":[
                                             {
                                                "name":"dangerousGoodsAddToBasket",
                                                "type":"subJourney"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "outputData":{
                                 "actions.segregation":"{{ inputData.action }}"
                              },
                              "title":"{{ outputData.dgTitle }}",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "outputData":{
                           "dangerousGoodsItemId":"36908",
                           "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Alcohol Prohibited",
                           "dangerousGoodsShortName":"Alcohol Prohibited",
                           "dgDescription":"1. Ask if the customer needs a prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items leaflet",
                           "dgTitle":"Item is prohibited and cannot be sent"
                        },
                        "title":"More than 1 litre",
                        "type":"choice",
                        "visual":{
                           "transition":false
                        }
                     }
                  ],
                  "title":"No",
                  "type":"choice"
               }
            ],
            "title":"Yes",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Back",
                        "value":"back",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Check further contents",
                        "value":"Scan",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"next",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.dgDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"back",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"Scan",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "name":"dangerousGoodsReturnToFromBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"next",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "name":"dangerousGoodsAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.segregation":"{{ inputData.action }}"
                  },
                  "title":"{{ outputData.dgTitle }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36907",
               "dangerousGoodsLongName":"RMG Dangerous Goods Inland - Alcohol Not Restricted",
               "dangerousGoodsShortName":"Alcohol Not Restricted",
               "dgDescription":"Check the packaging is adequate\nCheck a return address is applied",
               "dgTitle":"Item is not restricted"
            },
            "title":"No",
            "type":"choice"
         }
      ],
      "dangerousGoodsInternationalBattery":[
         {
            "title":"Does the battery contain lithium?",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "title":"Are the batteries in a device?",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Back",
                              "value":"back",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Next",
                              "value":"next",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"{{ outputData.dgDescription }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"back",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":3,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"next",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.segregation":"{{ inputData.action }}"
                        },
                        "title":"{{ outputData.dgTitle }}",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "dangerousGoodsItemId":"36212",
                     "dangerousGoodsLongName":"RMG Dangerous Goods International - Batteries Restricted Inside",
                     "dangerousGoodsShortName":"International Batteries Restricted",
                     "dgDescription":"1. Check the parcel contains no more than 2 batteries in the device\n2. Check a return address is applied\n3. Check the country specific variations as some countries will not accept these items",
                     "dgTitle":"Item is restricted and require action",
                     "returnTo":"dangerousGoodsInternationalRules"
                  },
                  "title":"Yes",
                  "type":"choice",
                  "visual":{
                     "transition":false
                  }
               },
               {
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Proceed without printing",
                              "value":"ProceedWithoutPrinting",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"Print advice slip",
                              "value":"PrintReceipt",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"{{ outputData.dgDescription }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"ProceedWithoutPrinting",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"PrintReceipt",
                              "given":"{{ outputData.actions.segregation }}",
                              "nodes":[
                                 {
                                    "comparison":"eq",
                                    "enablers":[
                                       {
                                          "action":"echoSlowResponse",
                                          "id":"fakeReceiptPrinter",
                                          "loadingMessage":"Printing advice slip...",
                                          "name":"test",
                                          "params":{
                                             "timeout":"2000"
                                          },
                                          "stepEvent":"onMatch"
                                       }
                                    ],
                                    "expected":"1",
                                    "given":"1",
                                    "nodes":[
                                       {
                                          "name":"dangerousGoodsAddToBasket",
                                          "type":"subJourney"
                                       }
                                    ],
                                    "type":"condition"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.segregation":"{{ inputData.action }}"
                        },
                        "title":"{{ outputData.dgTitle }}",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "outputData":{
                     "dangerousGoodsItemId":"36211",
                     "dangerousGoodsLongName":"RMG Dangerous Goods International - Batteries Prohibited Not Inside",
                     "dangerousGoodsShortName":"International Batteries Prohibited",
                     "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items Leaflet",
                     "dgTitle":"Item is prohibited and cannot be sent"
                  },
                  "title":"No",
                  "type":"choice",
                  "visual":{
                     "transition":false
                  }
               }
            ],
            "title":"Yes",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Check another item",
                        "value":"back",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Confirm",
                        "value":"next",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.dgDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"back",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"next",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "name":"dangerousGoodsAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.segregation":"{{ inputData.action }}"
                  },
                  "title":"{{ outputData.dgTitle }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36210",
               "dangerousGoodsLongName":"RMG Dangerous Goods International - Batteries Not Restricted",
               "dangerousGoodsShortName":"International Batteries Not Restricted",
               "dgDescription":"This item is not restricted and no action is required.\nEnsure there are a return address is on the item.",
               "dgTitle":"This item is not restricted"
            },
            "title":"No",
            "type":"choice"
         }
      ],
      "dangerousGoodsInternationalRules":[
         {
            "description":"Refer to the laminate and scan the appropriate barcode",
            "title":"Item is restricted or prohibited",
            "type":"info",
            "visual":{
               "view":"notification-info"
            }
         },
         {
            "description":"(For the purpose of safety)",
            "title":"What's inside?",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodPrompt",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "dgDescription":"1. Check that the packaging is adequate\n2. Check a return address is applied",
               "dgTitle":"Contents are not restricted",
               "returnTo":"dangerousGoodsInternationalRules"
            },
            "title":"Not restricted",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsNotRestrictedQuestionsAsked",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36208",
               "dangerousGoodsLongName":"RMG Dangerous Goods International - Customer Not Restricted",
               "dangerousGoodsShortName":"International Not Restricted",
               "dgDescription":"1. Check that the packaging is adequate\n2. Check a return address is applied",
               "dgTitle":"Contents are not restricted",
               "returnTo":"dangerousGoodsInternationalRules"
            },
            "title":"Not restricted - 2 or more questions asked",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsInternationalBattery",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "returnTo":"dangerousGoodsInternationalRules"
            },
            "title":"Lithium Batteries",
            "type":"choice",
            "visual":{
               "transition":true
            }
         },
         {
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Back",
                        "value":"back",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Proceed without printing",
                        "value":"ProceedWithoutPrinting",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Print advice slip",
                        "value":"PrintReceipt",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.dgDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"back",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "numberOfSteps":3,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"ProceedWithoutPrinting",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "name":"dangerousGoodsAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"PrintReceipt",
                        "given":"{{ outputData.actions.segregation }}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "enablers":[
                                 {
                                    "action":"echoSlowResponse",
                                    "id":"fakeReceiptPrinter",
                                    "loadingMessage":"Printing advice slip...",
                                    "name":"test",
                                    "params":{
                                       "timeout":"2000"
                                    },
                                    "stepEvent":"onMatch"
                                 }
                              ],
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "name":"dangerousGoodsAddToBasket",
                                    "type":"subJourney"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.segregation":"{{ inputData.action }}"
                  },
                  "title":"{{ outputData.dgTitle }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "dangerousGoodsItemId":"36209",
               "dangerousGoodsLongName":"RMG Dangerous Goods International - Customer Prohibited",
               "dangerousGoodsShortName":"International Prohibited",
               "dgDescription":"1. Ask if the customer needs a Prohibited Item advice slip\n2. Offer the customer a Prohibited and Restricted items Leaflet",
               "dgTitle":"Item is prohibited and cannot be sent"
            },
            "title":"Prohibited",
            "type":"choice"
         },
         {
            "nodes":[
               {
                  "type":"abort"
               }
            ],
            "title":"Not sure - scan laminate",
            "type":"choice",
            "visual":{
               "transition":true
            }
         }
      ],
      "dangerousGoodsNotRestrictedQuestionsAsked":[
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"back",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Check further contents",
                  "value":"Scan",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Post item now",
                  "value":"next",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"{{ outputData.dgDescription }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"back",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "numberOfSteps":3,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Scan",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "name":"dangerousGoodsReturnToFromBasket",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"next",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "name":"dangerousGoodsAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.segregation":"{{ inputData.action }}"
            },
            "title":"{{ outputData.dgTitle }}",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left"
            }
         }
      ],
      "dangerousGoodsReturnToFromBasket":[
         {
            "basket":{
               "Service":"{{ outputData.dangerousGoodsLongName }}",
               "id":"{{ outputData.dangerousGoodsShortName }}"
            },
            "returnTo":"{{ outputData.returnTo }}",
            "transaction":{
               "basketItems":"",
               "entryType":"mails",
               "itemID":"{{ outputData.dangerousGoodsItemId }}",
               "quantity":"1",
               "receiptLine":"1",
               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "dangerousGoodsSubJourney":[
         {
            "title":"Select area for item being screened",
            "type":"info"
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsDomesticRules",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "returnTo":"dangerousGoodsDomesticRules"
            },
            "title":"UK",
            "type":"choice",
            "visual":{
               "transition":true
            }
         },
         {
            "nodes":[
               {
                  "name":"dangerousGoodsInternationalRules",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "returnTo":"dangerousGoodsInternationalRules"
            },
            "title":"International",
            "type":"choice",
            "visual":{
               "transition":true
            }
         }
      ],
      "duplicateAcceptFromCarrier":[
         {
            "actions":[
               {
                  "title":"OK",
                  "value":"ok",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"This parcel has already been scannned and processed, please scan another barcode.",
            "nodes":[
               {
                  "returnTo":"scanBarcode",
                  "type":"abort"
               }
            ],
            "title":"Parcel already processed",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "estimatedAddToBasket":[
         {
            "nodes":[
               {
                  "basket":{
                     "Service":"Estimated Delivery Date",
                     "id":"Estimated Delivery Date journey"
                  },
                  "transaction":{
                     "basketItems":"",
                     "entryType":"mails",
                     "itemID":"{{ outputData.EDDItemId }}",
                     "quantity":"1",
                     "receiptLine":"1",
                     "tokens.City":"{{ outputData.destinationCity }}",
                     "tokens.Country":"{{ outputData.destinationCountryName }}",
                     "tokens.Date":"{{ FORMAT_DATE(\"{{ outputData.serviceGuaranteeDate }}\",\"DD/MM/YYYY\") }}",
                     "tokens.Postcode":"{{ outputData.destinationPostalCode }}",
                     "value":"{{outputData.amount}}",
                     "voidable":"true"
                  },
                  "type":"complete"
               }
            ],
            "title":"Add to basket",
            "type":"choice"
         }
      ],
      "estimatedDeliveryDate":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getCountry",
                  "id":"country",
                  "loadingMessage":"Waiting ...",
                  "name":"country",
                  "params":{
                     "kahalaSupportedFilter":true
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "enablers":[
                     {
                        "action":"countries",
                        "id":"kahalaCountryLookup",
                        "loadingMessage":"Waiting ...",
                        "name":"dataParser",
                        "params":{
                           "data":"{{outputData.countryResponse}}"
                        },
                        "stepEvent":"onMatch"
                     }
                  ],
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "data":"{{outputData.kahalaApiResponse}}",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"HKG",
                              "given":"{{outputData.regex}}",
                              "nodes":[
                                 {
                                    "name":"postalCodeEddJourney",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "inputValue":"HKG"
                              },
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "name":"postalCodeEddJourney",
                                    "type":"subJourney"
                                 }
                              ],
                              "outputData":{
                                 "inputValue":""
                              },
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "countryAlpha2":"{{ inputData.selected.iso2Code }}",
                           "postcodeFormat":"{{inputData.selected.postcodeFormat}}",
                           "postcodeMaxLength":"{{inputData.selected.postcodeMaxLength}}",
                           "regex":"{{inputData.selected.regexValidation}}"
                        },
                        "title":"Country",
                        "type":"options"
                     }
                  ],
                  "outputData":{
                     "kahalaApiResponse":"{{ inputData.enablers.kahalaCountryLookup.results }}"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "countryResponse":"{{ inputData.enablers.country }}"
            },
            "type":"condition"
         }
      ],
      "invalidCarrier":[
         {
            "actions":[
               {
                  "title":"OK",
                  "value":"ok",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"",
            "nodes":[
               {
                  "type":"abort"
               }
            ],
            "title":"This item is not valid for collection from a Post Office. Please return item to carrier.",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "invalidLocalCollect":[
         {
            "actions":[
               {
                  "title":"OK",
                  "value":"ok",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"Please scan or manually enter different barcode or cancel.",
            "nodes":[
               {
                  "returnTo":"scanBarcode",
                  "type":"abort"
               }
            ],
            "title":"Barcode not recognised",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "issueToCustomer":[
         {
            "comparison":"eq",
            "expected":"RMLocalCollect",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"Standard",
                  "given":"{{ outputData.product.IDcheckType }}",
                  "nodes":[
                     {
                        "title":"Does the customer have ID for the addressee? Item cannot be collected without addressee ID",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "name":"scanIssuer",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Back",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     },
                     {
                        "nodes":[
                           {
                              "name":"pfLocalCollectIssueToCustomerAddBasket",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Add To Basket",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     },
                     {
                        "nodes":[
                           {
                              "name":"recordReturnReason",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Customer is refusing the item",
                        "type":"choice",
                        "visual":{
                           "transition":true
                        }
                     }
                  ],
                  "outputData":{
                     "incidentCodes":"I520"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"verifyAgeAndIdProof",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "Carrier":"Royal Mail",
               "TandTCarrier":"POLR",
               "serviceName":"No Fee"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"PFLocalCollect",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "name":"pfLocalCollectIssueToCustomerConfirm",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "Carrier":"Parcelforce"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "name":"invalidLocalCollect",
                  "type":"subJourney"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"notsupported",
            "given":"{{outputData.barcodeInfo.type}}",
            "nodes":[
               {
                  "name":"invalidCarrier",
                  "type":"subJourney"
               }
            ],
            "type":"condition"
         }
      ],
      "issueToCustomerAddToBasket":[
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"backToPFW",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Add To Basket",
                  "value":"addToBasket",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"Ask the customer to sign the Alternative Collection Service card",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"backToPFW",
                  "given":"{{ outputData.actions.action }}",
                  "nodes":[
                     {
                        "numberOfSteps":3,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"addToBasket",
                  "given":"{{ outputData.actions.action }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasketWithoutRetrun",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.action":"{{ inputData.action }}"
            },
            "title":"Collection item details",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "issueToCustomerAddToBasketWithBack":[
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"backToPFW",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Add To Basket",
                  "value":"addToBasket",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"Ask the customer to sign the Alternative Collection Service card",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"backToPFW",
                  "given":"{{ outputData.actions.action }}",
                  "nodes":[
                     {
                        "numberOfSteps":3,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"addToBasket",
                  "given":"{{ outputData.actions.action }}",
                  "nodes":[
                     {
                        "name":"issueToCustomerAddToBasketWithoutRetrun",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.action":"{{ inputData.action }}"
            },
            "title":"Collection item details",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "issueToCustomerAddToBasketWithoutRetrun":[
         {
            "basket":{
               "Carrier":"{{ outputData.Carrier }}",
               "ID Check":"{{outputData.product.IDcheckType}}",
               "Reference No":"{{ outputData.referenceValue }}",
               "Service":"{{ outputData.service }}",
               "id":"{{ outputData.barcodeInfo.barcode }}",
               "journeyType":"{{ outputData.journeyType }}"
            },
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Dest":"999",
               "tokens.Function":"",
               "tokens.NumberOfItems":"1",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandTCarrier":"{{ outputData.TandTCarrier }}",
               "tokens.TandTSvcID":"",
               "tokens.TandTType":"{{ outputData.TandTType }}",
               "tokens.Tandt":"true",
               "tokens.UPUTrackingNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.accLineType":"PS1",
               "tokens.addressValidated":"0",
               "tokens.afterLastDespatch":"1",
               "tokens.barcode":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.capturedID":"{{ outputData.captureID }}",
               "tokens.carrier":"{{ outputData.barcodeInfo.Carrier }}",
               "tokens.clientAccountNo":"3292",
               "tokens.clientSrvCode":"",
               "tokens.compensationValue":"",
               "tokens.conditionAccepted":"",
               "tokens.consequentialLossBand":"",
               "tokens.copIssued":"0",
               "tokens.copprn":"",
               "tokens.country":"GB",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.destination":"UK (EU)",
               "tokens.destinationAddress":"",
               "tokens.destinationAreaId":"999",
               "tokens.firstAddressLine":"",
               "tokens.incidentCodes":"{{outputData.incidentCodes}}",
               "tokens.international":"",
               "tokens.isFranked":"0",
               "tokens.itemOnHand":"false",
               "tokens.parcelStatus":"CUSTOMER_COLLECTED",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":"{{ outputData.product.PIPFormat }}",
               "tokens.prePaidLine":"1",
               "tokens.prepaidAmount":"0",
               "tokens.prn":"",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.product.Service.ServiceId }}",
               "tokens.serviceName":"{{ outputData.product.Service.ReportName }}",
               "tokens.tokenIdentifier":"6729",
               "tokens.town":"",
               "tokens.versionNumber":"1",
               "tokens.weight":"",
               "transactionStartTime":"NEED_TO_IMPLEMENT",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "khalaApiResponseSuccessJourney":[
         {
            "comparison":"eq",
            "expected":"200",
            "given":"{{ outputData.status }}",
            "nodes":[
               {
                  "description":"City:{{ outputData.destinationCity }}\nPostcode:{{ outputData.destinationPostalCode }}\nCountry:{{ outputData.destinationCountryName }}\nEstimated date of delivery: {{ FORMAT_DATE(\"{{ outputData.serviceGuaranteeDate }}\",\"DD/MM/YYYY\") }}",
                  "title":"Confirm address with customer",
                  "type":"info"
               },
               {
                  "name":"estimatedAddToBasket",
                  "type":"subJourney"
               },
               {
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "title":"Finish",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "title":"Finish and Print",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"in",
            "expected":"400,401,403,500",
            "given":"{{ outputData.status }}",
            "nodes":[
               {
                  "description":"An estimated delivery date could not be obtained for the address and postage date given. Error Code {{ outputData.status }}",
                  "title":"",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "title":"Cancel",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "title":"Print",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"502",
            "given":"{{ outputData.status }}",
            "nodes":[
               {
                  "description":"The service to estimate the delivery date is currently unavailable. Please try again later.",
                  "title":"",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "title":"Cancel",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "title":"Print",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "type":"condition"
         }
      ],
      "labels2GoAddToBasket":[
         {
            "basket":{
               "Service":"{{ outputData.productResponse.Service.DisplayName }}",
               "id":"{{ outputData.serviceName }}"
            },
            "transaction":{
               "basketItems":"{{ outputData.productResponse.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.productResponse.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"n/a",
               "tokens.Dest":"{{ outputData.productResponse.Area.SourceAreaId }}",
               "tokens.Label":"TODO: AWAITING LABEL PRINTER",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandTCarrier":"{{ outputData.productResponse.TrackAndTrace.TandTCarrier }}",
               "tokens.TandTSvcID":"{{ outputData.productResponse.TrackAndTrace.TandTSvcID }}",
               "tokens.TandTType":"{{ outputData.productResponse.TrackAndTrace.TandTType }}",
               "tokens.afterLastDespatch":"{{ outputData.afterLastDespatch}}",
               "tokens.barcode":"{{ outputData.TD }}",
               "tokens.carrier":"{{ outputData.parsedBarcode.ClientAccName }}",
               "tokens.clientAccountNo":"n/a",
               "tokens.clientSrvCode":"n/a",
               "tokens.country":"{{ outputData.productResponse.Country.CountryID }}",
               "tokens.customerRefNumber":"n/a",
               "tokens.destination":"{{ outputData.productResponse.Country.ISOCountry }}",
               "tokens.destinationAddress":"{{ outputData.parsedQRcode.SenderAddressDetail.PostCode }}",
               "tokens.destinationAreaId":"{{ outputData.productResponse.Area.DestinationAreaId }}",
               "tokens.firstAddressLine":"{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine1 }}",
               "tokens.paymentCode":"n/a",
               "tokens.pipFormat":"{{ outputData.productResponse.PIPFormat }}",
               "tokens.prepaidAmount":"0.00",
               "tokens.receiptReference":"n/a",
               "tokens.serviceId":"{{ outputData.productResponse.Service.ServiceId }}",
               "tokens.serviceName":"{{ outputData.productResponse.Service.ReportName }}",
               "tokens.tokenIdentifier":"n/a",
               "tokens.town":"{{ outputData.parsedQRcode.SenderAddressDetail.Town }}",
               "tokens.versionNumber":"n/a",
               "tokens.weight":"{{ outputData.weight }}",
               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
               "value":"0",
               "voidable":"true"
            },
            "type":"complete"
         }
      ],
      "labels2GoAddress":[
         {
            "description":"{{ outputData.parsedQRcode.SenderAddressDetail.Customer }}",
            "title":"Destination",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "description":"{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine1 }}",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "description":"{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine2 }}",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "description":"{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine3 }}",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "description":"{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine4 }}",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "description":"{{ outputData.parsedQRcode.SenderAddressDetail.Town }}",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "description":"{{ outputData.parsedQRcode.SenderAddressDetail.PostCode }}",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "nodes":[
               {
                  "name":"labels2GoPrintLabel",
                  "type":"subJourney"
               }
            ],
            "title":"Next",
            "type":"choice"
         }
      ],
      "labels2GoLabelPrintedSuccessfullyPrompt":[
         {
            "actions":[
               {
                  "title":"Cancel transaction",
                  "value":"cancel",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Print Again",
                  "value":"printAgain",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Successful",
                  "value":"success",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"cancel",
                  "given":"{{ outputData.actions.printAgain }}",
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"printAgain",
                  "given":"{{ outputData.actions.printAgain }}",
                  "nodes":[
                     {
                        "name":"labels2GoPrintLabel",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"success",
                  "given":"{{ outputData.actions.printAgain }}",
                  "nodes":[
                     {
                        "name":"labels2GoSegregationPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.printAgain":"{{ inputData.action }}"
            },
            "title":"Label printed successfully?",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left"
            }
         }
      ],
      "labels2GoLastDespatchCheck":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"afterLastDespatch",
                  "id":"lastDespatch",
                  "loadingMessage":"Waiting for despatch info...",
                  "name":"despatch",
                  "params":{
                     "branchID":"{{ appData.device.branchID }}",
                     "carrierID":"RM",
                     "clerkID":"2",
                     "counterID":"{{ appData.device.nodeID }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"true",
                  "given":"{{ outputData.afterLastDespatch }}",
                  "nodes":[
                     {
                        "description":"Advise the customer that the mail item will not be despatched until the following working day.",
                        "title":"Royal Mail final collection has passed",
                        "type":"info",
                        "visual":{
                           "view":"notification-info"
                        }
                     },
                     {
                        "name":"labels2GoWeight",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"false",
                  "given":"{{ outputData.afterLastDespatch }}",
                  "nodes":[
                     {
                        "name":"labels2GoWeight",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "afterLastDespatch":"{{ inputData.enablers.lastDespatch.afterLastDispatch }}"
            },
            "type":"condition"
         }
      ],
      "labels2GoMinimalAddressValidation":[
         {
            "comparison":"matchregexp",
            "expected":"^.+",
            "given":"{{ outputData.parsedQRcode.SenderAddressDetail.AddressLine1 }}",
            "nodes":[
               {
                  "comparison":"matchregexp",
                  "expected":"^.+",
                  "given":"{{ outputData.parsedBarcode.DestinationPostCode }}",
                  "nodes":[
                     {
                        "comparison":"in",
                        "expected":[
                           "GBR",
                           "JEY",
                           "GGY",
                           "GB",
                           "JE",
                           "GG"
                        ],
                        "given":"{{ outputData.parsedBarcode.DestinationCountry }}",
                        "nodes":[
                           {
                              "name":"labels2GoLastDespatchCheck",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "actions":[
                                 {
                                    "title":"OK",
                                    "value":"ok",
                                    "visual":{
                                       "view":"primary"
                                    }
                                 }
                              ],
                              "description":"Please advise the customer to contact the retailer.",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "title":"The QR code cannot be used to return the item as it does not have sufficient address details.",
                              "type":"prompt",
                              "visual":{
                                 "actionAlignment":"left"
                              }
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"OK",
                              "value":"ok",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"Please advise the customer to contact the retailer.",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "title":"The QR code cannot be used to return the item as it does not have sufficient address details.",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "type":"condition"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"OK",
                        "value":"ok",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"Please advise the customer to contact the retailer.",
                  "nodes":[
                     {
                        "type":"abort"
                     }
                  ],
                  "title":"The QR code cannot be used to return the item as it does not have sufficient address details.",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "type":"condition"
         }
      ],
      "labels2GoPrintLabel":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"zebra",
                  "errorMessage":"It was not possible to find any printers. You can try again or cancel. Cancel will end the transaction and you will start again.",
                  "id":"findPrinters",
                  "loadingMessage":"Finding printers",
                  "name":"bluetooth",
                  "params":{
                     "dummy":""
                  },
                  "retriable":true,
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "enablers":[
                     {
                        "action":"printLabel2Go",
                        "errorMessage":"It has not been possible to print the label. You can try again or cancel. Cancel will end the transaction and you will start again.",
                        "id":"labelPrinter",
                        "loadingMessage":"Printing label",
                        "name":"labelPrinter",
                        "params":{
                           "l2gQRCode":"{{ outputData.TD }}",
                           "peripheralAddress":"{{ outputData.connectedDevices[0].value }}"
                        },
                        "retriable":true,
                        "stepEvent":"onMatch"
                     }
                  ],
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"labels2GoLabelPrintedSuccessfullyPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "labelRef":"{{ inputData.enablers.labelPrinter }}"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "connectedDevices":"{{ inputData.enablers.findPrinters.devices }}",
               "connectedDevicesCount":"{{ inputData.enablers.findPrinters.count }}"
            },
            "type":"condition"
         }
      ],
      "labels2GoPrintUnsuccessfulPrompt":[
         {
            "actions":[
               {
                  "title":"Cancel transaction",
                  "value":"cancel",
                  "visual":{
                     "view":"secondary"
                  }
               }
            ],
            "description":"Advise customer that we cannot process their item. Try another terminal and printer.",
            "nodes":[
               {
                  "type":"abort"
               }
            ],
            "title":"Label printing was unsuccessful",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left"
            }
         }
      ],
      "labels2GoSegregationPrompt":[
         {
            "comparison":"eq",
            "expected":"TSN",
            "given":"{{ outputData.parsedBarcode.Product }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.segregationPromptDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"cancel",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "name":"labels2GoAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.addToBasket":"{{ inputData.action }}"
                  },
                  "title":"Complete {{ outputData.serviceName }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "segregationPromptDescription":"Tracked 24 Parcel in 1st Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
               "serviceName":"Tracked 24 Return"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"TSS",
            "given":"{{ outputData.parsedBarcode.Product }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.segregationPromptDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"cancel",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "name":"labels2GoAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.addToBasket":"{{ inputData.action }}"
                  },
                  "title":"Complete {{ outputData.serviceName }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "segregationPromptDescription":"Tracked 48 Parcel in 2nd Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
               "serviceName":"Tracked 48 Return"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"TSN",
            "given":"{{ outputData.serviceValue }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.segregationPromptDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"cancel",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "name":"labels2GoAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.addToBasket":"{{ inputData.action }}"
                  },
                  "title":"Complete {{ outputData.serviceName }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "segregationPromptDescription":"Tracked 24 Parcel in 1st Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
               "serviceName":"Tracked 24 Return"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"TSS",
            "given":"{{ outputData.serviceValue }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.segregationPromptDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"cancel",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "type":"abort"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "name":"labels2GoAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.addToBasket":"{{ inputData.action }}"
                  },
                  "title":"Complete {{ outputData.serviceName }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "segregationPromptDescription":"Tracked 48 Parcel in 2nd Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
               "serviceName":"Tracked 48 Return"
            },
            "type":"condition"
         }
      ],
      "labels2GoTrackingReference":[
         {
            "description":"{{ outputData.parsedQRcode['1DBarcode'] }}",
            "title":"Tracking reference number",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         }
      ],
      "labels2GoWeight":[
         {
            "description":"Ask the customer to place the item going to this destination onto the scales",
            "type":"info",
            "visual":{
               "view":"notification-info"
            }
         },
         {
            "defaultValues":{
               "inputValue":"0"
            },
            "inputMask":"numeric",
            "nodes":[
               {
                  "comparison":"gt",
                  "expected":"{{ outputData.returnsMaxWeight }}",
                  "given":"{{ outputData.weight }}",
                  "nodes":[
                     {
                        "actions":[
                           {
                              "title":"Back",
                              "value":"back",
                              "visual":{
                                 "view":"secondary"
                              }
                           },
                           {
                              "title":"End Transaction",
                              "value":"end",
                              "visual":{
                                 "view":"primary"
                              }
                           }
                        ],
                        "description":"Weight is more than the maximum of 20kg, for this service.\nPlease advise customer to contact retailer to arrange another form of return.",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"back",
                              "given":"{{ outputData.actions.endTransaction }}",
                              "nodes":[
                                 {
                                    "numberOfSteps":4,
                                    "type":"undo"
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"end",
                              "given":"{{ outputData.actions.endTransaction }}",
                              "nodes":[
                                 {
                                    "type":"abort"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "outputData":{
                           "actions.endTransaction":"{{ inputData.action }}"
                        },
                        "title":"Item cannot be sent",
                        "type":"prompt",
                        "visual":{
                           "actionAlignment":"left"
                        }
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"labels2GoTrackingReference",
                        "type":"subJourney"
                     },
                     {
                        "name":"labels2GoAddress",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "weight":"{{ inputData.inputValue }}"
            },
            "title":"Weight",
            "type":"input",
            "unit":{
               "position":"right",
               "value":"g"
            }
         }
      ],
      "pfLocalCollectIssueToCustomerAddBasket":[
         {
            "basket":{
               "Carrier":"{{ outputData.Carrier }}",
               "Reference No":"{{ outputData.referenceValue }}",
               "Service":"{{ outputData.service }}",
               "id":"{{ outputData.barcodeInfo.barcode }}",
               "journeyType":"{{ outputData.journeyType }}"
            },
            "returnTo":"scanIssuer",
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Dest":"999",
               "tokens.Function":"",
               "tokens.NumberOfItems":"1",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandTCarrier":"{{ outputData.product.TrackAndTrace.TandTCarrier }}",
               "tokens.TandTSvcID":"",
               "tokens.TandTType":"{{ outputData.product.TrackAndTrace.TandTType }}",
               "tokens.Tandt":"true",
               "tokens.UPUTrackingNumber":" {{ outputData.barcodeInfo.barcode }}",
               "tokens.accLineType":"PS1",
               "tokens.addressValidated":"0",
               "tokens.afterLastDespatch":"1",
               "tokens.barcode":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.capturedID":"{{ outputData.captureID }}",
               "tokens.carrier":"{{ outputData.barcodeInfo.Carrier }}",
               "tokens.clientAccountNo":"3292",
               "tokens.clientSrvCode":"",
               "tokens.country":"GB",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.barcode }}",
               "tokens.destination":"UK (EU)",
               "tokens.destinationAddress":"",
               "tokens.destinationAreaId":"999",
               "tokens.firstAddressLine":"",
               "tokens.incidentCodes":"I520",
               "tokens.itemOnHand":"false",
               "tokens.parcelStatus":"CUSTOMER_COLLECTED",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":"{{ outputData.product.PIPFormat }}",
               "tokens.prepaidAmount":"0",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.product.Service.ServiceId }}",
               "tokens.serviceName":"{{ outputData.product.Service.ReportName }}",
               "tokens.tokenIdentifier":"6729",
               "tokens.versionNumber":"1",
               "tokens.weight":"",
               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "pfLocalCollectIssueToCustomerConfirm":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "errorMessage":"An error has occurred. Try again later",
                  "id":"RMProductLookup",
                  "loadingMessage":"Please wait, getting product details...",
                  "name":"RMProductLookup",
                  "params":{
                     "isFeePayable":"{{ outputData.isFeePayable }}",
                     "journeyType":"{{ outputData.journeyType }}",
                     "parsedBarcode":"{{ outputData.barcodeInfo }}"
                  },
                  "retriable":true,
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "title":"Does the customer have ID for the addressee? Item cannot be collected without addressee ID",
                  "type":"info"
               },
               {
                  "nodes":[
                     {
                        "name":"scanIssuer",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Back",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "name":"pfLocalCollectIssueToCustomerAddBasket",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Add To Basket",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               },
               {
                  "nodes":[
                     {
                        "name":"recordReturnReason",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Customer is refusing the item",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "outputData":{
               "product":"{{ inputData.enablers.RMProductLookup }}"
            },
            "type":"condition"
         }
      ],
      "pfcaCheckLastDespatch":[
         {
            "comparison":"eq",
            "expected":"true",
            "given":"{{ outputData.product.Service.RepDespatch }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"true",
                  "given":"{{ outputData.afterLastCollection }}",
                  "nodes":[
                     {
                        "description":"Inform the customer that this item will not be collected today because the latest acceptance time has passed for this carrier.",
                        "title":"After Last Despatch",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "returnTo":"acceptFromCustomer",
                              "type":"abort"
                           }
                        ],
                        "title":"Cancel",
                        "type":"choice"
                     },
                     {
                        "nodes":[
                           {
                              "name":"segregationPFW",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Proceed",
                        "type":"choice",
                        "visual":{
                           "transition":false
                        }
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"false",
                  "given":"{{ outputData.afterLastCollection }}",
                  "nodes":[
                     {
                        "name":"segregationPFW",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"false",
            "given":"{{ outputData.product.Service.RepDespatch }}",
            "nodes":[
               {
                  "name":"segregationPFW",
                  "type":"subJourney"
               }
            ],
            "type":"condition"
         }
      ],
      "pfcaCheckLastDespatchTrue":[
         {
            "comparison":"eq",
            "expected":"true",
            "given":"{{ outputData.product.Service.RepDespatch }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"true",
                  "given":"{{ outputData.afterLastCollection }}",
                  "nodes":[
                     {
                        "description":"{{outputData.TD}}",
                        "title":"Barcode",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"Inform the customer that this item will not be collected today because the latest acceptance time has passed for this carrier.",
                        "title":"After Last Despatch",
                        "type":"info"
                     },
                     {
                        "nodes":[
                           {
                              "returnTo":"acceptFromCustomer",
                              "type":"abort"
                           }
                        ],
                        "title":"Cancel",
                        "type":"choice"
                     },
                     {
                        "nodes":[
                           {
                              "name":"segregationPFW",
                              "type":"subJourney"
                           }
                        ],
                        "title":"Proceed",
                        "type":"choice",
                        "visual":{
                           "transition":false
                        }
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"false",
                  "given":"{{ outputData.afterLastCollection }}",
                  "nodes":[
                     {
                        "name":"segregationPFW11",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"false",
            "given":"{{ outputData.product.Service.RepDespatch }}",
            "nodes":[
               {
                  "name":"segregationPFW11",
                  "type":"subJourney"
               }
            ],
            "type":"condition"
         }
      ],
      "pfcaSegregateAddToBasket":[
         {
            "basket":{
               "Reference No":"{{ outputData.TD }}",
               "Service":"{{ outputData.product.Service.ReportName }}",
               "afterLastCollection":"{{ outputData.afterLastCollection }}",
               "id":"{{ outputData.TD }}",
               "repDespatch":"{{ outputData.product.Service.RepDespatch }}"
            },
            "returnTo":"acceptFromCustomer",
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Barcode":"{{ outputData.TD }}",
               "tokens.Dest":" ",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.ServiceName":"{{ outputData.product.Service.ReportName }}",
               "tokens.TandTCarrier":"{{ outputData.product.TrackAndTrace.TandTCarrier }}",
               "tokens.TandTSvcID":"{{ outputData.product.TrackAndTrace.TandTSvcID }}",
               "tokens.TandTType":"{{ outputData.product.TrackAndTrace.TandTType }}",
               "tokens.UPUTrackingNumber":"{{ outputData.TD }}",
               "tokens.addressValidated":"0",
               "tokens.afterLastDespatch":"{{ outputData.afterLastCollection }}",
               "tokens.barcode":"{{ outputData.TD }}",
               "tokens.carrier":"{{ outputData.product.Service.CarrierId }}",
               "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
               "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
               "tokens.compensationValue":" ",
               "tokens.conditionAccepted":" ",
               "tokens.consequentialLossBand":" ",
               "tokens.copIssued":"0",
               "tokens.copprn":" ",
               "tokens.country":"GB",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
               "tokens.destination":" ",
               "tokens.destinationAddress":" ",
               "tokens.destinationAreaId":" ",
               "tokens.firstAddressLine":" ",
               "tokens.isFranked":"0",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":" {{ outputData.product.PIPFormat }}",
               "tokens.prePaidLine":"1",
               "tokens.prepaidAmount":"0",
               "tokens.prn":" ",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.product.Service.ServiceId }}",
               "tokens.serviceName":"{{ outputData.product.Service.ReportName }}",
               "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
               "tokens.town":" ",
               "tokens.versionNumber":"1",
               "tokens.weight":" ",
               "transactionStartTime":"NEED_TO_IMPLEMENT",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "pfcaSegregateAddToBasketWithOutReturn":[
         {
            "basket":{
               "Reference No":"{{ outputData.TD }}",
               "Service":"{{ outputData.product.Service.ReportName }}",
               "afterLastCollection":"{{ outputData.afterLastCollection }}",
               "id":"{{ outputData.TD }}",
               "repDespatch":"{{ outputData.product.Service.RepDespatch }}"
            },
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"0001",
               "tokens.Barcode":"{{ outputData.TD }}",
               "tokens.Dest":" ",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.ServiceName":"{{ outputData.product.Service.ReportName }}",
               "tokens.TandTCarrier":"{{ outputData.product.TrackAndTrace.TandTCarrier }}",
               "tokens.TandTSvcID":"{{ outputData.product.TrackAndTrace.TandTSvcID }}",
               "tokens.TandTType":"{{ outputData.product.TrackAndTrace.TandTType }}",
               "tokens.UPUTrackingNumber":"{{ outputData.TD }}",
               "tokens.addressValidated":"0",
               "tokens.afterLastDespatch":"{{ outputData.afterLastCollection }}",
               "tokens.barcode":"{{ outputData.TD }}",
               "tokens.carrier":"{{ outputData.product.Service.CarrierId }}",
               "tokens.clientAccountNo":"{{ outputData.barcodeInfo.ClientAcc }}",
               "tokens.clientSrvCode":"{{ outputData.barcodeInfo.clientSrvCode }}",
               "tokens.compensationValue":" ",
               "tokens.conditionAccepted":" ",
               "tokens.consequentialLossBand":" ",
               "tokens.copIssued":"0",
               "tokens.copprn":" ",
               "tokens.country":"GB",
               "tokens.customerRefNumber":"{{ outputData.barcodeInfo.customerRefNumber }}",
               "tokens.destination":" ",
               "tokens.destinationAddress":" ",
               "tokens.destinationAreaId":" ",
               "tokens.firstAddressLine":" ",
               "tokens.isFranked":"0",
               "tokens.paymentCode":"1",
               "tokens.pipFormat":" {{ outputData.product.PIPFormat }}",
               "tokens.prePaidLine":"1",
               "tokens.prepaidAmount":"0",
               "tokens.prn":" ",
               "tokens.receiptReference":"unknown",
               "tokens.serviceId":"{{ outputData.product.Service.ServiceId }}",
               "tokens.serviceName":"{{ outputData.product.Service.ReportName }}",
               "tokens.tokenIdentifier":"{{ outputData.barcodeInfo.TokenId }}",
               "tokens.town":" ",
               "tokens.versionNumber":"1",
               "tokens.weight":" ",
               "transactionStartTime":"NEED_TO_IMPLEMENT",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "pfcaServiceSelected":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"RMProductLookup",
                  "loadingMessage":"Please wait, getting product details...",
                  "name":"RMProductLookup",
                  "params":{
                     "barcodeType":"{{ outputData.barcodeInfo.Type }}",
                     "serviceId":"{{ outputData.serviceId }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "name":"pfcaCheckLastDespatch",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "product":"{{ inputData.enablers.RMProductLookup }}"
            },
            "type":"condition"
         }
      ],
      "pfwOptionListForTrue":[
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(PB|BS).{11}$|^(PB|BS).{12}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"expressAM",
                        "value":"5101"
                     },
                     {
                        "title":"express9",
                        "value":"5001"
                     },
                     {
                        "title":"express10",
                        "value":"4901"
                     },
                     {
                        "title":"express24",
                        "value":"4601"
                     },
                     {
                        "title":"express48",
                        "value":"4701"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(CU).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"Returns (EU)",
                        "value":"90"
                     },
                     {
                        "title":"Returns (Non EU)",
                        "value":"91"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(CP).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"Global Express/Priority Contract",
                        "value":"79"
                     },
                     {
                        "title":"Global Value",
                        "value":"81"
                     },
                     {
                        "title":"PayPal",
                        "value":"6100"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(EE).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"Datapost PayPal",
                        "value":"6300"
                     },
                     {
                        "title":"PayPal",
                        "value":"6100"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(CK|EK).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"Euro Priority/Economy Business",
                        "value":"77"
                     },
                     {
                        "title":"Euro Priority/Economy Home",
                        "value":"77"
                     },
                     {
                        "title":"Global Direct",
                        "value":"81"
                     },
                     {
                        "title":"Global Express/Priority Contract",
                        "value":"79"
                     },
                     {
                        "title":"Global Value",
                        "value":"81"
                     },
                     {
                        "title":"PayPal",
                        "value":"6100"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"RMProductLookup",
                  "loadingMessage":"Please wait, getting product details...",
                  "name":"RMProductLookup",
                  "params":{
                     "parsedBarcode":"{{ outputData.barcodeInfo }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "name":"pfcaCheckLastDespatchTrue",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "fromOption":"true",
               "product":"{{ inputData.enablers.RMProductLookup }}"
            },
            "type":"condition"
         }
      ],
      "pfwOptionsList":[
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(PB|BS).{11}$|^(PB|BS).{12}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"expressAM",
                        "value":"5101"
                     },
                     {
                        "title":"express9",
                        "value":"5001"
                     },
                     {
                        "title":"express10",
                        "value":"4901"
                     },
                     {
                        "title":"express24",
                        "value":"4601"
                     },
                     {
                        "title":"express48",
                        "value":"4701"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(CU).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"Returns (EU)",
                        "value":"90"
                     },
                     {
                        "title":"Returns (Non EU)",
                        "value":"91"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(CP).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"Global Express/Priority Contract",
                        "value":"79"
                     },
                     {
                        "title":"Global Value",
                        "value":"81"
                     },
                     {
                        "title":"PayPal",
                        "value":"6100"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(EE).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"Datapost PayPal",
                        "value":"6300"
                     },
                     {
                        "title":"PayPal",
                        "value":"6100"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "enablers":[
               
            ],
            "expected":"^(CK|EK).{11}$",
            "given":"{{ outputData.TD }}",
            "nodes":[
               {
                  "description":"{{outputData.TD}}",
                  "title":"Barcode",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "data":[
                     {
                        "title":"Euro Priority/Economy Business",
                        "value":"77"
                     },
                     {
                        "title":"Euro Priority/Economy Home",
                        "value":"77"
                     },
                     {
                        "title":"Global Direct",
                        "value":"81"
                     },
                     {
                        "title":"Global Express/Priority Contract",
                        "value":"79"
                     },
                     {
                        "title":"Global Value",
                        "value":"81"
                     },
                     {
                        "title":"PayPal",
                        "value":"6100"
                     }
                  ],
                  "nodes":[
                     {
                        "name":"pfcaServiceSelected",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "nameService":"{{ inputData.selected.title }}",
                     "serviceId":"{{ inputData.selected.value }}"
                  },
                  "title":"What is the service?",
                  "type":"options"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"RMProductLookup",
                  "loadingMessage":"Please wait, getting product details...",
                  "name":"RMProductLookup",
                  "params":{
                     "parsedBarcode":"{{ outputData.barcodeInfo }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"",
                  "given":"{{outputData.nameService}}",
                  "nodes":[
                     {
                        "name":"pfcaCheckLastDespatchTrue",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"pfcaCheckLastDespatch",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "fromOption":"true",
               "product":"{{ inputData.enablers.RMProductLookup }}"
            },
            "type":"condition"
         }
      ],
      "postalCodeEddJourney":[
         {
            "defaultValues":{
               "inputValue":"{{outputData.inputValue}}"
            },
            "description":"Enter ZIP/Postal code",
            "inputMask":"alphanumeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "format":{
                     "match":"{{outputData.regex}}",
                     "message":"Please input {{outputData.postcodeFormat}} value and max length should be {{outputData.postcodeMaxLength}}."
                  },
                  "required":{
                     "message":"Postal code is required"
                  }
               }
            ],
            "nodes":[
               {
                  "name":"calendarSubJourney",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "postalCode":"{{ inputData.inputValue }}"
            },
            "title":"Input Postal code",
            "type":"input"
         }
      ],
      "ppiBagsJourney":[
         {
            "enablers":[
               {
                  "action":"tokenise",
                  "id":"tokeniser",
                  "loadingMessage":"Please wait...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"{{ inputData.barcode }}"
                  },
                  "stepEvent":"onChange"
               },
               {
                  "action":"display",
                  "id":"displayLabel",
                  "name":"displayOnScreen",
                  "params":{
                     "data":"{{ inputData.enablers.tokeniser }}"
                  },
                  "stepEvent":"onChange"
               }
            ],
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "defaultValues":{
                           "inputValue":"1"
                        },
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "numericality":{
                                 "gte":"1",
                                 "lte":"10",
                                 "message":"Total of sealed bags must be less than or equal to 10"
                              }
                           }
                        ],
                        "nodes":[
                           {
                              "nodes":[
                                 {
                                    "actions":[
                                       {
                                          "title":"Back",
                                          "value":"cancel",
                                          "visual":{
                                             "size":"small",
                                             "view":"secondary"
                                          }
                                       },
                                       {
                                          "title":"Next",
                                          "value":"addToBasket",
                                          "visual":{
                                             "size":"small",
                                             "view":"primary"
                                          }
                                       }
                                    ],
                                    "description":"Date stamp the Sales Order and write the number of bags accepted next to the date stamp.\n\nPlace the bag(s) to one side securely to await Royal Mail collection with the Sales order ready to hand to the collection driver",
                                    "nodes":[
                                       {
                                          "comparison":"eq",
                                          "expected":"cancel",
                                          "given":"{{ outputData.actions.addToBasket }}",
                                          "nodes":[
                                             {
                                                "numberOfSteps":3,
                                                "type":"undo"
                                             }
                                          ],
                                          "type":"condition"
                                       },
                                       {
                                          "comparison":"eq",
                                          "expected":"addToBasket",
                                          "given":"{{ outputData.actions.addToBasket }}",
                                          "nodes":[
                                             {
                                                "basket":{
                                                   "id":"PPI Bag : {{ outputData.accountOrOrderNumber }}",
                                                   "number":"{{ outputData.numberOfPPIBags }}"
                                                },
                                                "transaction":{
                                                   "basketItems.ItemID":"45285",
                                                   "basketItems.Quantity":"{{ outputData.numberOfPPIBags }}",
                                                   "basketItems.Value":"0",
                                                   "entryType":"mails",
                                                   "itemID":"45286",
                                                   "quantity":"{{ outputData.numberOfPPIBags }}",
                                                   "receiptLine":"1",
                                                   "tokens.Bag_Count":"{{ outputData.numberOfPPIBags }}",
                                                   "tokens.PPI_Barcode_Value":"{{ outputData.accountOrOrderNumber }}",
                                                   "tokens.barcode":"{{ outputData.accountOrOrderNumber }}",
                                                   "value":"0"
                                                },
                                                "type":"complete"
                                             }
                                          ],
                                          "type":"condition"
                                       }
                                    ],
                                    "outputData":{
                                       "actions.addToBasket":"{{ inputData.action }}"
                                    },
                                    "title":"Complete the transaction",
                                    "type":"prompt",
                                    "visual":{
                                       "actionAlignment":"left",
                                       "view":"medium"
                                    }
                                 }
                              ],
                              "title":"Next",
                              "type":"choice"
                           }
                        ],
                        "outputData":{
                           "numberOfPPIBags":"{{ inputData.inputValue }}"
                        },
                        "title":"Number of sealed PPI bags",
                        "type":"input",
                        "visual":{
                           "transition":false
                        }
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "accountOrOrderNumber":"{{ inputData.barcode }}"
            },
            "title":"Customer account or sales order number",
            "type":"barcode"
         }
      ],
      "productLookUp":[
         {
            "comparison":"eq",
            "expected":"PFLocalCollect",
            "given":"{{ outputData.barcodeInfo.type }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"Issue to Customer",
                  "given":"{{ outputData.journeyType }}",
                  "nodes":[
                     {
                        "name":"issueToCustomer",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Accept from Carrier",
                  "given":"{{ outputData.journeyType }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "enablers":[
                           {
                              "action":"getProduct",
                              "id":"RMProductLookup",
                              "loadingMessage":"Please wait, getting product details...",
                              "name":"RMProductLookup",
                              "params":{
                                 "journeyType":"{{ outputData.journeyType }}",
                                 "parsedBardcode":"{{ outputData.barcodeInfo }}"
                              },
                              "retriable":true,
                              "stepEvent":"onMatch"
                           }
                        ],
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "name":"acceptFromCarrierRMLocalCollect",
                              "type":"subJourney"
                           }
                        ],
                        "outputData":{
                           "product":"{{ inputData.enablers.RMProductLookup }}"
                        },
                        "type":"condition"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"RMProductLookup",
                  "loadingMessage":"Please wait, getting product details...",
                  "name":"RMProductLookup",
                  "params":{
                     "journeyType":"{{ outputData.journeyType }}",
                     "parsedBarcode":"{{ outputData.barcodeInfo }}"
                  },
                  "retriable":true,
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"Issue to Customer",
                  "given":"{{ outputData.journeyType }}",
                  "nodes":[
                     {
                        "name":"issueToCustomer",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Accept from Carrier",
                  "given":"{{ outputData.journeyType }}",
                  "nodes":[
                     {
                        "name":"acceptFromCarrierRMLocalCollect",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "product":"{{ inputData.enablers.RMProductLookup }}"
            },
            "type":"condition"
         }
      ],
      "proofOfAge":[
         {
            "data":"{{ outputData.productService }}",
            "nodes":[
               {
                  "name":"captureID",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "selectedIdCheck":"{{ inputData.selected.value }}"
            },
            "title":"Item requires age verification and issue only to a person of 18 years of age or older",
            "type":"options"
         }
      ],
      "proofOfName":[
         {
            "data":"{{ outputData.productService }}",
            "nodes":[
               {
                  "name":"captureID",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "selectedIdCheck":"{{ inputData.selected.value }}"
            },
            "title":"Item must be collected by addressee in person and item requires addressee name and photo ID",
            "type":"options"
         }
      ],
      "readabilityTest":[
         {
            "nodes":[
               {
                  "description":"Enter barcode value",
                  "enablers":[
                     {
                        "action":"tokenise",
                        "id":"tokeniser",
                        "loadingMessage":"Please wait...",
                        "name":"tokeniser",
                        "params":{
                           "barcode":"{{ inputData.barcode }}"
                        },
                        "stepEvent":"onChange"
                     },
                     {
                        "action":"display",
                        "id":"displayLabel",
                        "name":"displayOnScreen",
                        "params":{
                           "data":"{{ inputData.enablers.tokeniser }}"
                        },
                        "stepEvent":"onChange"
                     }
                  ],
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "comparison":"eq",
                              "expected":"jgb4",
                              "given":"{{ outputData.barcodeInfo.Type }}",
                              "nodes":[
                                 {
                                    "params":[
                                       
                                    ],
                                    "title":"",
                                    "type":"info",
                                    "visual":{
                                       "view":"list"
                                    }
                                 },
                                 {
                                    "nodes":[
                                       {
                                          "nodes":[
                                             {
                                                "basket":{
                                                   "Service":"2D Readability",
                                                   "id":"{{ outputData.barcodeInfo.UPUTrackingNumber }}"
                                                },
                                                "transaction":{
                                                   "basketItems":"",
                                                   "entryType":"mails",
                                                   "itemID":"{{ outputData.product.Service.LaunchItemID }}",
                                                   "quantity":"1",
                                                   "receiptLine":"1",
                                                   "tokens.PRN2d":"{{outputData.barcodeInfo.ProdNo}}",
                                                   "tokens.Weight2d":"{{outputData.barcodeInfo.Weight}}",
                                                   "tokens.destination":"{{ outputData.barcodeInfo.DestinationCountry }}",
                                                   "tokens.destinationAddress":"{{ outputData.barcodeInfo.DestinationPostCode }}",
                                                   "tokens.premiss":"{{outputData.barcodeInfo.BuildingNameNumber}}",
                                                   "value":"{{outputData.amount}}",
                                                   "voidable":"true"
                                                },
                                                "type":"complete"
                                             }
                                          ],
                                          "title":"Add to basket",
                                          "type":"choice"
                                       }
                                    ],
                                    "title":"Ok",
                                    "type":"choice",
                                    "visual":{
                                       "transition":false
                                    }
                                 }
                              ],
                              "type":"condition"
                           },
                           {
                              "comparison":"eq",
                              "expected":"1",
                              "given":"1",
                              "nodes":[
                                 {
                                    "title":"The barcode is not of a type that the Readability Test expects. Only Post Office printed postage labels with a 2D barcode can be tested.",
                                    "type":"info"
                                 },
                                 {
                                    "nodes":[
                                       {
                                          "type":"abort"
                                       }
                                    ],
                                    "title":"Finish",
                                    "type":"choice"
                                 }
                              ],
                              "type":"condition"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
                     "displayInfo":"{{ inputData.enablers.displayLabel }}",
                     "rawBarcode":"{{ inputData.barcode }}"
                  },
                  "title":"Input barcode",
                  "type":"barcode",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "title":"2D Label Readability Test",
            "type":"choice",
            "visual":{
               "transition":true
            }
         }
      ],
      "recordReturnReason":[
         {
            "description":"{{ outputData.barcodeInfo.barcode }}",
            "title":"Barcode",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "description":"{{outputData.carrierType}}",
            "title":"Carrier",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "data":"{{ inputData.enablers.RMProductLookupService }}",
            "enablers":[
               {
                  "action":"getProductServices",
                  "id":"RMProductLookupService",
                  "loadingMessage":"Please wait...",
                  "name":"RMProductLookup",
                  "params":{
                     "carrierServiceType":"{{ outputData.carrierServiceType}}",
                     "service":"LCRTS"
                  },
                  "stepEvent":"onInit"
               }
            ],
            "nodes":[
               {
                  "name":"rejectReason",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "selectedIdCheck":"{{ inputData.selected.value }}",
               "selectedTitle":"{{ inputData.selected.title }}"
            },
            "title":"Select the reason why customer is refusing the item",
            "type":"options"
         }
      ],
      "rejectReason":[
         {
            "comparison":"in",
            "expected":"I531,I540",
            "given":"{{ outputData.selectedIdCheck }}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"NonPriority",
                  "given":"{{outputData.product.ParcelType}}",
                  "nodes":[
                     {
                        "name":"customerRejectPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "TandT":"true",
                     "despatchFlag":"false",
                     "itemOnHand":"true"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Priority",
                  "given":"{{outputData.product.ParcelType}}",
                  "nodes":[
                     {
                        "name":"customerRejectPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "TandT":"true",
                     "despatchFlag":"true",
                     "itemOnHand":"true"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "incidentCodes":"I531,I540",
               "returnReason":"Customer refused to collect"
            },
            "type":"condition"
         },
         {
            "comparison":"in",
            "expected":"I532,I540",
            "given":"{{outputData.selectedIdCheck}}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"NonPriority",
                  "given":"{{outputData.product.ParcelType}}",
                  "nodes":[
                     {
                        "name":"customerRejectPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "TandT":"true",
                     "despatchFlag":"false",
                     "itemOnHand":"true"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Priority",
                  "given":"{{outputData.product.ParcelType}}",
                  "nodes":[
                     {
                        "name":"customerRejectPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "TandT":"true",
                     "despatchFlag":"true",
                     "itemOnHand":"true"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "incidentCodes":"I532,I540",
               "returnReason":"Customer requests immediate return"
            },
            "type":"condition"
         },
         {
            "comparison":"in",
            "expected":"I533,I540",
            "given":"{{outputData.selectedIdCheck}}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"NonPriority",
                  "given":"{{outputData.product.ParcelType}}",
                  "nodes":[
                     {
                        "name":"customerRejectPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "TandT":"true",
                     "despatchFlag":"false",
                     "itemOnHand":"true"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Priority",
                  "given":"{{outputData.product.ParcelType}}",
                  "nodes":[
                     {
                        "name":"customerRejectPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "TandT":"true",
                     "despatchFlag":"true",
                     "itemOnHand":"true"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "incidentCodes":"I533,I540",
               "returnReason":"Customer not known at address"
            },
            "type":"condition"
         },
         {
            "comparison":"in",
            "expected":"I534,I540",
            "given":"{{outputData.selectedIdCheck}}",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"NonPriority",
                  "given":"{{outputData.product.ParcelType}}",
                  "nodes":[
                     {
                        "name":"customerRejectPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "TandT":"true",
                     "despatchFlag":"false",
                     "itemOnHand":"true"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Priority",
                  "given":"{{outputData.product.ParcelType}}",
                  "nodes":[
                     {
                        "name":"customerRejectPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "TandT":"true",
                     "despatchFlag":"true",
                     "itemOnHand":"true"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "incidentCodes":"I534,I540",
               "returnReason":"Customer not known at address"
            },
            "type":"condition"
         }
      ],
      "returnsAcceptanceAddToBasket":[
         {
            "basket":{
               "Service":"{{ outputData.product.Service.DisplayName }}",
               "id":"{{ outputData.UniqueIdentifier }}"
            },
            "transaction":{
               "basketItems":"{{ outputData.product.BasketItems }}",
               "entryType":"mails",
               "itemID":"{{ outputData.product.Service.LaunchItemID }}",
               "quantity":"1",
               "receiptLine":"1",
               "tokens.APTransactionReference":"n/a",
               "tokens.SenderAddress":"{{ appData.device.branchAddress }}",
               "tokens.SenderName":"{{ appData.device.branchName }}",
               "tokens.SenderPostcode":"{{ appData.device.branchPostcode }}",
               "tokens.TandTCarrier":"{{ outputData.product.TrackAndTrace.TandTCarrier }}",
               "tokens.TandTSvcID":"{{ outputData.product.TrackAndTrace.TandTSvcID }}",
               "tokens.TandTType":"{{ outputData.product.TrackAndTrace.TandTType }}",
               "tokens.barcode":"{{ outputData.TD }}",
               "tokens.clientAccountNo":"n/a",
               "tokens.clientSrvCode":"n/a",
               "tokens.country":"{{ outputData.DestinationCountry }}",
               "tokens.customerRefNumber":"n/a",
               "tokens.destinationAddress":"{{ outputData.BuildingName }}, {{ outputData.DestinationPostCode }}",
               "tokens.entryID":"1",
               "tokens.firstAddressLine":"{{ outputData.BuildingName }}",
               "tokens.paymentCode":"n/a",
               "tokens.receiptReference":"n/a",
               "tokens.serviceName":"{{ outputData.product.Service.ReportName }}",
               "tokens.tokenIdentifier":"n/a",
               "tokens.versionNumber":"n/a",
               "tokens.weight":"{{ outputData.weight }}",
               "transactionStartTime":"{{ FORMAT_DATE(NOW(), \"X\") }}",
               "value":"0"
            },
            "type":"complete"
         }
      ],
      "returnsAcceptanceAskAddress1d":[
         {
            "description":"{{ outputData.UPUTrackingNumber }}",
            "title":"Tracking reference number",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "groupNodes":[
               {
                  "description":"Address",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Address is required"
                        }
                     }
                  ],
                  "outputData":{
                     "BuildingName":"{{ inputValue }}"
                  },
                  "title":"Destination",
                  "type":"input"
               },
               {
                  "description":"Postcode",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Postcode is required"
                        }
                     }
                  ],
                  "outputData":{
                     "DestinationPostCode":"{{ inputValue }}"
                  },
                  "title":"",
                  "type":"input"
               }
            ],
            "nodes":[
               {
                  "nodes":[
                     {
                        "name":"returnsAcceptanceSegregationPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Next",
                  "type":"choice"
               }
            ],
            "outputData":{
               "BuildingName":"{{ inputData.inputValue.BuildingName }}",
               "DestinationPostCode":"{{ inputData.inputValue.DestinationPostCode }}"
            },
            "title":"",
            "type":"inputGroup"
         }
      ],
      "returnsAcceptanceAskAddress2d":[
         {
            "comparison":"matchregexp",
            "expected":"^\\s*$",
            "given":"{{ outputData.DestinationPostCode }}",
            "nodes":[
               {
                  "comparison":"matchregexp",
                  "expected":"^\\s*$",
                  "given":"{{ outputData.BuildingName }}",
                  "nodes":[
                     {
                        "description":"{{ outputData.UPUTrackingNumber }}",
                        "title":"Tracking reference number",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "groupNodes":[
                           {
                              "description":"Address",
                              "inputValidation":[
                                 {
                                    "field":"inputValue",
                                    "required":{
                                       "message":"Address is required"
                                    }
                                 }
                              ],
                              "outputData":{
                                 "BuildingName":"{{ inputValue }}"
                              },
                              "title":"Destination",
                              "type":"input"
                           },
                           {
                              "description":"Postcode",
                              "inputValidation":[
                                 {
                                    "field":"inputValue",
                                    "format":{
                                       "match":"^(([A-Z][A-Z]{0,1}[0-9][0-9A-Z]{0,1})|GIR)\\s{0,2}[0-9][ABD-HJLNP-UW-Z]{2}$",
                                       "message":"The postcode format is incorrect"
                                    }
                                 }
                              ],
                              "outputData":{
                                 "DestinationPostCode":"{{ inputValue }}"
                              },
                              "title":"",
                              "type":"input"
                           }
                        ],
                        "nodes":[
                           {
                              "nodes":[
                                 {
                                    "name":"returnsAcceptanceSegregationPrompt",
                                    "type":"subJourney"
                                 }
                              ],
                              "title":"Next",
                              "type":"choice"
                           }
                        ],
                        "outputData":{
                           "BuildingName":"{{ inputData.inputValue.BuildingName }}",
                           "DestinationPostCode":"{{ inputData.inputValue.DestinationPostCode }}"
                        },
                        "title":"",
                        "type":"inputGroup"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "description":"{{ outputData.UPUTrackingNumber }}",
                        "title":"Tracking reference number",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"{{ outputData.BuildingName }}",
                        "title":"Destination",
                        "type":"info",
                        "visual":{
                           "view":"disabled-input"
                        }
                     },
                     {
                        "description":"Postcode",
                        "inputValidation":[
                           {
                              "field":"inputValue",
                              "required":{
                                 "message":"Postcode is required"
                              }
                           }
                        ],
                        "outputData":{
                           "DestinationPostCode":"{{ inputData.inputValue }}"
                        },
                        "title":"",
                        "type":"input"
                     },
                     {
                        "nodes":[
                           {
                              "name":"returnsAcceptanceSegregationPrompt",
                              "type":"subJourney"
                           }
                        ],
                        "title":"OK",
                        "type":"choice"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"matchregexp",
            "expected":"^\\s*$",
            "given":"{{ outputData.BuildingName }}",
            "nodes":[
               {
                  "description":"{{ outputData.UPUTrackingNumber }}",
                  "title":"Tracking reference number",
                  "type":"info"
               },
               {
                  "description":"Address",
                  "inputValidation":[
                     {
                        "field":"inputValue",
                        "required":{
                           "message":"Address is required"
                        }
                     }
                  ],
                  "outputData":{
                     "BuildingName":"{{ inputData.inputValue }}"
                  },
                  "title":"Destination",
                  "type":"input"
               },
               {
                  "description":"{{ outputData.DestinationPostCode }}",
                  "title":"",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "nodes":[
                     {
                        "name":"returnsAcceptanceSegregationPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "title":"OK",
                  "type":"choice"
               }
            ],
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "description":"{{ outputData.UPUTrackingNumber }}",
                  "title":"Tracking reference number",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "description":"{{ outputData.BuildingName }}",
                  "title":"Destination",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "description":"{{ outputData.DestinationPostCode }}",
                  "title":"",
                  "type":"info",
                  "visual":{
                     "view":"disabled-input"
                  }
               },
               {
                  "nodes":[
                     {
                        "name":"returnsAcceptanceSegregationPrompt",
                        "type":"subJourney"
                     }
                  ],
                  "title":"OK",
                  "type":"choice"
               }
            ],
            "type":"condition"
         }
      ],
      "returnsAcceptanceErrorMessage":[
         {
            "actions":[
               {
                  "title":"Ok",
                  "value":"ok",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"Please scan or manually enter different barcode or cancel.",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"ok",
                  "given":"{{ outputData.actions.undo }}",
                  "nodes":[
                     {
                        "returnTo":"returnsAcceptanceInputBarcode",
                        "type":"abort"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.undo":"{{ inputData.action }}"
            },
            "title":"Barcode not recognised",
            "type":"prompt",
            "visual":{
               "actionAlignment":"center"
            }
         }
      ],
      "returnsAcceptanceProductLookup1d":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"getProduct",
                  "loadingMessage":"Fetching product information",
                  "name":"RMProductLookup",
                  "params":{
                     "parsedBarcode":"{{ outputData }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "name":"returnsAcceptanceWeight1d",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "product":"{{ inputData.enablers.getProduct }}",
               "returnsMaxWeight":"{{ inputData.enablers.getProduct.Area.MaxWeight }}"
            },
            "type":"condition"
         }
      ],
      "returnsAcceptanceProductLookup2d":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProduct",
                  "id":"getProduct",
                  "loadingMessage":"Fetching product information",
                  "name":"RMProductLookup",
                  "params":{
                     "parsedBarcode":"{{ outputData }}"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "name":"returnsAcceptanceWeight2d",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "product":"{{ inputData.enablers.getProduct }}",
               "returnsMaxWeight":"{{ inputData.enablers.getProduct.Area.MaxWeight }}"
            },
            "type":"condition"
         }
      ],
      "returnsAcceptanceSegregationPrompt":[
         {
            "comparison":"eq",
            "expected":"TSN",
            "given":"{{ outputData.clientSrvCode }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.segregationPromptDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"cancel",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "numberOfSteps":2,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "name":"returnsAcceptanceAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.addToBasket":"{{ inputData.action }}"
                  },
                  "title":"Complete {{ outputData.serviceName }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "segregationPromptDescription":"Tracked 24 Parcel in 1st Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
               "serviceName":"Tracked 24 Return"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"TSS",
            "given":"{{ outputData.clientSrvCode }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.segregationPromptDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"cancel",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "numberOfSteps":2,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "name":"returnsAcceptanceAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.addToBasket":"{{ inputData.action }}"
                  },
                  "title":"Complete {{ outputData.serviceName }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "segregationPromptDescription":"Tracked 48 Parcel in 2nd Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
               "serviceName":"Tracked 48 Return"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"TSN",
            "given":"{{ outputData.serviceValue }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.segregationPromptDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"cancel",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "numberOfSteps":2,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "name":"returnsAcceptanceAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.addToBasket":"{{ inputData.action }}"
                  },
                  "title":"Complete {{ outputData.serviceName }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "segregationPromptDescription":"Tracked 24 Parcel in 1st Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
               "serviceName":"Tracked 24 Return"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"TSS",
            "given":"{{ outputData.serviceValue }}",
            "nodes":[
               {
                  "actions":[
                     {
                        "title":"Cancel",
                        "value":"cancel",
                        "visual":{
                           "view":"secondary"
                        }
                     },
                     {
                        "title":"Add to basket",
                        "value":"addToBasket",
                        "visual":{
                           "view":"primary"
                        }
                     }
                  ],
                  "description":"{{ outputData.segregationPromptDescription }}",
                  "nodes":[
                     {
                        "comparison":"eq",
                        "expected":"cancel",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "numberOfSteps":2,
                              "type":"undo"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"addToBasket",
                        "given":"{{ outputData.actions.addToBasket }}",
                        "nodes":[
                           {
                              "name":"returnsAcceptanceAddToBasket",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "actions.addToBasket":"{{ inputData.action }}"
                  },
                  "title":"Complete {{ outputData.serviceName }}",
                  "type":"prompt",
                  "visual":{
                     "actionAlignment":"left"
                  }
               }
            ],
            "outputData":{
               "segregationPromptDescription":"Tracked 48 Parcel in 2nd Class Parcels bag\n\nLetter or Large Letter in the Letters bag",
               "serviceName":"Tracked 48 Return"
            },
            "type":"condition"
         }
      ],
      "returnsAcceptanceService1d":[
         {
            "data":[
               {
                  "title":"Tracked 24 Return",
                  "value":"TSN"
               },
               {
                  "title":"Tracked 48 Return",
                  "value":"TSS"
               }
            ],
            "nodes":[
               {
                  "name":"returnsAcceptanceAskAddress1d",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "barcodeInfo.Country":"GBR",
               "barcodeInfo.Format":"09",
               "serviceName":"{{ inputData.selected.title }}",
               "serviceValue":"{{ inputData.selected.value }}"
            },
            "title":"What is the service?",
            "type":"options"
         }
      ],
      "returnsAcceptanceWeight1d":[
         {
            "inputMask":"numeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.returnsMaxWeight }}",
                     "message":"Weight is more than the maximum of {{ outputData.returnsMaxWeight }}g, for this service."
                  }
               }
            ],
            "nodes":[
               {
                  "name":"returnsAcceptanceService1d",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "weight":"{{ inputData.inputValue }}"
            },
            "title":"Weight",
            "type":"input",
            "unit":{
               "position":"right",
               "value":"g"
            }
         }
      ],
      "returnsAcceptanceWeight2d":[
         {
            "inputMask":"numeric",
            "inputValidation":[
               {
                  "field":"inputValue",
                  "numericality":{
                     "lte":"{{ outputData.returnsMaxWeight }}",
                     "message":"Weight is more than the maximum of {{ outputData.returnsMaxWeight }}g, for this service."
                  }
               }
            ],
            "nodes":[
               {
                  "name":"returnsAcceptanceAskAddress2d",
                  "type":"subJourney"
               }
            ],
            "outputData":{
               "weight":"{{ inputData.inputValue }}"
            },
            "title":"Weight",
            "type":"input",
            "unit":{
               "position":"right",
               "value":"g"
            }
         }
      ],
      "scanBarcode":[
         {
            "description":"Enter barcode value",
            "enablers":[
               {
                  "action":"mail",
                  "id":"tokeniser",
                  "loadingMessage":"Please wait...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"{{ inputData.barcode }}"
                  },
                  "stepEvent":"onChange"
               }
            ],
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"",
                  "given":"{{outputData.barcodeInfo.type}}",
                  "nodes":[
                     {
                        "name":"invalidLocalCollect",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "enablers":[
                     {
                        "action":"getBookInInfo",
                        "id":"despatch",
                        "loadingMessage":"Please wait, getting BookIn info...",
                        "name":"despatch",
                        "params":{
                           "branchID":"{{ appData.device.branchID }}",
                           "carrierID":"{{ outputData.barcodeInfo.Carrier }}",
                           "clerkID":"{{ outputData.ClerkID }}",
                           "counterID":"{{ appData.device.nodeID }}",
                           "trackingIds":"{{ outputData.barcodeInfo.barcode }}"
                        },
                        "stepEvent":"onMatch"
                     }
                  ],
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "comparison":"gt",
                        "expected":"0",
                        "given":"{{ outputData.despatchInfo.parcelCount }}",
                        "nodes":[
                           {
                              "name":"duplicateAcceptFromCarrier",
                              "type":"subJourney"
                           }
                        ],
                        "type":"condition"
                     },
                     {
                        "comparison":"eq",
                        "expected":"1",
                        "given":"1",
                        "nodes":[
                           {
                              "nodes":[
                                 {
                                    "name":"productLookUp",
                                    "type":"subJourney"
                                 }
                              ],
                              "title":"Next",
                              "type":"choice"
                           }
                        ],
                        "type":"condition"
                     }
                  ],
                  "outputData":{
                     "despatchInfo":"{{ inputData.enablers.despatch }}"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "ClerkID":"1",
               "LaunchItemID":"",
               "PrintRef":"false",
               "ServiceId":"LCIn",
               "TandT":"true",
               "TandTCarrier":"",
               "TandTType":"A",
               "address.countryAlpha2":"{{ inputData.enablers.tokeniser.DestinationCountry }}",
               "address.line1":"{{ inputData.enablers.tokeniser.BuildingName }}",
               "address.postcode":"{{ inputData.enablers.tokeniser.DestinationPostCode }}",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "incidentCodes":" ",
               "itemOnHand":"true",
               "journeyType":"Accept from Carrier",
               "parcelStatus":"BRANCH_CHECKED_IN",
               "rawBarcode":"{{ inputData.barcode }}",
               "serviceName":"Local Collect Item In"
            },
            "title":"Input barcode",
            "type":"barcode",
            "visual":{
               "transition":false
            }
         }
      ],
      "scanIssuer":[
         {
            "description":"Enter barcode value",
            "enablers":[
               {
                  "action":"mail",
                  "id":"tokeniser",
                  "loadingMessage":"Please wait...",
                  "name":"tokeniser",
                  "params":{
                     "barcode":"{{ inputData.barcode }}"
                  },
                  "stepEvent":"onChange"
               }
            ],
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"",
                  "given":"{{outputData.barcodeInfo.type}}",
                  "nodes":[
                     {
                        "name":"invalidLocalCollect",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "returnTo":"scanIssuer"
                  },
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "enablers":[
                     {
                        "action":"getBookInInfo",
                        "id":"despatch",
                        "loadingMessage":"Please wait, getting BookIn info...",
                        "name":"despatch",
                        "params":{
                           "branchID":"{{ appData.device.branchID }}",
                           "carrierID":"{{ outputData.barcodeInfo.Carrier }}",
                           "clerkID":"{{ outputData.ClerkID }}",
                           "counterID":"{{ appData.device.nodeID }}",
                           "trackingIds":"{{ outputData.barcodeInfo.barcode }}"
                        },
                        "stepEvent":"onMatch"
                     }
                  ],
                  "expected":"1",
                  "given":"1",
                  "nodes":[
                     {
                        "name":"carrierType",
                        "type":"subJourney"
                     }
                  ],
                  "outputData":{
                     "despatchInfo":"{{ inputData.enablers.despatch }}"
                  },
                  "type":"condition"
               }
            ],
            "outputData":{
               "Carrier":"",
               "CarrierID":"RM",
               "ClerkID":"1",
               "LaunchItemID":"",
               "PrintRef":"false",
               "ServiceId":"LCOut1",
               "TandT":"",
               "TandTCarrier":"",
               "TandTType":"A",
               "barcodeInfo":"{{ inputData.enablers.tokeniser }}",
               "captureID":"NPA",
               "despatchFlag":"",
               "incidentCodes":"",
               "itemOnHand":"",
               "journeyType":"Issue to Customer",
               "rawBarcode":"{{ inputData.barcode }}",
               "referenceValue":"{{ inputData.enablers.tokeniser.barcode }}",
               "rejectionStatus":"READY_FOR_CARRIER_COLLECTION",
               "returnReason":"false",
               "returnTo":"ScanIssuer",
               "selectedIdCheck":"",
               "service":"Customer Issue",
               "serviceName":""
            },
            "title":"Input barcode",
            "type":"barcode",
            "visual":{
               "transition":true
            }
         }
      ],
      "segregationPFW":[
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"backToPFW",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Scan another Item",
                  "value":"Scan",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Add To Basket",
                  "value":"addToBasket",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"Keep Parcelforce items separately from other mail items",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"backToPFW",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "numberOfSteps":6,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Scan",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "name":"pfcaSegregateAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"addToBasket",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "name":"pfcaSegregateAddToBasketWithOutReturn",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.segregation":"{{ inputData.action }}"
            },
            "title":"Segregate Parcelforce {{outputData.nameService}}",
            "type":"prompt",
            "visual":{
               "actionAlignment":"right"
            }
         }
      ],
      "segregationPFW11":[
         {
            "description":"{{outputData.TD}}",
            "title":"Barcode",
            "type":"info",
            "visual":{
               "view":"disabled-input"
            }
         },
         {
            "actions":[
               {
                  "title":"Back",
                  "value":"backToPFW",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Scan another Item",
                  "value":"Scan",
                  "visual":{
                     "view":"secondary"
                  }
               },
               {
                  "title":"Add To Basket",
                  "value":"addToBasket",
                  "visual":{
                     "view":"primary"
                  }
               }
            ],
            "description":"Keep item secure and separate for despatch to Parcelforce",
            "nodes":[
               {
                  "comparison":"eq",
                  "expected":"backToPFW",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "numberOfSteps":3,
                        "type":"undo"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"Scan",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "name":"pfcaSegregateAddToBasket",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               },
               {
                  "comparison":"eq",
                  "expected":"addToBasket",
                  "given":"{{ outputData.actions.segregation }}",
                  "nodes":[
                     {
                        "name":"pfcaSegregateAddToBasketWithOutReturn",
                        "type":"subJourney"
                     }
                  ],
                  "type":"condition"
               }
            ],
            "outputData":{
               "actions.segregation":"{{ inputData.action }}"
            },
            "title":"Segregate Parcelforce {{ outputData.product.Service.ReportName }}",
            "type":"prompt",
            "visual":{
               "actionAlignment":"left"
            }
         }
      ],
      "verifyAgeAndIdProof":[
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProductServices",
                  "id":"RMProductLookupService",
                  "loadingMessage":"Please wait...",
                  "name":"RMProductLookup",
                  "params":{
                     "carrierServiceType":"{{ outputData.carrierServiceType}}",
                     "service":"LCOutAgeFee"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"Proof of age",
            "given":"{{ outputData.product.IDcheckType }}",
            "nodes":[
               {
                  "name":"proofOfAge",
                  "type":"subJourney"
               },
               {
                  "nodes":[
                     {
                        "name":"recordReturnReason",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Customer is refusing the item",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "outputData":{
               "incidentCodes":"I576",
               "productService":"{{ inputData.enablers.RMProductLookupService }}"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "enablers":[
               {
                  "action":"getProductServices",
                  "id":"RMProductLookupService",
                  "loadingMessage":"Please wait...",
                  "name":"RMProductLookup",
                  "params":{
                     "carrierServiceType":"{{ outputData.carrierServiceType}}",
                     "service":"LCOutNamedFee"
                  },
                  "stepEvent":"onMatch"
               }
            ],
            "expected":"Proof of name",
            "given":"{{ outputData.product.IDcheckType }}",
            "nodes":[
               {
                  "name":"proofOfName",
                  "type":"subJourney"
               },
               {
                  "nodes":[
                     {
                        "name":"recordReturnReason",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Customer is refusing the item",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "outputData":{
               "incidentCodes":"I575",
               "productService":"{{ inputData.enablers.RMProductLookupService }}"
            },
            "type":"condition"
         },
         {
            "comparison":"eq",
            "expected":"1",
            "given":"1",
            "nodes":[
               {
                  "name":"issueToCustomerAddToBasket",
                  "type":"subJourney"
               },
               {
                  "nodes":[
                     {
                        "name":"recordReturnReason",
                        "type":"subJourney"
                     }
                  ],
                  "title":"Customer is refusing the item",
                  "type":"choice",
                  "visual":{
                     "transition":true
                  }
               }
            ],
            "type":"condition"
         }
      ]
   },
   "title":"Post Office Journey",
   "type":"journey"
}